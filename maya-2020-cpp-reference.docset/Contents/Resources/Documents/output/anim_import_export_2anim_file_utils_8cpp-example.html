<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
<head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
<title>C++ API Reference: animImportExport/animFileUtils.cpp</title>
</head>
<body height="100%"><div class="body_content" id="body-content"><link href="cpp_ref/navtree.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/doxygen.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/tabs.css" rel="stylesheet" type="text/css"/><link href="style/adsk.cpm.css" rel="stylesheet" type="text/css"/><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('anim_import_export_2anim_file_utils_8cpp-example.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script>
<div>
<div class="head">
<h1>C++ API Reference: animImportExport/animFileUtils.cpp</h1>
</div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<div class="tabs" id="navrow1">
<ul class="tablist">
<li><a href="./index.html"><span>Main Page</span></a></li>
<li><a href="./pages.html"><span>Related Pages</span></a></li>
<li><a href="./modules.html"><span>Modules</span></a></li>
<li><a href="./namespaces.html"><span>Namespaces</span></a></li>
<li><a href="./annotated.html"><span>Classes</span></a></li>
<li><a href="./examples.html"><span>Examples</span></a></li>
<li>
<div class="MSearchBoxInactive" id="MSearchBox">
<span class="left">
<img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="cpp_ref/search/mag_sel.png"/>
<input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
</span><span class="right">
<a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="cpp_ref/search/close.png"/></a>
</span>
</div>
</li>
</ul>
</div>
</div><!-- top -->
<div class="ui-resizable side-nav-resizable" id="side-nav">
<div id="nav-tree">
<div id="nav-tree-contents">
<div class="sync" id="nav-sync"></div>
</div>
</div>
<div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;">
</div>
</div>
<div id="doc-content">
<!-- window showing the filter options -->
<!-- iframe showing the search results (closed by default) -->
<div class="header">
<div class="headertitle">
<div class="title">animImportExport/animFileUtils.cpp</div> </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">//-</span></div>
<div class="line"><span class="comment">// ==========================================================================</span></div>
<div class="line"><span class="comment">// Copyright (C) 1995 - 2006 Autodesk, Inc. and/or its licensors.  All </span></div>
<div class="line"><span class="comment">// rights reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// The coded instructions, statements, computer programs, and/or related </span></div>
<div class="line"><span class="comment">// material (collectively the "Data") in these files contain unpublished </span></div>
<div class="line"><span class="comment">// information proprietary to Autodesk, Inc. ("Autodesk") and/or its </span></div>
<div class="line"><span class="comment">// licensors, which is protected by U.S. and Canadian federal copyright </span></div>
<div class="line"><span class="comment">// law and by international treaties.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// The Data is provided for use exclusively by You. You have the right </span></div>
<div class="line"><span class="comment">// to use, modify, and incorporate this Data into other products for </span></div>
<div class="line"><span class="comment">// purposes authorized by the Autodesk software license agreement, </span></div>
<div class="line"><span class="comment">// without fee.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// The copyright notices in the Software and this entire statement, </span></div>
<div class="line"><span class="comment">// including the above license grant, this restriction and the </span></div>
<div class="line"><span class="comment">// following disclaimer, must be included in all copies of the </span></div>
<div class="line"><span class="comment">// Software, in whole or in part, and all derivative works of </span></div>
<div class="line"><span class="comment">// the Software, unless such copies or derivative works are solely </span></div>
<div class="line"><span class="comment">// in the form of machine-executable object code generated by a </span></div>
<div class="line"><span class="comment">// source language processor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. </span></div>
<div class="line"><span class="comment">// AUTODESK DOES NOT MAKE AND HEREBY DISCLAIMS ANY EXPRESS OR IMPLIED </span></div>
<div class="line"><span class="comment">// WARRANTIES INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF </span></div>
<div class="line"><span class="comment">// NON-INFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A PARTICULAR </span></div>
<div class="line"><span class="comment">// PURPOSE, OR ARISING FROM A COURSE OF DEALING, USAGE, OR </span></div>
<div class="line"><span class="comment">// TRADE PRACTICE. IN NO EVENT WILL AUTODESK AND/OR ITS LICENSORS </span></div>
<div class="line"><span class="comment">// BE LIABLE FOR ANY LOST REVENUES, DATA, OR PROFITS, OR SPECIAL, </span></div>
<div class="line"><span class="comment">// DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF AUTODESK </span></div>
<div class="line"><span class="comment">// AND/OR ITS LICENSORS HAS BEEN ADVISED OF THE POSSIBILITY </span></div>
<div class="line"><span class="comment">// OR PROBABILITY OF SUCH DAMAGES.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// ==========================================================================</span></div>
<div class="line"><span class="comment">//+</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  File Name: animFileUtils.cc</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Utility classes to read and write .anim files.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include "animFileUtils.h"</span></div>
<div class="line"><span class="preprocessor">#include "animImportExportStrings.h"</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MGlobal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MString.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnAnimCurve.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MAnimCurveClipboard.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MAnimCurveClipboardItem.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MAnimCurveClipboardItemArray.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;limits.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  Class animUnitNames</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//  String names for units.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMmString =         <span class="stringliteral">"mm"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kCmString =         <span class="stringliteral">"cm"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMString =          <span class="stringliteral">"m"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kKmString =         <span class="stringliteral">"km"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kInString =         <span class="stringliteral">"in"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kFtString =         <span class="stringliteral">"ft"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kYdString =         <span class="stringliteral">"yd"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMiString =         <span class="stringliteral">"mi"</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMmLString =        <span class="stringliteral">"millimeter"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kCmLString =        <span class="stringliteral">"centimeter"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMLString =         <span class="stringliteral">"meter"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kKmLString =        <span class="stringliteral">"kilometer"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kInLString =        <span class="stringliteral">"inch"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kFtLString =        <span class="stringliteral">"foot"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kYdLString =        <span class="stringliteral">"yard"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMiLString =        <span class="stringliteral">"mile"</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kRadString =        <span class="stringliteral">"rad"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kDegString =        <span class="stringliteral">"deg"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMinString =        <span class="stringliteral">"min"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kSecString =        <span class="stringliteral">"sec"</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kRadLString =       <span class="stringliteral">"radian"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kDegLString =       <span class="stringliteral">"degree"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMinLString =       <span class="stringliteral">"minute"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kSecLString =       <span class="stringliteral">"second"</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kHourTString =      <span class="stringliteral">"hour"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMinTString =       <span class="stringliteral">"min"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kSecTString =       <span class="stringliteral">"sec"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMillisecTString =  <span class="stringliteral">"millisec"</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kGameTString =      <span class="stringliteral">"game"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kFileTString =      <span class="stringliteral">"film"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kPalTString =       <span class="stringliteral">"pal"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kNtscTString =      <span class="stringliteral">"ntsc"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kShowTString =      <span class="stringliteral">"show"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kPalFTString =      <span class="stringliteral">"palf"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kNtscFTString =     <span class="stringliteral">"ntscf"</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kUnitlessString = <span class="stringliteral">"unitless"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kUnknownTimeString =    <span class="stringliteral">"Unknown Time Unit"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kUnknownAngularString = <span class="stringliteral">"Unknown Angular Unit"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kUnknownLinearString =  <span class="stringliteral">"Unknown Linear Unit"</span>;</div>
<div class="line"></div>
<div class="line">animUnitNames::animUnitNames()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class constructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">animUnitNames::~animUnitNames()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class destructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> animUnitNames::setToLongName(<span class="keyword">const</span> MAngle::Unit&amp; unit, <a name="_a0"></a><a class="code" href="./class_m_string.html">MString</a>&amp; name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the long text name of the angle unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">switch</span>(unit) {</div>
<div class="line"> <span class="keywordflow">case</span> MAngle::kDegrees:</div>
<div class="line">            name.<a name="a1"></a><a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kDegLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MAngle::kRadians:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kRadLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MAngle::kAngMinutes:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMinLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MAngle::kAngSeconds:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kSecLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownAngularString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> animUnitNames::setToShortName(<span class="keyword">const</span> MAngle::Unit&amp; unit, <a class="code" href="./class_m_string.html">MString</a>&amp; name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the short text name of the angle unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">switch</span>(unit) {</div>
<div class="line"> <span class="keywordflow">case</span> MAngle::kDegrees:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kDegString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MAngle::kRadians:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kRadString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MAngle::kAngMinutes:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMinString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MAngle::kAngSeconds:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kSecString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownAngularString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> animUnitNames::setToLongName(<span class="keyword">const</span> MDistance::Unit&amp; unit, <a class="code" href="./class_m_string.html">MString</a>&amp; name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the long text name of the distance unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">switch</span>(unit) {</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kInches:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kInLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kFeet:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kFtLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kYards:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kYdLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kMiles:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMiLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kMillimeters:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMmLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kCentimeters:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kCmLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kKilometers:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kKmLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kMeters:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMLString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownLinearString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> animUnitNames::setToShortName(<span class="keyword">const</span> MDistance::Unit&amp; unit, <a class="code" href="./class_m_string.html">MString</a>&amp; name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the short text name of the distance unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">switch</span>(unit) {</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kInches:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kInString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kFeet:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kFtString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kYards:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kYdString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kMiles:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMiString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kMillimeters:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMmString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kCentimeters:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kCmString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kKilometers:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kKmString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MDistance::kMeters:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownLinearString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> animUnitNames::setToLongName(<span class="keyword">const</span> MTime::Unit &amp;unit, <a class="code" href="./class_m_string.html">MString</a> &amp;name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the long text name of the time unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">switch</span>(unit) {</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kHours:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kHourTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kMinutes:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMinTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kSeconds:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kSecTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kMilliseconds:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMillisecTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kGames:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kGameTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kFilm:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kFileTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kPALFrame:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kPalTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kNTSCFrame:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kNtscTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kShowScan:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kShowTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kPALField:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kPalFTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MTime::kNTSCField:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kNtscFTString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownTimeString);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> animUnitNames::setToShortName(<span class="keyword">const</span> MTime::Unit &amp;unit, <a class="code" href="./class_m_string.html">MString</a> &amp;name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the short text name of the time unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    setToLongName(unit, name);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">bool</span> animUnitNames::setFromName(<span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> &amp;str, MAngle::Unit &amp;unit)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The angle unit is set based on the passed string. If the string</span></div>
<div class="line"><span class="comment">//      is not recognized, the angle unit is set to MAngle::kInvalid.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">bool</span> state = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">char</span> *name = str.<a name="a2"></a><a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ((strcmp(name, kDegString) == 0) || </div>
<div class="line">        (strcmp(name, kDegLString) == 0)) {</div>
<div class="line">        unit = MAngle::kDegrees;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kRadString) == 0) ||</div>
<div class="line">                (strcmp(name, kRadLString) == 0)) {</div>
<div class="line">        unit = MAngle::kRadians;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kMinString) == 0) ||</div>
<div class="line">                (strcmp(name, kMinLString) == 0)) {</div>
<div class="line">        unit = MAngle::kAngMinutes;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kSecString) == 0) ||</div>
<div class="line">                (strcmp(name, kSecLString) == 0)) {</div>
<div class="line">        unit = MAngle::kAngSeconds;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  This is not a recognized angular unit.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">        unit = MAngle::kInvalid;</div>
<div class="line"> <a name="_a3"></a><a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a name="a4"></a><a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kInvalidAngleUnits, stat);</div>
<div class="line">        msg.<a name="a5"></a><a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, str);</div>
<div class="line"> <a name="a6"></a><a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        state = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> state;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">bool</span> animUnitNames::setFromName(<span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> &amp;str, MDistance::Unit &amp;unit)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The distance unit is set based on the passed string. If the string</span></div>
<div class="line"><span class="comment">//      is not recognized, the distance unit is set to MDistance::kInvalid.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">bool</span> state = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">char</span> *name = str.<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ((strcmp(name, kInString) == 0) ||</div>
<div class="line">        (strcmp(name, kInLString) == 0)) {</div>
<div class="line">        unit = MDistance::kInches;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kFtString) == 0) ||</div>
<div class="line">                (strcmp(name, kFtLString) == 0)) {</div>
<div class="line">        unit = MDistance::kFeet;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kYdString) == 0) ||</div>
<div class="line">                (strcmp(name, kYdLString) == 0)) {</div>
<div class="line">        unit = MDistance::kYards;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kMiString) == 0) ||</div>
<div class="line">                (strcmp(name, kMiLString) == 0)) {</div>
<div class="line">        unit = MDistance::kMiles;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kMmString) == 0) ||</div>
<div class="line">                (strcmp(name, kMmLString) == 0)) {</div>
<div class="line">        unit = MDistance::kMillimeters;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kCmString) == 0) ||</div>
<div class="line">                (strcmp(name, kCmLString) == 0)) {</div>
<div class="line">        unit = MDistance::kCentimeters;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kKmString) == 0) ||</div>
<div class="line">                (strcmp(name, kKmLString) == 0)) {</div>
<div class="line">        unit = MDistance::kKilometers;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kMString) == 0) ||</div>
<div class="line">                (strcmp(name, kMLString) == 0)) {</div>
<div class="line">        unit = MDistance::kMeters;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  This is not a recognized distance unit.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">        state = <span class="keyword">false</span>;</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kInvalidLinearUnits, stat);</div>
<div class="line">        msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, str);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        unit = MDistance::kInvalid;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> state;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">bool</span> animUnitNames::setFromName(<span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> &amp;str, MTime::Unit &amp;unit)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The time unit is set based on the passed string. If the string</span></div>
<div class="line"><span class="comment">//      is not recognized, the time unit is set to MTime::kInvalid.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">bool</span> state = <span class="keyword">true</span>;</div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">char</span> *name = str.<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(name, kHourTString) == 0) {</div>
<div class="line">        unit = MTime::kHours;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kMinTString) == 0) {</div>
<div class="line">        unit = MTime::kMinutes;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kSecTString) == 0) {</div>
<div class="line">        unit = MTime::kSeconds;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kMillisecTString) == 0) {</div>
<div class="line">        unit = MTime::kMilliseconds;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kGameTString) == 0) {</div>
<div class="line">        unit = MTime::kGames;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kFileTString) == 0) {</div>
<div class="line">        unit = MTime::kFilm;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kPalTString) == 0) {</div>
<div class="line">        unit = MTime::kPALFrame;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kNtscTString) == 0) {</div>
<div class="line">        unit = MTime::kNTSCFrame;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kShowTString) == 0) {</div>
<div class="line">        unit = MTime::kShowScan;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kPalFTString) == 0) {</div>
<div class="line">        unit = MTime::kPALField;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kNtscFTString) == 0) {</div>
<div class="line">        unit = MTime::kNTSCField;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  This is not a recognized time unit.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">        unit = MTime::kInvalid;</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kInvalidTimeUnits, stat);</div>
<div class="line">        msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, str);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        state = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> state;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  Class animBase</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Tangent type words</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentGlobal = <span class="stringliteral">"global"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentFixed = <span class="stringliteral">"fixed"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentLinear = <span class="stringliteral">"linear"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentFlat = <span class="stringliteral">"flat"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentSmooth = <span class="stringliteral">"spline"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentStep = <span class="stringliteral">"step"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentSlow = <span class="stringliteral">"slow"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentFast = <span class="stringliteral">"fast"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentClamped = <span class="stringliteral">"clamped"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentPlateau = <span class="stringliteral">"plateau"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentStepNext = <span class="stringliteral">"stepnext"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentAuto = <span class="stringliteral">"auto"</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Infinity type words</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordConstant = <span class="stringliteral">"constant"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordLinear = <span class="stringliteral">"linear"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordCycle = <span class="stringliteral">"cycle"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordCycleRelative = <span class="stringliteral">"cycleRelative"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordOscillate = <span class="stringliteral">"oscillate"</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//  Param Curve types</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeUnknown = <span class="stringliteral">"unknown"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeLinear = <span class="stringliteral">"linear"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeAngular = <span class="stringliteral">"angular"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeTime = <span class="stringliteral">"time"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeUnitless = <span class="stringliteral">"unitless"</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//  Keywords</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAnim = <span class="stringliteral">"anim"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAnimData = <span class="stringliteral">"animData"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMovData = <span class="stringliteral">"movData"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMayaVersion = <span class="stringliteral">"mayaVersion"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAnimVersion = <span class="stringliteral">"animVersion"</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kTimeUnit = <span class="stringliteral">"timeUnit"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kLinearUnit = <span class="stringliteral">"linearUnit"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAngularUnit = <span class="stringliteral">"angularUnit"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kStartTime = <span class="stringliteral">"startTime"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kEndTime = <span class="stringliteral">"endTime"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kStartUnitless = <span class="stringliteral">"startUnitless"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kEndUnitless = <span class="stringliteral">"endUnitless"</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// animVersions:</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAnimVersionString = <span class="stringliteral">"1.1"</span>;</div>
<div class="line"><span class="comment">// const double kVersion1 = 1.0;                        // initial release</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">double</span> kVersionNonWeightedAndBreakdowns = 1.1;    <span class="comment">// added support for non-weighted curves and breakdowns</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kTwoSpace = <span class="stringliteral">"  "</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//  animData keywords</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kInputString = <span class="stringliteral">"input"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kOutputString = <span class="stringliteral">"output"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWeightedString = <span class="stringliteral">"weighted"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kPreInfinityString = <span class="stringliteral">"preInfinity"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kPostInfinityString = <span class="stringliteral">"postInfinity"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kInputUnitString = <span class="stringliteral">"inputUnit"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kOutputUnitString = <span class="stringliteral">"outputUnit"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kTanAngleUnitString = <span class="stringliteral">"tangentAngleUnit"</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kKeysString = <span class="stringliteral">"keys"</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//  special characters</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kSemiColonChar   = <span class="charliteral">';'</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kSpaceChar       = <span class="charliteral">' '</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kTabChar         = <span class="charliteral">'\t'</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kHashChar        = <span class="charliteral">'#'</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kNewLineChar     = <span class="charliteral">'\n'</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kSlashChar       = <span class="charliteral">'/'</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kBraceLeftChar   = <span class="charliteral">'{'</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kBraceRightChar  = <span class="charliteral">'}'</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kDoubleQuoteChar = <span class="charliteral">'"'</span>;</div>
<div class="line"></div>
<div class="line">animBase::animBase ()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The constructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    resetUnits();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">animBase::~animBase()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The destructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> animBase::resetUnits()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Reset the units used by this class to the ui units.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    timeUnit = <a name="a7"></a><a class="code" href="./class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>();</div>
<div class="line">    linearUnit = <a name="a8"></a><a class="code" href="./class_m_distance.html#ad7868b7deab93de1213d816364e634cc">MDistance::uiUnit</a>();</div>
<div class="line">    angularUnit = <a name="a9"></a><a class="code" href="./class_m_angle.html#abc881d829b53f0f3871fcf9a8ab173b1">MAngle::uiUnit</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *</div>
<div class="line">animBase::tangentTypeAsWord(MFnAnimCurve::TangentType type)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a string with a test based desription of the passed</span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::TangentType. </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">switch</span> (type) {</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentGlobal:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentGlobal);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentFixed:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentFixed);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentLinear:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentLinear);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentFlat:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentFlat);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentSmooth:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentSmooth);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentStep:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentStep);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentStepNext:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentStepNext);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentSlow:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentSlow);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentFast:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentFast);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentClamped:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentClamped);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentPlateau:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentPlateau);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kTangentAuto:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentAuto);</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTangentGlobal);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">MFnAnimCurve::TangentType</div>
<div class="line">animBase::wordAsTangentType (<span class="keywordtype">char</span> *type)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a MFnAnimCurve::TangentType based on the passed string.</span></div>
<div class="line"><span class="comment">//      If the string is not a recognized tangent type, tnen</span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::kTangentGlobal is returned.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentGlobal) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentGlobal);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentFixed) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentFixed);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentLinear) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentLinear);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentFlat) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentFlat);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentSmooth) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentSmooth);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentStep) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentStep);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentStepNext) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentStepNext);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentSlow) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentSlow);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentFast) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentFast);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentClamped) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentClamped);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentPlateau) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentPlateau);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordTangentAuto) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentAuto);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kTangentGlobal);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *</div>
<div class="line">animBase::infinityTypeAsWord(MFnAnimCurve::InfinityType type)</div>
<div class="line"><span class="comment">//  </span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a string containing the name of the passed </span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::InfinityType type.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">switch</span> (type) {</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kConstant:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordConstant);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kLinear:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordLinear);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kCycle:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordCycle);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kCycleRelative:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordCycleRelative);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kOscillate:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordOscillate);</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">return</span> (kWordConstant);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">MFnAnimCurve::InfinityType</div>
<div class="line">animBase::wordAsInfinityType(<span class="keyword">const</span> <span class="keywordtype">char</span> *type)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a MFnAnimCurve::InfinityType from the passed string.</span></div>
<div class="line"><span class="comment">//      If the string does not match a recognized infinity type,</span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::kConstant is returned.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(type, kWordConstant) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span>(MFnAnimCurve::kConstant);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(type, kWordLinear) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kLinear);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(type, kWordCycle) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kCycle);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(type, kWordCycleRelative) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kCycleRelative);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(type, kWordOscillate) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kOscillate);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> (MFnAnimCurve::kConstant);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *</div>
<div class="line">animBase::outputTypeAsWord (MFnAnimCurve::AnimCurveType type)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a string identifying the output type of the</span></div>
<div class="line"><span class="comment">//      passed MFnAnimCurve::AnimCurveType.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">switch</span> (type) {</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTL:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUL:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTypeLinear);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTA:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUA:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTypeAngular);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTT:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUT:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTypeTime);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTU:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUU:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTypeUnitless);</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUnknown:</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTypeUnitless);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTypeUnknown);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">animBase::AnimBaseType</div>
<div class="line">animBase::wordAsInputType(<span class="keyword">const</span> <span class="keywordtype">char</span> *input)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns an input type based on the passed string.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(input, kWordTypeTime) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> animBase::kAnimBaseTime;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="keywordflow">return</span> animBase::kAnimBaseUnitless;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">animBase::AnimBaseType</div>
<div class="line">animBase::wordAsOutputType(<span class="keyword">const</span> <span class="keywordtype">char</span> *output) </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a output type based on the passed string.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(output, kWordTypeLinear) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> animBase::kAnimBaseLinear;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(output, kWordTypeAngular) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> animBase::kAnimBaseAngular;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(output, kWordTypeTime) == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> animBase::kAnimBaseTime;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="keywordflow">return</span> animBase::kAnimBaseUnitless;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *</div>
<div class="line">animBase::boolInputTypeAsWord(<span class="keywordtype">bool</span> isUnitless) </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a string based on a bool. </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (isUnitless) {</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTypeUnitless);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="keywordflow">return</span> (kWordTypeTime);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">MFnAnimCurve::AnimCurveType</div>
<div class="line">animBase::typeAsAnimCurveType(  animBase::AnimBaseType input, </div>
<div class="line">                                animBase::AnimBaseType output)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a MFnAnimCurve::AnimCurveType based on the passed</span></div>
<div class="line"><span class="comment">//      input and output types. If the input and output types do</span></div>
<div class="line"><span class="comment">//      not create a valid MFnAnimCurve::AnimCurveType, then a</span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::kAnimCurveUnknown is returned.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    MFnAnimCurve::AnimCurveType type = MFnAnimCurve::kAnimCurveUnknown;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (output) {</div>
<div class="line"> <span class="keywordflow">case</span> kAnimBaseLinear:</div>
<div class="line"> <span class="keywordflow">if</span> (kAnimBaseUnitless == input) {</div>
<div class="line">                type = MFnAnimCurve::kAnimCurveUL;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                type = MFnAnimCurve::kAnimCurveTL;</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> kAnimBaseAngular:</div>
<div class="line"> <span class="keywordflow">if</span> (kAnimBaseUnitless == input) {</div>
<div class="line">                type = MFnAnimCurve::kAnimCurveUA;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                type = MFnAnimCurve::kAnimCurveTA;</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> kAnimBaseTime:</div>
<div class="line"> <span class="keywordflow">if</span> (kAnimBaseUnitless == input) {</div>
<div class="line">                type = MFnAnimCurve::kAnimCurveUT;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                type = MFnAnimCurve::kAnimCurveTT;</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> kAnimBaseUnitless:</div>
<div class="line"> <span class="keywordflow">if</span> (kAnimBaseUnitless == input) {</div>
<div class="line">                type = MFnAnimCurve::kAnimCurveUU;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                type = MFnAnimCurve::kAnimCurveTU;</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="comment">//  An unknown anim curve type.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> type;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">double</span> animBase::asDouble (std::ifstream &amp;clipFile)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Reads the next bit of valid data as a double.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    advance(clipFile);</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> value;</div>
<div class="line">    clipFile &gt;&gt; value;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> (value);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> animBase::isNextNumeric(std::ifstream &amp;clipFile)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The method skips past whitespace and comments and checks if</span></div>
<div class="line"><span class="comment">//      the next character is numeric.</span></div>
<div class="line"><span class="comment">//      </span></div>
<div class="line"><span class="comment">//      true is returned if the character is numeric.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">bool</span> numeric = <span class="keyword">false</span>;</div>
<div class="line">    advance(clipFile);</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">char</span> next = clipFile.peek();</div>
<div class="line"> <span class="keywordflow">if</span> (next &gt;= <span class="charliteral">'0'</span> &amp;&amp; next &lt;= <span class="charliteral">'9'</span>) {</div>
<div class="line">        numeric = <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> numeric;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> animBase::advance (std::ifstream &amp;clipFile)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The method skips past all of the whitespace and commented lines</span></div>
<div class="line"><span class="comment">//      in the ifstream. It will also ignore semi-colons.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">while</span> (clipFile) {</div>
<div class="line">        clipFile &gt;&gt; std::ws;</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">char</span> next = clipFile.peek();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (next == kSemiColonChar) {</div>
<div class="line">            clipFile.ignore(1, kSemiColonChar);</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (next == kSlashChar || next == kHashChar) {</div>
<div class="line">            clipFile.ignore(INT_MAX, kNewLineChar);</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span>* animBase::asWord (std::ifstream &amp;clipFile, <span class="keywordtype">bool</span> includeWS <span class="comment">/* false */</span>)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns the next string of characters in an ifstream. The string</span></div>
<div class="line"><span class="comment">//      ends when whitespace or a semi-colon is encountered. If the </span></div>
<div class="line"><span class="comment">//      includeWS argument is true, the string will not end if a white</span></div>
<div class="line"><span class="comment">//      space character is encountered.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      If a double quote is detected '"', then verything up to the next </span></div>
<div class="line"><span class="comment">//      double quote will be returned.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      This method returns a pointer to a static variable, so its contents</span></div>
<div class="line"><span class="comment">//      should be used immediately.</span></div>
<div class="line"><span class="comment">//      </span></div>
<div class="line">    {</div>
<div class="line"> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kBufLength = 1024;</div>
<div class="line"> <span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keywordtype">string</span>[kBufLength];</div>
<div class="line"></div>
<div class="line">    advance(clipFile);</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">char</span> *c = string;</div>
<div class="line">    clipFile.read (c, 1);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (*c == kDoubleQuoteChar) {</div>
<div class="line">        clipFile.read(c, 1);</div>
<div class="line"> <span class="keywordflow">while</span>(!clipFile.eof() &amp;&amp; (*c != kDoubleQuoteChar)) {</div>
<div class="line">            c++;</div>
<div class="line"> <span class="keywordflow">if</span> (c-<span class="keywordtype">string</span> &gt;= kBufLength) {</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            clipFile.read(c, 1);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//  Get the case of the '{' or '}' character</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (*c == kBraceLeftChar || *c == kBraceRightChar) {</div>
<div class="line">            c++;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="keywordflow">while</span>(!clipFile.eof() &amp;&amp; (*c != kSemiColonChar)) {</div>
<div class="line"> <span class="keywordflow">if</span> (!includeWS &amp;&amp; ((*c == kSpaceChar) || (*c == kTabChar))) {</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                c++;</div>
<div class="line"> <span class="keywordflow">if</span> (c-<span class="keywordtype">string</span> &gt;= kBufLength) {</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                clipFile.read(c, 1);</div>
<div class="line">            }</div>
<div class="line">    }</div>
<div class="line">    }</div>
<div class="line">    *c = 0x00;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> (<span class="keywordtype">string</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span> animBase::asChar (std::ifstream &amp;clipFile)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns the next character of interest in the ifstream. All </span></div>
<div class="line"><span class="comment">//      whitespace and commented lines are ignored.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">    {</div>
<div class="line">    advance(clipFile);</div>
<div class="line"> <span class="keywordflow">return</span> clipFile.get();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> animBase::isEquivalent(<span class="keywordtype">double</span> a, <span class="keywordtype">double</span> b)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns true if the doubles are within the tolerance.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">    {</div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">double</span> tolerance = 1.0e-10;</div>
<div class="line"> <span class="keywordflow">return</span> ((a &gt; b) ? (a - b &lt;= tolerance) : (b - a &lt;= tolerance));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  Class animReader</span></div>
<div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line">animReader::animReader ()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class constructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">:   animVersion (1.0)</div>
<div class="line">,   convertAnglesFromV2To3(false)</div>
<div class="line">,   convertAnglesFromV3To2(false)</div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">animReader::~animReader()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class destructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="./class_m_status.html">MStatus</a> </div>
<div class="line">animReader::readClipboard(std::ifstream &amp;readAnim, <a name="_a10"></a><a class="code" href="./class_m_anim_curve_clipboard.html">MAnimCurveClipboard</a>&amp; cb)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Given a clipboard and an ifstream, read the ifstream and add</span></div>
<div class="line"><span class="comment">//      all of the anim curves described in ther stream into the </span></div>
<div class="line"><span class="comment">//      API clipboard.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="comment">//  Set the default values for the start and end of the clipboard.</span></div>
<div class="line"> <span class="comment">//  The MAnimCurveClipboard::set() method will examine all of the</span></div>
<div class="line"> <span class="comment">//  anim curves are determine the proper start and end values, if the</span></div>
<div class="line"> <span class="comment">//  start time is greater than the end value.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">//  By default, the start values are greater than the end values to </span></div>
<div class="line"> <span class="comment">//  ensure correct behavior if the file does not specify the start and</span></div>
<div class="line"> <span class="comment">//  end values.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordtype">double</span> startTime = 1.0;</div>
<div class="line"> <span class="keywordtype">double</span> endTime = 0.0;</div>
<div class="line"> <span class="keywordtype">double</span> startUnitless = 1.0;</div>
<div class="line"> <span class="keywordtype">double</span> endUnitless = 0.0;</div>
<div class="line"></div>
<div class="line">    resetUnits();</div>
<div class="line">    convertAnglesFromV2To3 = <span class="keyword">false</span>;</div>
<div class="line">    convertAnglesFromV3To2 = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Read the header. The header officially ends when the first non-header</span></div>
<div class="line"> <span class="comment">//  keyword is found. The header contains clipboard specific information</span></div>
<div class="line"> <span class="comment">//  where the body is anim curve specific.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordtype">char</span> *dataType = NULL;</div>
<div class="line"> <span class="keywordtype">bool</span> hasVersionString = <span class="keyword">false</span>;</div>
<div class="line"> <span class="keywordflow">while</span> (!readAnim.eof()) {</div>
<div class="line">        advance(readAnim);</div>
<div class="line">        dataType = asWord(readAnim);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(dataType, kAnimVersion) == 0) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> version(asWord(readAnim));</div>
<div class="line">            animVersion = version.asDouble();</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> thisVersion(kAnimVersionString);</div>
<div class="line"></div>
<div class="line">            hasVersionString = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Add versioning control here.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (version != thisVersion) {</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kInvalidVersion,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, version, thisVersion);</div>
<div class="line"> <a name="a11"></a><a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kMayaVersion) == 0) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> version(asWord(readAnim, <span class="keyword">true</span>));</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> currentVersion = <a name="a12"></a><a class="code" href="./class_m_global.html#af83edfe4df143d2796325c6a21b07224">MGlobal::mayaVersion</a>();</div>
<div class="line"> <span class="keywordflow">if</span> (currentVersion.<a name="a13"></a><a class="code" href="./class_m_string.html#a41ba57372bc1082383b4f1929a8030fa">substring</a>(0,1) == <span class="stringliteral">"2."</span>) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> vCheck = version.<a class="code" href="./class_m_string.html#a41ba57372bc1082383b4f1929a8030fa">substring</a>(0, 1);</div>
<div class="line"> <span class="keywordflow">if</span> (vCheck != <span class="stringliteral">"2."</span>) {</div>
<div class="line">                    convertAnglesFromV3To2 = <span class="keyword">true</span>;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  If this is a pre-Maya 3.0 file, then the tangent angles </span></div>
<div class="line"> <span class="comment">//  will need to be converted to work in Maya 3.0+</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> vCheck = version.<a class="code" href="./class_m_string.html#a41ba57372bc1082383b4f1929a8030fa">substring</a>(0, 1);</div>
<div class="line"> <span class="keywordflow">if</span> (vCheck == <span class="stringliteral">"2."</span>) {</div>
<div class="line">                    convertAnglesFromV2To3 = <span class="keyword">true</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kTimeUnit) == 0) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> timeUnitString(asWord(readAnim));</div>
<div class="line"> <span class="keywordflow">if</span> (!animUnitNames::setFromName(timeUnitString, timeUnit)) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line">                timeUnit = <a class="code" href="./class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>();</div>
<div class="line">                animUnitNames::setToShortName(timeUnit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kTimeUnit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kLinearUnit) == 0) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> linearUnitString(asWord(readAnim));</div>
<div class="line"> <span class="keywordflow">if</span> (!animUnitNames::setFromName(linearUnitString, linearUnit)) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line">                linearUnit = <a class="code" href="./class_m_distance.html#ad7868b7deab93de1213d816364e634cc">MDistance::uiUnit</a>();</div>
<div class="line">                animUnitNames::setToShortName(linearUnit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kLinearUnit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kAngularUnit) == 0) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> angularUnitString(asWord(readAnim));</div>
<div class="line"> <span class="keywordflow">if</span> (!animUnitNames::setFromName(angularUnitString, angularUnit)) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line">                angularUnit = <a class="code" href="./class_m_angle.html#abc881d829b53f0f3871fcf9a8ab173b1">MAngle::uiUnit</a>();</div>
<div class="line">                animUnitNames::setToShortName(angularUnit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kAngularUnit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kStartTime) == 0) {</div>
<div class="line">            startTime = asDouble(readAnim);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kEndTime) == 0) {</div>
<div class="line">            endTime = asDouble(readAnim);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kStartUnitless) == 0) {</div>
<div class="line">            startUnitless = asDouble(readAnim);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kEndUnitless) == 0) {</div>
<div class="line">            endUnitless = asDouble(readAnim);</div>
<div class="line">        } <span class="keywordflow">else</span> {    </div>
<div class="line"> <span class="comment">//  The header should be finished. Begin to parse the body.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  The animVersion string is required.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (!hasVersionString) {</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kMissingKeyword, stat);</div>
<div class="line">        msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kAnimVersion);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"> <span class="keywordflow">return</span> (MS::kFailure);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Set the linear and angular units to be the same as the file</span></div>
<div class="line"> <span class="comment">//  being read. This will allow fixed tangent data to be read</span></div>
<div class="line"> <span class="comment">//  in properly if the scene has different units than the .anim file.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    MDistance::Unit oldDistanceUnit = <a class="code" href="./class_m_distance.html#ad7868b7deab93de1213d816364e634cc">MDistance::uiUnit</a>();</div>
<div class="line">    MTime::Unit oldTimeUnit = <a class="code" href="./class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>();</div>
<div class="line"></div>
<div class="line"> <a name="a14"></a><a class="code" href="./class_m_distance.html#a0619e077e1d24cfc947c6844ec8dcfe3">MDistance::setUIUnit</a>(linearUnit);</div>
<div class="line"> <a name="a15"></a><a class="code" href="./class_m_time.html#ad9406cfa93f3a9c96b962db36d126909">MTime::setUIUnit</a>(timeUnit);</div>
<div class="line"></div>
<div class="line"> <a name="_a16"></a><a class="code" href="./class_m_anim_curve_clipboard_item_array.html">MAnimCurveClipboardItemArray</a> clipboardArray;</div>
<div class="line"> <span class="keywordflow">while</span> (!readAnim.eof()) {</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (NULL == dataType) {</div>
<div class="line">            dataType = asWord(readAnim);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(dataType, kAnim) == 0) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> fullAttributeName, leafAttributeName, nodeName;</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  If this is from an unconnected anim curve, then there</span></div>
<div class="line"> <span class="comment">//  will not be an attribute name.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (!isNextNumeric(readAnim)) {</div>
<div class="line">                fullAttributeName.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  If the node names were specified, then the next two</span></div>
<div class="line"> <span class="comment">//  words should be the leaf attribute and the node name.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (!isNextNumeric(readAnim)) {</div>
<div class="line">                    leafAttributeName.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line">                    nodeName.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> rowCount, childCount, attrCount;</div>
<div class="line">            rowCount = (unsigned)asDouble(readAnim);</div>
<div class="line">            childCount = (unsigned)asDouble(readAnim);</div>
<div class="line">            attrCount = (unsigned)asDouble(readAnim);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  If the next keyword is not an animData, then this is </span></div>
<div class="line"> <span class="comment">//  a place holder for the API clipboard.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">            dataType = asWord(readAnim);</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(dataType, kAnimData) == 0) {</div>
<div class="line"> <a name="_a17"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> clipboardItem;</div>
<div class="line"> <span class="keywordflow">if</span> (readAnimCurve(readAnim, clipboardItem)) {</div>
<div class="line">                    clipboardItem.<a name="a18"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html#a4c44c3ba32dc4a44eaf1e6b0c3dd8809">setAddressingInfo</a>(rowCount, </div>
<div class="line">                                                    childCount, attrCount);</div>
<div class="line">                    clipboardItem.<a name="a19"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html#a6919636bc3a3405a920ee33c5aedf609">setNameInfo</a>(  nodeName, </div>
<div class="line">                                                fullAttributeName, </div>
<div class="line">                                                leafAttributeName);</div>
<div class="line">                    clipboardArray.<a name="a20"></a><a class="code" href="./class_m_anim_curve_clipboard_item_array.html#a23bf02447a622dc24bd636dc5708391f">append</a>(clipboardItem);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  Could not read the anim curve.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stringStat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotReadAnim,</div>
<div class="line">                                                             stringStat);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  This must be a place holder object for the clipboard.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <a class="code" href="./class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> clipboardItem;</div>
<div class="line">                clipboardItem.<a class="code" href="./class_m_anim_curve_clipboard_item.html#a4c44c3ba32dc4a44eaf1e6b0c3dd8809">setAddressingInfo</a>(rowCount, </div>
<div class="line">                                                childCount, attrCount);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Since there is no anim curve specified, what is </span></div>
<div class="line"> <span class="comment">//  in the fullAttributeName string is really the node </span></div>
<div class="line"> <span class="comment">//  name.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">                clipboardItem.<a class="code" href="./class_m_anim_curve_clipboard_item.html#a6919636bc3a3405a920ee33c5aedf609">setNameInfo</a>(  fullAttributeName, </div>
<div class="line">                                            nodeName, </div>
<div class="line">                                            leafAttributeName);</div>
<div class="line">                clipboardArray.<a class="code" href="./class_m_anim_curve_clipboard_item_array.html#a23bf02447a622dc24bd636dc5708391f">append</a>(clipboardItem);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  dataType already contains the next keyword. </span></div>
<div class="line"> <span class="comment">//  </span></div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="keywordflow">if</span> (!readAnim.eof()) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> warnStr(dataType);</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kUnknownKeyword,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, warnStr);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Skip to the next line, this one is invalid.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">                readAnim.ignore(INT_MAX, kNewLineChar);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  The end of the file was reached. </span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Skip any whitespace.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">        dataType = NULL;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (MS::kSuccess != cb.<a name="a21"></a><a class="code" href="./class_m_anim_curve_clipboard.html#a1906f08886d751ecbe2b6f89ab8fc174">set</a>( clipboardArray, </div>
<div class="line"> <a name="_a22"></a><a class="code" href="./class_m_time.html">MTime</a>(startTime, timeUnit), <a class="code" href="./class_m_time.html">MTime</a>(endTime, timeUnit), </div>
<div class="line">                        (<span class="keywordtype">float</span>) startUnitless, (<span class="keywordtype">float</span>) endUnitless)) {</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stringStat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kClipboardFailure,</div>
<div class="line">                                                 stringStat);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Restore the old units.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <a class="code" href="./class_m_distance.html#a0619e077e1d24cfc947c6844ec8dcfe3">MDistance::setUIUnit</a>(oldDistanceUnit);</div>
<div class="line"> <a class="code" href="./class_m_time.html#ad9406cfa93f3a9c96b962db36d126909">MTime::setUIUnit</a>(oldTimeUnit);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> (MS::kSuccess);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> animReader::convertAnglesAndWeights3To2(MFnAnimCurve::AnimCurveType type, </div>
<div class="line"> <span class="keywordtype">bool</span> isWeighted, <a name="_a23"></a><a class="code" href="./class_m_angle.html">MAngle</a> &amp;angle, <span class="keywordtype">double</span> &amp;weight)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Converts the tangent angles from Maya 3.0 to Maya2.* formats.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">double</span> oldAngle = angle.<a name="a24"></a><a class="code" href="./class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(MAngle::kRadians);</div>
<div class="line"> <span class="keywordtype">double</span> newAngle = oldAngle;</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Calculate the scale values for the conversion.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordtype">double</span> xScale = 1.0;</div>
<div class="line"> <span class="keywordtype">double</span> yScale = 1.0;</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_time.html">MTime</a> tOne(1.0, MTime::kSeconds);</div>
<div class="line"> <span class="keywordflow">if</span> (type == MFnAnimCurve::kAnimCurveTT ||</div>
<div class="line">        type == MFnAnimCurve::kAnimCurveTL ||</div>
<div class="line">        type == MFnAnimCurve::kAnimCurveTA ||</div>
<div class="line">        type == MFnAnimCurve::kAnimCurveTU) {</div>
<div class="line"></div>
<div class="line">        xScale = tOne.as(<a class="code" href="./class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>());</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (type) {</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTT:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUT:</div>
<div class="line">            yScale = tOne.as(<a class="code" href="./class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>());</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTL:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUL:</div>
<div class="line">            {</div>
<div class="line"> <a name="_a25"></a><a class="code" href="./class_m_distance.html">MDistance</a> dOne(1.0, <a name="a26"></a><a class="code" href="./class_m_distance.html#a2a3077e91bb7ba19bade3cae7e4604a6">MDistance::internalUnit</a>());</div>
<div class="line">                yScale = dOne.as(linearUnit);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTA:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUA:</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> aOne(1.0, <a name="a27"></a><a class="code" href="./class_m_angle.html#aa58fcacd3e0ed41bf20c81c3b9e5ac05">MAngle::internalUnit</a>());</div>
<div class="line">                yScale = aOne.as(angularUnit);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTU:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUU:</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> tanAngle = tan(oldAngle);</div>
<div class="line">    newAngle = atan((xScale*tanAngle)/yScale);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (isWeighted) {</div>
<div class="line"> <span class="keywordtype">double</span> sinAngle = sin(oldAngle);</div>
<div class="line"> <span class="keywordtype">double</span> cosAngle = cos(oldAngle);</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> denominator = (yScale*yScale*sinAngle*sinAngle) +</div>
<div class="line">                                (xScale*xScale*cosAngle*cosAngle);</div>
<div class="line">        weight = sqrtl(weight/denominator);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> finalAngle(newAngle, MAngle::kRadians);</div>
<div class="line">    angle = finalAngle;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> animReader::convertAnglesAndWeights2To3(MFnAnimCurve::AnimCurveType type, </div>
<div class="line"> <span class="keywordtype">bool</span> isWeighted, <a class="code" href="./class_m_angle.html">MAngle</a> &amp;angle, <span class="keywordtype">double</span> &amp;weight)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Converts the tangent angles from Maya 2.* to Maya3.0+ formats.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">double</span> oldAngle = angle.<a class="code" href="./class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(MAngle::kRadians);</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> newAngle = oldAngle;</div>
<div class="line"> <span class="keywordtype">double</span> newWeight = weight;</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Calculate the scale values for the conversion.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordtype">double</span> xScale = 1.0;</div>
<div class="line"> <span class="keywordtype">double</span> yScale = 1.0;</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_time.html">MTime</a> tOne(1.0, MTime::kSeconds);</div>
<div class="line"> <span class="keywordflow">if</span> (type == MFnAnimCurve::kAnimCurveTT ||</div>
<div class="line">        type == MFnAnimCurve::kAnimCurveTL ||</div>
<div class="line">        type == MFnAnimCurve::kAnimCurveTA ||</div>
<div class="line">        type == MFnAnimCurve::kAnimCurveTU) {</div>
<div class="line"></div>
<div class="line">        xScale = tOne.as(<a class="code" href="./class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>());</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (type) {</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTT:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUT:</div>
<div class="line">            yScale = tOne.as(<a class="code" href="./class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>());</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTL:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUL:</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_distance.html">MDistance</a> dOne(1.0, <a class="code" href="./class_m_distance.html#a2a3077e91bb7ba19bade3cae7e4604a6">MDistance::internalUnit</a>());</div>
<div class="line">                yScale = dOne.as(linearUnit);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTA:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUA:</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> aOne(1.0, <a class="code" href="./class_m_angle.html#aa58fcacd3e0ed41bf20c81c3b9e5ac05">MAngle::internalUnit</a>());</div>
<div class="line">                yScale = aOne.as(angularUnit);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTU:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUU:</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">double</span> quarter = M_PI/2;</div>
<div class="line"> <span class="keywordflow">if</span> (isEquivalent(oldAngle, 0.0) ||</div>
<div class="line">        isEquivalent(oldAngle, quarter) ||</div>
<div class="line">        isEquivalent(oldAngle, -quarter)) {</div>
<div class="line"> </div>
<div class="line">        newAngle = oldAngle;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (isWeighted) {</div>
<div class="line">            newWeight = yScale*oldAngle;</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="keywordtype">double</span> tanAngle = tan(oldAngle);</div>
<div class="line">        newAngle = atan((yScale*tanAngle)/xScale);</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> (isWeighted) {</div>
<div class="line"> <span class="keywordtype">double</span> cosAngle = cos(oldAngle);</div>
<div class="line"> <span class="keywordtype">double</span> cosSq = cosAngle*cosAngle;</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> wSq = (weight*weight) * </div>
<div class="line">                    (((xScale*xScale - yScale*yScale)*cosSq) + (yScale*yScale));</div>
<div class="line"></div>
<div class="line">            newWeight = sqrtl(wSq);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    weight = newWeight;</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> finalAngle(newAngle, MAngle::kRadians);</div>
<div class="line">    angle = finalAngle;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> animReader::readAnimCurve(std::ifstream &amp;clipFile, <a class="code" href="./class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> &amp;item)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Read a block of the ifstream that should contain anim curve</span></div>
<div class="line"><span class="comment">//      data in the format determined by the animData keyword.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <a name="_a28"></a><a class="code" href="./class_m_fn_anim_curve.html">MFnAnimCurve</a> animCurve;</div>
<div class="line"> <a name="_a29"></a><a class="code" href="./class_m_object.html">MObject</a> animCurveObj; </div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Anim curve defaults.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    animBase::AnimBaseType input = wordAsInputType(kWordTypeTime);</div>
<div class="line">    animBase::AnimBaseType output = wordAsOutputType(kWordTypeLinear);</div>
<div class="line">    MFnAnimCurve::InfinityType preInf = wordAsInfinityType(kWordConstant);</div>
<div class="line">    MFnAnimCurve::InfinityType postInf = wordAsInfinityType(kWordConstant);</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> inputUnitName;</div>
<div class="line">    animUnitNames::setToShortName(timeUnit, inputUnitName);</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> outputUnitName;</div>
<div class="line">    MAngle::Unit tanAngleUnit = angularUnit;</div>
<div class="line"> <span class="keywordtype">bool</span> isWeighted (<span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">char</span> *dataType;</div>
<div class="line"> <span class="keywordflow">while</span> (!clipFile.eof()) {</div>
<div class="line">        advance(clipFile);</div>
<div class="line"></div>
<div class="line">        dataType = asWord(clipFile);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (strcmp(dataType, kInputString) == 0) {</div>
<div class="line">            input = wordAsInputType(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kOutputString) == 0) {</div>
<div class="line">            output = wordAsOutputType(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kWeightedString) == 0) {</div>
<div class="line">            isWeighted = (asDouble(clipFile) == 1.0);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kPreInfinityString) == 0) {</div>
<div class="line">            preInf = wordAsInfinityType(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kPostInfinityString) == 0) {</div>
<div class="line">            postInf = wordAsInfinityType(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kInputUnitString) == 0) {</div>
<div class="line">            inputUnitName.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kOutputUnitString) == 0) {</div>
<div class="line">            outputUnitName.<a class="code" href="./class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kTanAngleUnitString) == 0) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> tUnit(asWord(clipFile));</div>
<div class="line"> <span class="keywordflow">if</span> (!animUnitNames::setFromName(tUnit, tanAngleUnit)) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line">                tanAngleUnit = angularUnit;</div>
<div class="line">                animUnitNames::setToShortName(tanAngleUnit, unitName);</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingTanAngleUnit, stat);</div>
<div class="line">                msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, unitName);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kKeysString) == 0) {</div>
<div class="line"> <span class="comment">//  Ignore the rest of this line.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">            clipFile.ignore(INT_MAX, kNewLineChar);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, <span class="stringliteral">"{"</span>) == 0) {</div>
<div class="line"> <span class="comment">//  Skippping the '{' character. Just ignore it.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  An unrecogized keyword was found.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> warnStr(dataType);</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kUnknownKeyword,</div>
<div class="line">                                                        stat);</div>
<div class="line">            msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, warnStr);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Read the animCurve</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> status;</div>
<div class="line">    MFnAnimCurve::AnimCurveType type = typeAsAnimCurveType(input, output);</div>
<div class="line">    animCurveObj = animCurve.<a name="a30"></a><a class="code" href="./class_m_fn_anim_curve.html#ac6f5d067bd54ad9dc9f51badf0d632bf">create</a>(type, NULL, &amp;status);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (status != MS::kSuccess) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotCreateAnim, status);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    animCurve.<a name="a31"></a><a class="code" href="./class_m_fn_anim_curve.html#ac61b1bb1724f20367a6cb9b6abbe6320">setIsWeighted</a>(isWeighted);</div>
<div class="line">    animCurve.<a name="a32"></a><a class="code" href="./class_m_fn_anim_curve.html#a5a02fb53240bf78c80738bc4233d4efb">setPreInfinityType</a>(preInf);</div>
<div class="line">    animCurve.<a name="a33"></a><a class="code" href="./class_m_fn_anim_curve.html#a76d9f8b9583719aba9caf509296757c2">setPostInfinityType</a>(postInf);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Set the appropriate units.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    MTime::Unit inputTimeUnit = MTime::kInvalid;</div>
<div class="line"> <span class="keywordflow">if</span> (input == kAnimBaseTime) {</div>
<div class="line"> <span class="keywordflow">if</span> (!animUnitNames::setFromName(inputUnitName, inputTimeUnit)) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line">            inputTimeUnit = timeUnit;</div>
<div class="line">            animUnitNames::setToShortName(inputTimeUnit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                        stat);</div>
<div class="line">            msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kInputUnitString, unitName);</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    MTime::Unit outputTimeUnit = MTime::kInvalid;</div>
<div class="line"> <span class="keywordflow">if</span> (output == kAnimBaseTime) {</div>
<div class="line"> <span class="keywordflow">if</span> (!animUnitNames::setFromName(outputUnitName, outputTimeUnit)) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line">            outputTimeUnit = timeUnit;</div>
<div class="line">            animUnitNames::setToShortName(outputTimeUnit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                        stat);</div>
<div class="line">            msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kOutputUnitString, unitName);</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">int</span> index = 0;</div>
<div class="line"> <span class="keywordtype">double</span> conversion = 1.0;</div>
<div class="line"> <span class="keywordflow">if</span> (output == kAnimBaseLinear) {</div>
<div class="line">        MDistance::Unit unit;</div>
<div class="line"> <span class="keywordflow">if</span> (outputUnitName.<a name="a34"></a><a class="code" href="./class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != 0) {</div>
<div class="line"> <span class="keywordflow">if</span> (!animUnitNames::setFromName(outputUnitName, unit)) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line">                unit = linearUnit;</div>
<div class="line">                animUnitNames::setToShortName(unit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kOutputUnitString, unitName);</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            unit = linearUnit;</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">if</span> (unit != MDistance::kCentimeters) {</div>
<div class="line"> <a class="code" href="./class_m_distance.html">MDistance</a> one(1.0, unit);</div>
<div class="line">            conversion = one.as(MDistance::kCentimeters);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (output == kAnimBaseAngular) {</div>
<div class="line">        MAngle::Unit unit;</div>
<div class="line"> <span class="keywordflow">if</span> (outputUnitName.<a class="code" href="./class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != 0) {</div>
<div class="line"> <span class="keywordflow">if</span> (!animUnitNames::setFromName(outputUnitName, unit)) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line">                unit = angularUnit;</div>
<div class="line">                animUnitNames::setToShortName(unit, unitName);</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg; </div>
<div class="line"> <span class="comment">// Use format to place variable string into message</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msgFmt = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kOutputUnitString, unitName);</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            unit = angularUnit;</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">if</span> (unit != MAngle::kRadians) {</div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> one(1.0, unit);</div>
<div class="line">            conversion = one.as(MAngle::kRadians);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Now read each keyframe</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    advance(clipFile);</div>
<div class="line"> <span class="keywordtype">char</span> c = clipFile.peek();</div>
<div class="line"> <span class="keywordflow">while</span> (clipFile &amp;&amp; c != kBraceRightChar) {</div>
<div class="line"> <span class="keywordtype">double</span> t = asDouble (clipFile);</div>
<div class="line"> <span class="keywordtype">double</span> val = asDouble (clipFile);</div>
<div class="line"></div>
<div class="line">        MFnAnimCurve::TangentType tanIn = wordAsTangentType(asWord(clipFile));</div>
<div class="line">        MFnAnimCurve::TangentType tanOut = wordAsTangentType(asWord(clipFile));</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (type) {</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTT:</div>
<div class="line">                index = animCurve.<a name="a35"></a><a class="code" href="./class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>(   <a class="code" href="./class_m_time.html">MTime</a>(val, inputTimeUnit),</div>
<div class="line"> <a class="code" href="./class_m_time.html">MTime</a>(val, outputTimeUnit),</div>
<div class="line">                                            tanIn, tanOut, NULL, &amp;status);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTL:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTA:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTU:</div>
<div class="line">                index = animCurve.<a class="code" href="./class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>(   <a class="code" href="./class_m_time.html">MTime</a>(t, inputTimeUnit),</div>
<div class="line">                                            val*conversion, tanIn, tanOut,</div>
<div class="line">                                            NULL, &amp;status);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUL:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUA:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUU:</div>
<div class="line">                index = animCurve.<a class="code" href="./class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>(   t, val*conversion, </div>
<div class="line">                                            tanIn, tanOut,</div>
<div class="line">                                            NULL, &amp;status);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUT:</div>
<div class="line">                index = animCurve.<a class="code" href="./class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>(   t, <a class="code" href="./class_m_time.html">MTime</a>(val, outputTimeUnit),</div>
<div class="line">                                            tanIn, tanOut,</div>
<div class="line">                                            NULL, &amp;status);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kUnknownNode, status);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (status != MS::kSuccess) {</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stringStat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotKey, stringStat);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Tangent locking needs to be called after the weights and </span></div>
<div class="line"> <span class="comment">//  angles are set for the fixed tangents.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordtype">bool</span> tLocked = bool(asDouble(clipFile) == 1.0);</div>
<div class="line"> <span class="keywordtype">bool</span> swLocked = bool(asDouble(clipFile) == 1.0);</div>
<div class="line"> <span class="keywordtype">bool</span> isBreakdown (<span class="keyword">false</span>);</div>
<div class="line"> <span class="keywordflow">if</span> (animVersion &gt;= kVersionNonWeightedAndBreakdowns) {</div>
<div class="line">            isBreakdown = (asDouble(clipFile) == 1.0);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Only fixed tangents need additional information.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (tanIn == MFnAnimCurve::kTangentFixed) {</div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> inAngle(asDouble(clipFile), tanAngleUnit);</div>
<div class="line"> <span class="keywordtype">double</span> inWeight = asDouble(clipFile);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  If this is from a pre-Maya3.0 file, the tangent angles will </span></div>
<div class="line"> <span class="comment">//  need to be converted.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (convertAnglesFromV2To3) {</div>
<div class="line">                convertAnglesAndWeights2To3(type,isWeighted,inAngle,inWeight);</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (convertAnglesFromV3To2) {</div>
<div class="line">                convertAnglesAndWeights3To2(type,isWeighted,inAngle,inWeight);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  By default, the tangents are locked. When the tangents</span></div>
<div class="line"> <span class="comment">//  are locked, setting the angle and weight of a fixed in</span></div>
<div class="line"> <span class="comment">//  tangent may change the tangent type of the out tangent.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">            animCurve.<a name="a36"></a><a class="code" href="./class_m_fn_anim_curve.html#a2044ea503203161a35bc2a07afe663fb">setTangentsLocked</a>(index, <span class="keyword">false</span>);</div>
<div class="line">            animCurve.<a name="a37"></a><a class="code" href="./class_m_fn_anim_curve.html#a7832d85597922310b7e82ec60b74569a">setTangent</a>(index, inAngle, inWeight, <span class="keyword">true</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Only fixed tangents need additional information.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (tanOut == MFnAnimCurve::kTangentFixed) {</div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> outAngle(asDouble(clipFile), tanAngleUnit);</div>
<div class="line"> <span class="keywordtype">double</span> outWeight = asDouble(clipFile);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  If this is from a pre-Maya3.0 file, the tangent angles will </span></div>
<div class="line"> <span class="comment">//  need to be converted.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (convertAnglesFromV2To3) {</div>
<div class="line">                convertAnglesAndWeights2To3(type,isWeighted,outAngle,outWeight);</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (convertAnglesFromV3To2) {</div>
<div class="line">                convertAnglesAndWeights3To2(type,isWeighted,outAngle,outWeight);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//  By default, the tangents are locked. When the tangents</span></div>
<div class="line"> <span class="comment">//  are locked, setting the angle and weight of a fixed out </span></div>
<div class="line"> <span class="comment">//  tangent may change the tangent type of the in tangent.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">            animCurve.<a class="code" href="./class_m_fn_anim_curve.html#a2044ea503203161a35bc2a07afe663fb">setTangentsLocked</a>(index, <span class="keyword">false</span>);</div>
<div class="line">            animCurve.<a class="code" href="./class_m_fn_anim_curve.html#a7832d85597922310b7e82ec60b74569a">setTangent</a>(index, outAngle, outWeight, <span class="keyword">false</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  To prevent tangent types from unexpectedly changing, tangent </span></div>
<div class="line"> <span class="comment">//  locking should be the last operation. See the above comments</span></div>
<div class="line"> <span class="comment">//  about fixed tangent types for more information.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">        animCurve.<a name="a38"></a><a class="code" href="./class_m_fn_anim_curve.html#ab0b50ef1323a8aa9086d2546a625feca">setWeightsLocked</a>(index, swLocked);</div>
<div class="line">        animCurve.<a class="code" href="./class_m_fn_anim_curve.html#a2044ea503203161a35bc2a07afe663fb">setTangentsLocked</a>(index, tLocked);</div>
<div class="line">        animCurve.<a name="a39"></a><a class="code" href="./class_m_fn_anim_curve.html#a2928619982a83d88dee1bb0b2e9fb316">setIsBreakdown</a> (index, isBreakdown);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  There should be no additional data on this line. Go to the</span></div>
<div class="line"> <span class="comment">//  next line of data.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">        clipFile.ignore(INT_MAX, kNewLineChar);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Skip any comments.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">        advance(clipFile);</div>
<div class="line">        c = clipFile.peek();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Ignore the brace that marks the end of the keys block.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (c == kBraceRightChar) {</div>
<div class="line">        clipFile.ignore(INT_MAX, kNewLineChar);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Ignore the brace that marks the end of the animData block.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    advance(clipFile);</div>
<div class="line"> <span class="keywordflow">if</span> (clipFile.peek() == kBraceRightChar) {</div>
<div class="line">        clipFile.ignore(INT_MAX, kNewLineChar);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  Something is wrong.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stringStat;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kMissingBrace, stringStat);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Do not set the clipboard with an empty clipboard item.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (!animCurveObj.<a name="a40"></a><a class="code" href="./class_m_object.html#ac02f2a4d7312eb91f40980adfd4e31b2">isNull</a>()) {</div>
<div class="line">        item.<a name="a41"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html#a7dceeb98eeaff79e7d1606e6ed8b1efd">setAnimCurve</a>(animCurveObj);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Delete the copy of the anim curve.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <a name="a42"></a><a class="code" href="./class_m_global.html#a3d83d29ca400045849d777aecafda70c">MGlobal::deleteNode</a>(animCurveObj);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  Class animWriter</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line">animWriter::animWriter()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class constructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">animWriter::~animWriter()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class destructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="./class_m_status.html">MStatus</a> </div>
<div class="line">animWriter::writeClipboard(std::ofstream&amp; animFile,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_anim_curve_clipboard.html">MAnimCurveClipboard</a> &amp;cb, </div>
<div class="line"> <span class="keywordtype">bool</span> nodeNames <span class="comment">/* false */</span>,</div>
<div class="line"> <span class="keywordtype">bool</span> verboseUnits <span class="comment">/* false */</span>)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Write the contents of the clipboard to the ofstream.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> status = MS::kFailure;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Check to see if there is anything on the clipboard at all</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (cb.<a name="a43"></a><a class="code" href="./class_m_anim_curve_clipboard.html#a8174b25717a6f860d40f2ca259442df5">isEmpty</a>()) {</div>
<div class="line"> <span class="keywordflow">return</span> status;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    resetUnits();</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Write out the clipboard information</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (!writeHeader(animFile)) {</div>
<div class="line"> <span class="keywordflow">return</span> (MS::kFailure);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Now write out each animCurve</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_anim_curve_clipboard_item_array.html">MAnimCurveClipboardItemArray</a>  &amp;clipboardArray = </div>
<div class="line">                                            cb.<a name="a44"></a><a class="code" href="./class_m_anim_curve_clipboard.html#a1da733f06135a2cab5f3cc2c7c08f570">clipboardItems</a>(&amp;status);</div>
<div class="line"> <span class="keywordflow">if</span> (MS::kSuccess != status) {</div>
<div class="line"> <span class="keywordflow">return</span> status;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; clipboardArray.<a name="a45"></a><a class="code" href="./class_m_anim_curve_clipboard_item_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++) {</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> &amp;clipboardItem = clipboardArray[i];</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> statusInLoop = MS::kSuccess;</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_object.html">MObject</a> animCurveObj = clipboardItem.<a name="a46"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html#a011adb3ceeca89e8723f4c7c79990514">animCurve</a>(&amp;statusInLoop);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  The clipboard may contain Null anim curves. If a Null anim </span></div>
<div class="line"> <span class="comment">//  curve is returned, it is safe to ignore the error message</span></div>
<div class="line"> <span class="comment">//  and continue to the next anim curve in the list.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordtype">bool</span> placeHolder = <span class="keyword">false</span>;</div>
<div class="line"> <span class="keywordflow">if</span> (MS::kSuccess != statusInLoop || animCurveObj.<a class="code" href="./class_m_object.html#ac02f2a4d7312eb91f40980adfd4e31b2">isNull</a>()) {</div>
<div class="line">                placeHolder = <span class="keyword">true</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Write out animCurve information</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (!writeAnim(animFile, clipboardItem, placeHolder, nodeNames)) {</div>
<div class="line"> <span class="keywordflow">return</span> (MS::kFailure);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (placeHolder) {</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  Write out each curve in its specified format.</span></div>
<div class="line"> <span class="comment">//  For now, only the anim curve format.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (!writeAnimCurve(animFile, &amp;animCurveObj, </div>
<div class="line">                                clipboardItem.<a name="a47"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html#acd1e166bac2d7cfd822656fcb11d7110">animCurveType</a>(),</div>
<div class="line">                                verboseUnits)) {</div>
<div class="line"> <span class="keywordflow">return</span> (MS::kFailure);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> (MS::kSuccess);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> animWriter::writeHeader(std::ofstream&amp; clip)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Writes the header for the file. The header contains the clipboard</span></div>
<div class="line"><span class="comment">//      specific data. </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (!clip) {</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kAnimVersion &lt;&lt; kSpaceChar &lt;&lt; kAnimVersionString &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">    clip &lt;&lt; kMayaVersion &lt;&lt; kSpaceChar &lt;&lt; <a class="code" href="./class_m_global.html#af83edfe4df143d2796325c6a21b07224">MGlobal::mayaVersion</a>() &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line"> <span class="keyword">static</span> <a class="code" href="./class_m_anim_curve_clipboard.html">MAnimCurveClipboard</a> &amp;clipboard = </div>
<div class="line"> <a name="a48"></a><a class="code" href="./class_m_anim_curve_clipboard.html#af34c0cc340b8211738e45087a7d17672">MAnimCurveClipboard::theAPIClipboard</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> startTime = clipboard.<a name="a49"></a><a class="code" href="./class_m_anim_curve_clipboard.html#a0c219d38580479d27e25858b7e0a7a93">startTime</a>().<a name="a50"></a><a class="code" href="./class_m_time.html#a105d41236561f4d4be6383ced757a429">as</a>(timeUnit);</div>
<div class="line"> <span class="keywordtype">double</span> endTime = clipboard.<a name="a51"></a><a class="code" href="./class_m_anim_curve_clipboard.html#a50ed55f78ebcd59a272b1a44a2d20aa5">endTime</a>().<a class="code" href="./class_m_time.html#a105d41236561f4d4be6383ced757a429">as</a>(timeUnit);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (startTime != endTime) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unit;</div>
<div class="line">    animUnitNames::setToShortName(timeUnit, unit);</div>
<div class="line">    clip &lt;&lt; kTimeUnit &lt;&lt; kSpaceChar &lt;&lt; unit &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">    animUnitNames::setToShortName(linearUnit, unit);</div>
<div class="line">    clip &lt;&lt; kLinearUnit &lt;&lt; kSpaceChar &lt;&lt; unit &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">    animUnitNames::setToShortName(angularUnit, unit);</div>
<div class="line">    clip &lt;&lt; kAngularUnit &lt;&lt; kSpaceChar &lt;&lt; unit &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">            clip &lt;&lt; kStartTime &lt;&lt; kSpaceChar &lt;&lt; startTime &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">            clip &lt;&lt; kEndTime &lt;&lt; kSpaceChar &lt;&lt; endTime &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">float</span> startUnitless = clipboard.<a name="a52"></a><a class="code" href="./class_m_anim_curve_clipboard.html#a840e4e411b88d13cfbe597cd95af3462">startUnitlessInput</a>();</div>
<div class="line"> <span class="keywordtype">float</span> endUnitless = clipboard.<a name="a53"></a><a class="code" href="./class_m_anim_curve_clipboard.html#a4e7fb342d0cb61bf74a1e96bb6f5b350">endUnitlessInput</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (startUnitless != endUnitless) {</div>
<div class="line">            clip &lt;&lt; kStartUnitless &lt;&lt; kSpaceChar &lt;&lt; startUnitless &lt;&lt; </div>
<div class="line">                    kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">            clip &lt;&lt; kEndUnitless &lt;&lt; kSpaceChar &lt;&lt; endUnitless &lt;&lt; </div>
<div class="line">                    kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> animWriter::writeAnim(std::ofstream &amp;clip,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> &amp;clipboardItem,</div>
<div class="line"> <span class="keywordtype">bool</span> placeHolder <span class="comment">/* false */</span>,</div>
<div class="line"> <span class="keywordtype">bool</span> nodeNames <span class="comment">/* false */</span>)</div>
<div class="line"><span class="comment">//  </span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Write out the anim curve from the clipboard item into the </span></div>
<div class="line"><span class="comment">//      ofstream. The position of the anim curve in the clipboard</span></div>
<div class="line"><span class="comment">//      and the attribute to which it is attached is written out in this</span></div>
<div class="line"><span class="comment">//      method.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      This method returns true if the write was successful.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (!clip) {</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kAnim;</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  If this is a clipboard place holder then there will be no full</span></div>
<div class="line"> <span class="comment">//  or leaf attribute names.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordflow">if</span> (placeHolder) {</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; clipboardItem.<a name="a54"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html#a85027d1b009e3bb3e50f080bbaaf10e2">nodeName</a>().<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; clipboardItem.<a name="a55"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html#a6f47917e66ecaf181087bd514c23388c">fullAttributeName</a>().<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (nodeNames) {</div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; clipboardItem.<a name="a56"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html#adbc4fce3278697f47ff328b6497833df">leafAttributeName</a>().<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; clipboardItem.<a class="code" href="./class_m_anim_curve_clipboard_item.html#a85027d1b009e3bb3e50f080bbaaf10e2">nodeName</a>().<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rowCount, childCount, attrCount;</div>
<div class="line">    clipboardItem.<a name="a57"></a><a class="code" href="./class_m_anim_curve_clipboard_item.html#afe9f5bf8b944abfa62b0e8c0bdb734cc">getAddressingInfo</a>(rowCount, childCount, attrCount);</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kSpaceChar &lt;&lt; rowCount;</div>
<div class="line">    clip &lt;&lt; kSpaceChar &lt;&lt; childCount;</div>
<div class="line">    clip &lt;&lt; kSpaceChar &lt;&lt; attrCount;</div>
<div class="line">    clip &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> animWriter::writeAnimCurve(std::ofstream &amp;clip,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_object.html">MObject</a> *animCurveObj,</div>
<div class="line">                                MFnAnimCurve::AnimCurveType type,</div>
<div class="line"> <span class="keywordtype">bool</span> verboseUnits <span class="comment">/* false */</span>)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Write out the anim curve from the clipboard item into the</span></div>
<div class="line"><span class="comment">//      ofstream. The actual anim curve data is written out.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      This method returns true if the write was successful.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (NULL == animCurveObj || animCurveObj-&gt;<a class="code" href="./class_m_object.html#ac02f2a4d7312eb91f40980adfd4e31b2">isNull</a>() || !clip) {</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> status = MS::kSuccess;</div>
<div class="line"> <a class="code" href="./class_m_fn_anim_curve.html">MFnAnimCurve</a> animCurve(*animCurveObj, &amp;status);</div>
<div class="line"> <span class="keywordflow">if</span> (MS::kSuccess != status) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <a class="code" href="./class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotExport, status);</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kAnimData &lt;&lt; kSpaceChar &lt;&lt; kBraceLeftChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kTwoSpace &lt;&lt; kInputString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            boolInputTypeAsWord(animCurve.<a name="a58"></a><a class="code" href="./class_m_fn_anim_curve.html#a9c12542ca640c682074bb8db022f9eb0">isUnitlessInput</a>()) &lt;&lt; </div>
<div class="line">            kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kTwoSpace &lt;&lt; kOutputString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            outputTypeAsWord(type) &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kTwoSpace &lt;&lt; kWeightedString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            (animCurve.<a name="a59"></a><a class="code" href="./class_m_fn_anim_curve.html#a39ee5f89bd48376bc77a278169d4e158">isWeighted</a>() ? 1 : 0) &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line"> <span class="comment">//  These units default to the units in the header of the file.</span></div>
<div class="line"> <span class="comment">//  </span></div>
<div class="line"> <span class="keywordflow">if</span> (verboseUnits) {</div>
<div class="line">        clip &lt;&lt; kTwoSpace &lt;&lt; kInputUnitString &lt;&lt; kSpaceChar;</div>
<div class="line"> <span class="keywordflow">if</span> (animCurve.<a name="a60"></a><a class="code" href="./class_m_fn_anim_curve.html#af94edf40f82e9b48f334506415933394">isTimeInput</a>()) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line">            animUnitNames::setToShortName(timeUnit, unitName);</div>
<div class="line">            clip &lt;&lt; unitName;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line"> <span class="comment">//  The anim curve has unitless input.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">            clip &lt;&lt; kUnitlessString;</div>
<div class="line">        }</div>
<div class="line">        clip &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line">        clip &lt;&lt; kTwoSpace &lt;&lt; kOutputUnitString &lt;&lt; kSpaceChar;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> conversion = 1.0;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unitName;</div>
<div class="line"> <span class="keywordflow">switch</span> (type) {</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTA:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUA:</div>
<div class="line">            animUnitNames::setToShortName(angularUnit, unitName);</div>
<div class="line"> <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; unitName;</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> angle(1.0);</div>
<div class="line">                conversion = angle.<a class="code" href="./class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(angularUnit);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTL:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUL:</div>
<div class="line">            animUnitNames::setToShortName(linearUnit, unitName);</div>
<div class="line"> <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; unitName;</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_distance.html">MDistance</a> distance(1.0);</div>
<div class="line">                conversion = distance.as(linearUnit);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveTT:</div>
<div class="line"> <span class="keywordflow">case</span> MFnAnimCurve::kAnimCurveUT:</div>
<div class="line">            animUnitNames::setToShortName(timeUnit, unitName);</div>
<div class="line"> <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; unitName;</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; kUnitlessString;</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (verboseUnits) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> angleUnitName;</div>
<div class="line">        animUnitNames::setToShortName(angularUnit, angleUnitName);</div>
<div class="line">        clip &lt;&lt; kTwoSpace &lt;&lt; kTanAngleUnitString &lt;&lt; </div>
<div class="line">                kSpaceChar &lt;&lt; angleUnitName &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kTwoSpace &lt;&lt; kPreInfinityString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            infinityTypeAsWord(animCurve.<a name="a61"></a><a class="code" href="./class_m_fn_anim_curve.html#a88b8b1c452c4d2d1c5714d2599e485a4">preInfinityType</a>()) &lt;&lt; </div>
<div class="line">            kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kTwoSpace &lt;&lt; kPostInfinityString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            infinityTypeAsWord(animCurve.<a name="a62"></a><a class="code" href="./class_m_fn_anim_curve.html#ad107bf0173bf1f8018b414dbae7bc06f">postInfinityType</a>()) &lt;&lt; </div>
<div class="line">            kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kTwoSpace &lt;&lt; kKeysString &lt;&lt; kSpaceChar &lt;&lt; kBraceLeftChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// And then write out each keyframe</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordtype">unsigned</span> numKeys = animCurve.<a name="a63"></a><a class="code" href="./class_m_fn_anim_curve.html#a5d0bf2353d16d4c50a6825b8067cdf38">numKeyframes</a>();</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numKeys; i++) {</div>
<div class="line">        clip &lt;&lt; kTwoSpace &lt;&lt; kTwoSpace;</div>
<div class="line"> <span class="keywordflow">if</span> (animCurve.<a class="code" href="./class_m_fn_anim_curve.html#a9c12542ca640c682074bb8db022f9eb0">isUnitlessInput</a>()) {</div>
<div class="line">            clip &lt;&lt; animCurve.<a name="a64"></a><a class="code" href="./class_m_fn_anim_curve.html#a509a5e48fcff509378d856494ca58f1b">unitlessInput</a>(i);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">else</span> {</div>
<div class="line">            clip &lt;&lt; animCurve.<a name="a65"></a><a class="code" href="./class_m_fn_anim_curve.html#a65183908b74de022172ba65dbcc57a4c">time</a>(i).<a name="a66"></a><a class="code" href="./class_m_time.html#a324b14b7506c6e4f47912161956974ed">value</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// clamp tiny values so that it isn't so small it can't be read in</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="keywordtype">double</span> animValue = (conversion*animCurve.<a name="a67"></a><a class="code" href="./class_m_fn_anim_curve.html#a97dd3da7fd2ad2e846278ac58cac033a">value</a>(i));</div>
<div class="line"> <span class="keywordflow">if</span> (animBase::isEquivalent(animValue,0.0)) animValue = 0.0;</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; animValue;</div>
<div class="line"></div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; tangentTypeAsWord(animCurve.<a name="a68"></a><a class="code" href="./class_m_fn_anim_curve.html#aee5bcfb44261590c1fbd193fd8a9e272">inTangentType</a>(i));</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; tangentTypeAsWord(animCurve.<a name="a69"></a><a class="code" href="./class_m_fn_anim_curve.html#a7f396a0646a6a8ec95fcf6fa39d666fa">outTangentType</a>(i));</div>
<div class="line"></div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; (animCurve.<a name="a70"></a><a class="code" href="./class_m_fn_anim_curve.html#a70c26b7e4508da8f9e4327988c8a4a52">tangentsLocked</a>(i) ? 1 : 0);</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; (animCurve.<a name="a71"></a><a class="code" href="./class_m_fn_anim_curve.html#a9687680a0340102d75027852143519a8">weightsLocked</a>(i) ? 1 : 0);</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; (animCurve.<a name="a72"></a><a class="code" href="./class_m_fn_anim_curve.html#a2f206aa604bae4b561529bb42abe3152">isBreakdown</a>(i) ? 1 : 0);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (animCurve.<a class="code" href="./class_m_fn_anim_curve.html#aee5bcfb44261590c1fbd193fd8a9e272">inTangentType</a>(i) == MFnAnimCurve::kTangentFixed) {</div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> angle;</div>
<div class="line"> <span class="keywordtype">double</span> weight;</div>
<div class="line">            animCurve.<a name="a73"></a><a class="code" href="./class_m_fn_anim_curve.html#a72b4a68c26b0902e7be1e860611bfac2">getTangent</a>(i, angle, weight, <span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; angle.<a class="code" href="./class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(angularUnit);</div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; weight;</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">if</span> (animCurve.<a class="code" href="./class_m_fn_anim_curve.html#a7f396a0646a6a8ec95fcf6fa39d666fa">outTangentType</a>(i) == MFnAnimCurve::kTangentFixed) {</div>
<div class="line"> <a class="code" href="./class_m_angle.html">MAngle</a> angle;</div>
<div class="line"> <span class="keywordtype">double</span> weight;</div>
<div class="line">            animCurve.<a class="code" href="./class_m_fn_anim_curve.html#a72b4a68c26b0902e7be1e860611bfac2">getTangent</a>(i, angle, weight, <span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; angle.<a class="code" href="./class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(angularUnit);</div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; weight;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        clip &lt;&lt; kSemiColonChar &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">    clip &lt;&lt; kTwoSpace &lt;&lt; kBraceRightChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kBraceRightChar &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div class="footer-block"><a class="comments-anchor" href="../html/ac.cmtdialog.htm" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div></div>
</div></body>
</html>
