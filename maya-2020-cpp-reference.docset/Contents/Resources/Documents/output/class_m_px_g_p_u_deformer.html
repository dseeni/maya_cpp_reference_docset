<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
<head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
<title>C++ API Reference: MPxGPUDeformer Class Reference</title>
</head>
<body height="100%"><div class="body_content" id="body-content"><link href="cpp_ref/navtree.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/doxygen.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/tabs.css" rel="stylesheet" type="text/css"/><link href="style/adsk.cpm.css" rel="stylesheet" type="text/css"/><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('class_m_px_g_p_u_deformer.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script>
<div>
<div class="head">
<h1>C++ API Reference: MPxGPUDeformer Class Reference</h1>
</div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<div class="tabs" id="navrow1">
<ul class="tablist">
<li><a href="./index.html"><span>Main Page</span></a></li>
<li><a href="./pages.html"><span>Related Pages</span></a></li>
<li><a href="./modules.html"><span>Modules</span></a></li>
<li><a href="./namespaces.html"><span>Namespaces</span></a></li>
<li class="current"><a href="./annotated.html"><span>Classes</span></a></li>
<li><a href="./examples.html"><span>Examples</span></a></li>
<li>
<div class="MSearchBoxInactive" id="MSearchBox">
<span class="left">
<img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="cpp_ref/search/mag_sel.png"/>
<input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
</span><span class="right">
<a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="cpp_ref/search/close.png"/></a>
</span>
</div>
</li>
</ul>
</div>
<div class="tabs2" id="navrow2">
<ul class="tablist">
<li><a href="./annotated.html"><span>Class List</span></a></li>
<li><a href="./classes.html"><span>Class Index</span></a></li>
<li><a href="./hierarchy.html"><span>Class Hierarchy</span></a></li>
<li><a href="./functions.html"><span>Class Members</span></a></li>
</ul>
</div>
</div><!-- top -->
<div class="ui-resizable side-nav-resizable" id="side-nav">
<div id="nav-tree">
<div id="nav-tree-contents">
<div class="sync" id="nav-sync"></div>
</div>
</div>
<div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;">
</div>
</div>
<div id="doc-content">
<!-- window showing the filter options -->
<!-- iframe showing the search results (closed by default) -->
<div class="header">
<div class="headertitle">
<div class="title">MPxGPUDeformer Class Reference<div class="ingroups"><a class="el" href="./group___open_maya_anim.html">OpenMayaAnim - API module for animation</a> | <a class="el" href="./group___m_px.html">Proxy classes</a></div></div> </div>
<div id="OverviewLinksDiv"><div class="dynheader closed" id="dynsection-overview" onclick="return toggleVisibility(this)" style="cursor:pointer;"><img alt="+" id="dynsection-overview-trigger" src="cpp_ref/closed.png"/> Related help topics: </div><div class="dyncontent" id="dynsection-overview-content" style="display:none;"><ul class="overviewLinks">
<li class="overviewLink"><a href="#!/url=./dev_help/What-s-New-What-s-Changed-/What-s-New-in-Maya-API-in-2018/What-s-New-in-the-Animation-API.html">What's New / What's Changed? &gt; What-s-New-in-Maya-API-in-2018 &gt; What's New in the Animation API</a></li>
</ul></div></div>
<div class="summary">
<a href="class_m_px_g_p_u_deformer.html#pub-methods">Public Member Functions</a> |
<a href="class_m_px_g_p_u_deformer.html#pub-static-methods">Static Public Member Functions</a> |
<a href="./class_m_px_g_p_u_deformer-members.html">List of all members</a> </div></div><!--header-->
<div class="contents">
<p>Base class for user defined GPU deformer override evaluators.  
 <a href="./class_m_px_g_p_u_deformer.html#details">More...</a></p>
<p><code>#include &lt;MPxGPUDeformer.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a47653e33ffb317701f79ea90d860d4c3"><td align="right" class="memItemLeft" valign="top"><a class="anchor" id="a47653e33ffb317701f79ea90d860d4c3"></a>
 </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#a47653e33ffb317701f79ea90d860d4c3">MPxGPUDeformer</a> ()</td></tr>
<tr class="memdesc:a47653e33ffb317701f79ea90d860d4c3"><td class="mdescLeft"> </td><td class="mdescRight">Constructs an <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a>. <br/></td></tr>
<tr class="separator:a47653e33ffb317701f79ea90d860d4c3"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a0cc8b4a4be9364b5c2c17806eea85f63"><td align="right" class="memItemLeft" valign="top"><a class="anchor" id="a0cc8b4a4be9364b5c2c17806eea85f63"></a>
virtual </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#a0cc8b4a4be9364b5c2c17806eea85f63">~MPxGPUDeformer</a> ()</td></tr>
<tr class="memdesc:a0cc8b4a4be9364b5c2c17806eea85f63"><td class="mdescLeft"> </td><td class="mdescRight">Destructor. <br/></td></tr>
<tr class="separator:a0cc8b4a4be9364b5c2c17806eea85f63"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a070259639bc552fd702c9e8e042f0331"><td align="right" class="memItemLeft" valign="top">virtual DeformerStatus </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331">evaluate</a> (<a class="el" href="./class_m_data_block.html">MDataBlock</a> &amp;block, const <a class="el" href="./class_m_evaluation_node.html">MEvaluationNode</a> &amp;evaluationNode, const <a class="el" href="./class_m_plug.html">MPlug</a> &amp;outputPlug, unsigned int numElements, const <a class="el" href="./class_m_auto_c_l_mem.html">MAutoCLMem</a>, const <a class="el" href="./class_m_auto_c_l_event.html">MAutoCLEvent</a>, <a class="el" href="./class_m_auto_c_l_mem.html">MAutoCLMem</a>, <a class="el" href="./class_m_auto_c_l_event.html">MAutoCLEvent</a> &amp;)</td></tr>
<tr class="memdesc:a070259639bc552fd702c9e8e042f0331"><td class="mdescLeft"> </td><td class="mdescRight">This method is deprecated and should no longer be used.  <a href="class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331">More...</a><br/></td></tr>
<tr class="separator:a070259639bc552fd702c9e8e042f0331"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a2192a4db310682f257be5779b741ab56"><td align="right" class="memItemLeft" valign="top">virtual DeformerStatus </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#a2192a4db310682f257be5779b741ab56">evaluate</a> (<a class="el" href="./class_m_data_block.html">MDataBlock</a> &amp;block, const <a class="el" href="./class_m_evaluation_node.html">MEvaluationNode</a> &amp;evaluationNode, const <a class="el" href="./class_m_plug.html">MPlug</a> &amp;outputPlug, const <a class="el" href="./class_m_g_p_u_deformer_data.html">MGPUDeformerData</a> &amp;inputData, <a class="el" href="./class_m_g_p_u_deformer_data.html">MGPUDeformerData</a> &amp;outputData)</td></tr>
<tr class="memdesc:a2192a4db310682f257be5779b741ab56"><td class="mdescLeft"> </td><td class="mdescRight"><a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> is called each time the deformation chain is evaluated.  <a href="class_m_px_g_p_u_deformer.html#a2192a4db310682f257be5779b741ab56">More...</a><br/></td></tr>
<tr class="separator:a2192a4db310682f257be5779b741ab56"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a74a45d2648335936561898c390281a6a"><td align="right" class="memItemLeft" valign="top">virtual void </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#a74a45d2648335936561898c390281a6a">terminate</a> ()</td></tr>
<tr class="memdesc:a74a45d2648335936561898c390281a6a"><td class="mdescLeft"> </td><td class="mdescRight">This method is called when the GPU deformer is being destroyed.  <a href="class_m_px_g_p_u_deformer.html#a74a45d2648335936561898c390281a6a">More...</a><br/></td></tr>
<tr class="separator:a74a45d2648335936561898c390281a6a"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:af684dd523a1adfe5f06de3e513e8146a"><td align="right" class="memItemLeft" valign="top"><a class="el" href="./class_m_g_p_u_deformer_buffer.html">MGPUDeformerBuffer</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#af684dd523a1adfe5f06de3e513e8146a">createOutputBuffer</a> (const <a class="el" href="./class_m_g_p_u_deformer_buffer.html">MGPUDeformerBuffer</a> &amp;inputBuffer)</td></tr>
<tr class="memdesc:af684dd523a1adfe5f06de3e513e8146a"><td class="mdescLeft"> </td><td class="mdescRight">This method creates an output buffer based on inputBuffer.  <a href="class_m_px_g_p_u_deformer.html#af684dd523a1adfe5f06de3e513e8146a">More...</a><br/></td></tr>
<tr class="separator:af684dd523a1adfe5f06de3e513e8146a"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:ae69d4b45caa48910b0d15b2241844257"><td align="right" class="memItemLeft" valign="top">bool </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#ae69d4b45caa48910b0d15b2241844257">getIndexMapper</a> (<a class="el" href="./class_m_index_mapper.html">MIndexMapper</a> &amp;imap)</td></tr>
<tr class="memdesc:ae69d4b45caa48910b0d15b2241844257"><td class="mdescLeft"> </td><td class="mdescRight">This method update if required the IndexMapper information.  <a href="class_m_px_g_p_u_deformer.html#ae69d4b45caa48910b0d15b2241844257">More...</a><br/></td></tr>
<tr class="separator:ae69d4b45caa48910b0d15b2241844257"><td class="memSeparator" colspan="2"> </td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:abb7238dc52214c1b33a9c4000c1f237e"><td align="right" class="memItemLeft" valign="top">static bool </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#abb7238dc52214c1b33a9c4000c1f237e">hasAttributeBeenModified</a> (const <a class="el" href="./class_m_evaluation_node.html">MEvaluationNode</a> &amp;evaluationNode, const <a class="el" href="./class_m_object.html">MObject</a> &amp;attribute)</td></tr>
<tr class="memdesc:abb7238dc52214c1b33a9c4000c1f237e"><td class="mdescLeft"> </td><td class="mdescRight">This method returns true if the data for attribute on the overridden deformation node has been modified since the last call to <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">MPxGPUDeformer::evaluate()</a>.  <a href="class_m_px_g_p_u_deformer.html#abb7238dc52214c1b33a9c4000c1f237e">More...</a><br/></td></tr>
<tr class="separator:abb7238dc52214c1b33a9c4000c1f237e"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a3355163bdc23aa2119a8b321e8e91fe5"><td align="right" class="memItemLeft" valign="top">static <a class="el" href="./class_m_unique_string.html">MUniqueString</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#a3355163bdc23aa2119a8b321e8e91fe5">sPositionsName</a> ()</td></tr>
<tr class="separator:a3355163bdc23aa2119a8b321e8e91fe5"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a1f51d308fc70e4dd7d5abc9c815c6839"><td align="right" class="memItemLeft" valign="top">static <a class="el" href="./class_m_unique_string.html">MUniqueString</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#a1f51d308fc70e4dd7d5abc9c815c6839">sGeometryMatrixName</a> ()</td></tr>
<tr class="separator:a1f51d308fc70e4dd7d5abc9c815c6839"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:af362a572a46f60792145b204d00b550a"><td align="right" class="memItemLeft" valign="top">static <a class="el" href="./class_m_unique_string.html">MUniqueString</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="./class_m_px_g_p_u_deformer.html#af362a572a46f60792145b204d00b550a">sInverseGeometryMatrixName</a> ()</td></tr>
<tr class="separator:af362a572a46f60792145b204d00b550a"><td class="memSeparator" colspan="2"> </td></tr>
</table>
<a id="details" name="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for user defined GPU deformer override evaluators. </p>
<p><a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> lets you create user-defined GPU deformer overrides. A GPU deformer override replaces the CPU implementation of a deformer node when the evaluation manager is enabled and the deformerEvaluator plug-in is enabled. Use <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> to override the deformation for a Maya deformer or for a plug-in deformer implemented through <a class="el" href="./class_m_px_deformer_node.html" title="Base class for user defined deformers with per-vertex weights. ">MPxDeformerNode</a>. <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> must register which node type it overrides using <a class="el" href="./class_m_g_p_u_deformer_registry.html" title="Registration class for MPxGPUDeformer. ">MGPUDeformerRegistry</a>.</p>
<p><a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> defines a deformer node as a node which has input geometry and output geometry. <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> assumes that the number of vertices in the input and output geometry of a deformer node are the same. This definition includes nodes which are traditionally thought of as deformer nodes, such as skinCluster or blendShape, but also includes nodes like groupParts, which may be part of deformation chains.</p>
<p>To ensure optimal performance when you implement <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a>, keep the following in mind: </p><ul>
<li>Calls to the constructor must be fast. Do not do heavy work in the constructor because the deformer evaluator may allocate <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> instances which are never used. Save heavy work for the <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> method. </li>
<li>Cache needed values on the graphics card during <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a>. Use the <a class="el" href="./class_m_evaluation_node.html" title="Provides access to Evaluation Manager node information. ">MEvaluationNode</a> interface to determine if input values are constant or change over time.</li>
</ul>
<p>If you use this interface, you must implement the virtual method <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> for <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> to function. See the <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> documentation for additional requirements on the <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> method. The <a class="el" href="./class_m_px_g_p_u_deformer.html#a74a45d2648335936561898c390281a6a" title="This method is called when the GPU deformer is being destroyed. ">terminate()</a> method is optional.</p>
<p><b>About the deformer evaluator:</b></p>
<p>The deformer evaluator identifies chains of supported nodes terminated by a mesh. The deformer evaluator then replaces CPU evaluation of these nodes with GPGPU kernels. The final deformed geometry is directly shared with Viewport 2.0, which avoids any GPU read back. When you implement an <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> for a given node type, you expand the list of deformer evaluator supported nodes, which then allows more deformer chains to execute on the GPU.</p>
<p>A deformer chain is created by identifying an animated display mesh and then following geometry connections upstream until a source plug, that meets any one of the following criteria, is reached: </p><ul>
<li>On a node not supported by deformer evaluator. </li>
<li>On a node which does not depend on time. </li>
<li>Contains fan out connections.</li>
</ul>
<p>When one of the preceding conditions is true for a source plug, that source plug is considered the <em>input</em> to the deformation chain, and the corresponding source plug node is not evaluated in the deformer evaluator.</p>
<p>Example Chains: </p><ul>
<li>HistoryNode: any node (supported or unsupported) which does not depend on time. </li>
<li>origMesh: the original mesh shape: the ultimate source of the deformation chain. </li>
<li>SupportedNode: a node that the deformer evaluator explicitly supports that also depends on time. </li>
<li>UnsupportedNode: any node that the deformer evaluator does not support that also depends on time.</li>
</ul>
<p><b>Example 1:</b> </p><ul>
<li>HistoryNode1 -&gt; origMesh -&gt; HistoryNode2 -&gt; SupportedNode1 -&gt; SupportedNode1 -&gt; displayMesh</li>
</ul>
<p>When the deformer evaluator initializes it identifies HistoryNode2.outputData as the source plug. The first time that the deformer evaluator runs on example 1, the HistoryNode2 geometry output is copied to the GPU. SupportedNode1 and SupportedNode2 then run kernels to perform the deformations, and the final deformed result is then shared with VP2. Subsequent evaluations re-use the copy of HistoryNode2 output geometry already on the GPU, which avoids expensive data transfer.</p>
<p><b>Example 2:</b> </p><ul>
<li>HistoryNode1 -&gt; origMesh -&gt; HistoryNode2 -&gt; UnsupportedNode1 -&gt; SupportedNode1 -&gt; displayMesh</li>
</ul>
<p>In this scenario, UnsupportedNode1 runs on the CPU and generates an intermediate result. This intermediate result is copied to the GPU. Once copied, SupportedNode1 runs its kernel and displayMesh shares data with VP2. The intermediate result is copied to the GPU every frame, resulting in slower performance.</p>
<p><b>Example 3:</b> </p><ul>
<li>HistoryNode1-&gt; origMesh -&gt; HistoryNode2 -&gt; SupportedNode1 -&gt; UnsupportedNode1 -&gt; displayMesh</li>
</ul>
<p>In this scenario, the deformer evaluator does nothing. If we performed SupportedNode1's deformation on the GPU, we would need to read back that data and use it as an input for UnsupportedNode1 on the CPU. Read back is not supported by the deformer evaluator.</p>
<p><b>Example 4:</b> </p><ul>
<li>origMesh1 -&gt; SupportedNode1.outMesh[0] -&gt; displayMesh1 </li>
<li>origMesh2 -&gt; SupportedNode1.outMesh[1] -&gt; displayMesh2</li>
</ul>
<p>In this scenario, the deformer evaluator creates two chains, one for displayMesh1 and a second for displayMesh2. These chains both run on the GPU. Note that if SupportedNode1 is derived from <a class="el" href="./class_m_px_deformer_node.html" title="Base class for user defined deformers with per-vertex weights. ">MPxDeformerNode</a>, then there can be zero relationship between the mesh data used in displayMesh1 and displayMesh2. displayMesh1 could have 100 vertices, and displayMesh2 could have one million vertices.</p>
<p><b>Example 5:</b> </p><ul>
<li>origMesh1 -&gt; SupportedNode1.outMesh[0] -&gt; displayMesh1 </li>
<li>origMesh2 -&gt; SupportedNode1.outMesh[1] -&gt; UnsupportedNode1 -&gt;displayMesh2</li>
</ul>
<p>In this scenario, the deformer evaluator does nothing. We do support the first chain for displayMesh1, but we do not support the chain for displayMesh2. The deformer evaluator does not support the partial override of a node. In this case, SupportedNode1 has only partial support because the deformer evaluator can override evaluation for outMesh[0] but not for outMesh[1]. This prevents deformer evaluator from doing any GPU work in this scenario.</p>
<p>The deformer evaluator allocates a unique <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> object for each supported node in each supported chain. In Example 4, two <a class="el" href="./class_m_px_g_p_u_deformer.html" title="Base class for user defined GPU deformer override evaluators. ">MPxGPUDeformer</a> objects are allocated for SupportedNode1, one for multi-element 0 and a second for multi-element 1.</p>
<p>The deformer evaluator's emphasis on avoiding geometry read back from the GPU means that unsupported nodes that follow a deformation chain exclude that chain from GPU evaluation. </p>
<dl class="section"><div class="dynheader closed" id="dynsection-example0" onclick="return toggleVisibility(this)" style="cursor:pointer;"><dt><img alt="+" id="dynsection-example0-trigger" src="cpp_ref/closed.png"/> <b>Examples: </b></dt></div><div class="dyncontent" id="dynsection-example0-content" style="display:none;"><dd><a class="el" href="./identity_node_2identity_node_8cpp-example.html#_a13">identityNode/identityNode.cpp</a>, and <a class="el" href="./offset_node_2offset_node_8cpp-example.html#_a34">offsetNode/offsetNode.cpp</a>.</dd></div>
</dl></div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a070259639bc552fd702c9e8e042f0331"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname">MPxGPUDeformer::DeformerStatus evaluate </td>
<td>(</td>
<td class="paramtype"><a class="el" href="./class_m_data_block.html">MDataBlock</a> &amp; </td>
<td class="paramname"><em>block</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="./class_m_evaluation_node.html">MEvaluationNode</a> &amp; </td>
<td class="paramname"><em>evaluationNode</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="./class_m_plug.html">MPlug</a> &amp; </td>
<td class="paramname"><em>outputPlug</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">unsigned int </td>
<td class="paramname"><em>numElements</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="./class_m_auto_c_l_mem.html">MAutoCLMem</a> </td>
<td class="paramname"><em>inputPositionBuffer</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="./class_m_auto_c_l_event.html">MAutoCLEvent</a> </td>
<td class="paramname"><em>inputEvent</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="./class_m_auto_c_l_mem.html">MAutoCLMem</a> </td>
<td class="paramname"><em>outputPositionBuffer</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="./class_m_auto_c_l_event.html">MAutoCLEvent</a> &amp; </td>
<td class="paramname"><em>outputEvent</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>This method is deprecated and should no longer be used. </p>
<p>Instead use MPxGPUDeformer::evaluate(MdataBlock&amp;, const MEvaluationNode&amp;, const MPlug&amp;, const MGPUDeformerData&amp;, MGPUDeformerData&amp;). The provided implementation of this function returns kDeformerFailure. Derived classes should only implement one version of the evaluate function.</p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">block</td><td>The data block of the deformer node to be overridden. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">evaluationNode</td><td>The evaluation node of the deformer to be overridden. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">outputPlug</td><td>The output plug of the deformer to be overridden. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">numElements</td><td>The number of float3 elements in inputPositionBuffer and outputPositionBuffer. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">inputPositionBuffer</td><td>The handle to the input positions on the GPU. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">inputEvent</td><td>The event that must be completed before it is safe to read values in inputPositionBuffer. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">outputPositionBuffer</td><td>The handle of the output positions on the GPU. </td></tr>
<tr><td class="paramdir">[out]</td><td class="paramname">outputEvent</td><td>The event which must be completed before it is safe to read outputPositionBuffer.</td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>MPxGPUDeformer::kDeformerSuccess</b> if a kernel was successfully created and enqueued. </li>
<li><b>MPxGPUDeformer::kDeformerFailure</b> if no kernel can be created. </li>
<li><b>MPxGPUDeformer::kDeformerRetryMainThread</b> if <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> requires access to the d3d/gl context. </li>
<li><b>MPxGPUDeformer::kDeformerPassThrough</b> if the inputPositionBuffer should be used as the inputPositionBuffer by the next deformer. </li>
</ul>
</dd></dl>
<dl class="section"><div class="dynheader closed" id="dynsection-example1" onclick="return toggleVisibility(this)" style="cursor:pointer;"><dt><img alt="+" id="dynsection-example1-trigger" src="cpp_ref/closed.png"/> <b>Examples: </b></dt></div><div class="dyncontent" id="dynsection-example1-content" style="display:none;"><dd><a class="el" href="./identity_node_2identity_node_8cpp-example.html#a18">identityNode/identityNode.cpp</a>, and <a class="el" href="./offset_node_2offset_node_8cpp-example.html#a35">offsetNode/offsetNode.cpp</a>.</dd></div>
</dl>
</div>
</div>
<a class="anchor" id="a2192a4db310682f257be5779b741ab56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname">MPxGPUDeformer::DeformerStatus evaluate </td>
<td>(</td>
<td class="paramtype"><a class="el" href="./class_m_data_block.html">MDataBlock</a> &amp; </td>
<td class="paramname"><em>block</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="./class_m_evaluation_node.html">MEvaluationNode</a> &amp; </td>
<td class="paramname"><em>evaluationNode</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="./class_m_plug.html">MPlug</a> &amp; </td>
<td class="paramname"><em>outputPlug</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="./class_m_g_p_u_deformer_data.html">MGPUDeformerData</a> &amp; </td>
<td class="paramname"><em>inputData</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="./class_m_g_p_u_deformer_data.html">MGPUDeformerData</a> &amp; </td>
<td class="paramname"><em>outputData</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> is called each time the deformation chain is evaluated. </p>
<p><a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> is given an input <a class="el" href="./class_m_g_p_u_deformer_data.html" title="Store GPU Representation of geometry data. ">MGPUDeformerData</a> and an output <a class="el" href="./class_m_g_p_u_deformer_data.html" title="Store GPU Representation of geometry data. ">MGPUDeformerData</a>. The input <a class="el" href="./class_m_g_p_u_deformer_data.html" title="Store GPU Representation of geometry data. ">MGPUDeformerData</a> holds one or more named <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> objects which represent the input data for the deformer.</p>
<p><a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> should enqueue kernels to perform the deformation. Each kernel must: </p><ul>
<li>wait for the bufferReadyEvents of the input MGPUDeformerBuffers used by the kernel. </li>
<li>read the input <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> data. </li>
<li>write the output <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> data. </li>
<li>save an event into the output <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> bufferReadyEvent, which indicates that it is safe to read the output buffer when the event is complete.</li>
</ul>
<p>It is safe to enqueue multiple kernels from <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a>. It is safe to read values from the data block and evaluation node passed into <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a>. It is not necessarily fast to read values from the data block. Reading the value of <a class="el" href="./class_m_px_geometry_filter.html#a5a37aa00b4a31cf0e531ab461daf5100" title="input geometry attribute ">MPxGeometryFilter::inputGeom</a> or <a class="el" href="./class_m_px_geometry_filter.html#a45a46b4670a182a8af07f22c412f1613" title="geometry output attribute ">MPxGeometryFilter::outputGeom</a> may caused unexpected CPU evaluation to occur. This evaluation is safe but slow. It is safe to read values for the deformation node being overridden by creating <a class="el" href="./class_m_plug.html" title="Create and Access dependency node plugs. ">MPlug</a> objects to read values. It is not safe to access data on any other node or data structure during <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a>. <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> may be invoked in parallel with other dependency graph evaluation or calls to <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> for other deformer nodes. Any output buffer written to by <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> must be added to outputData. Any input buffer not written to by <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> will automatically appear as an input to the next downstream deformer. Any buffer in outputData will automatically appear as an input to the next downstream deformer.</p>
<p>If an implementation of <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> must be executed with access to the D3D / GL context because of some GPGPU to D3D / GL interop, then <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> returns kDeformerRetryMainThread. <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> is called a second time for that frame; this call is guaranteed to have safe access to the GPU context.</p>
<p><a class="el" href="./class_m_g_p_u_deformer_data.html" title="Store GPU Representation of geometry data. ">MGPUDeformerData</a> inputData contains several <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> objects created by deformer evaluator: </p><ul>
<li>"positions" Holds a GPU representation of the <b>input vertex positions</b>. </li>
<li>"geometryMatrix" Holds a GPU representation of the <b>geometry matrix</b>. </li>
<li>"inverseGeometryMatrix" Holds a GPU representation of the <b>inverse geometry matrix</b></li>
</ul>
<p><b>Input vertex positions</b> is a cl_mem object that stores the input mesh positions as float3 elements. <b>Input vertex positions</b> is readable but may or may not be writable. The vertices stored in <b>input vertex positions</b> are stored in the same order that <a class="el" href="./class_m_it_geometry.html" title="Iterator class for geometry data. ">MItGeometry</a> visits the vertices. It is not safe to read <b>input vertex positions</b> until the buffer ready event in the input <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> is complete.</p>
<p><b>Geometry matrix</b> stores the geometry matrix as 16 float values in row major order.</p>
<p><b>Inverse geometry matrix</b> stores the inverse geometry matrix as 16 float values in row major order.</p>
<p>This is the same order convention as other matrices in Maya, represented as <a class="el" href="./class_m_matrix.html" title="A matrix math class for 4x4 matrices of doubles. ">MMatrix</a>.</p>
<p>The MGPUDeformerBuffers in inputData may be read-only or read-write. <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> must create a new <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> object to be used as the output. This <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> can be safely created on the stack, it will be copied when it is added to outputData.</p>
<p>The output <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> must have the same name as the input buffer and be backed by GPU storage large enough to hold the deformer output. <a class="el" href="./class_m_px_g_p_u_deformer.html#af684dd523a1adfe5f06de3e513e8146a" title="This method creates an output buffer based on inputBuffer. ">createOutputBuffer()</a> will automatically create an output buffer which is appropriate to use in most cases. It is not safe to hold any reference to a cl_mem object returned by <a class="el" href="./class_m_px_g_p_u_deformer.html#af684dd523a1adfe5f06de3e513e8146a" title="This method creates an output buffer based on inputBuffer. ">createOutputBuffer()</a> after the end of <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a>. <a class="el" href="./class_m_px_g_p_u_deformer.html#af684dd523a1adfe5f06de3e513e8146a" title="This method creates an output buffer based on inputBuffer. ">createOutputBuffer()</a> never creates an <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> which is read only.</p>
<p>Each output buffer must be added to outputData for that data to be available to downstream deformers. When a buffer is added to outputData its values are copied and stored in a separate structure, any further modification to the members of the buffer will not be reflected in the buffer in outputData.</p>
<p>If the <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> function returns kDeformerSuccess then outputData <b>must</b> contain at least a position buffer. Additional output buffers are optional.</p>
<p>If the <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> function returns kDeformerPassThrough then outputData <b>must not</b> contain a position buffers. Additional output buffers are optional.</p>
<p>The provided implementation of MPxGPUDeformer::evaluate(MdataBlock&amp;, const MEvaluationNode&amp;, const MPlug&amp;, const MGPUDeformerData&amp;, MGPUDeformerData&amp;) calls the deprecated version of this function <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate(MDataBlock&amp;, const MEvaluationNode&amp;, const MPlug&amp;, unsigned int, const MAutoCLMem, const MAutoCLEvent, MAutoCLMem, MAutoCLEvent&amp;)</a> for backwards compatibility.</p>
<p>Derived classes should only implement one version of the evaluate function.</p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">block</td><td>The data block of the deformer node to be overridden. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">evaluationNode</td><td>The evaluation node of the deformer to be overridden. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">outputPlug</td><td>The output plug of the deformer to be overridden. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">inputData</td><td>The input data for this deformer, including geometry. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">outputData</td><td>The output data for this deformer, including geometry.</td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>MPxGPUDeformer::kDeformerSuccess&lt; / b&gt; if a kernel was successfully created and enqueued. </b></li>
<li><b> <b>MPxGPUDeformer::kDeformerFailure&lt; / b&gt; if no kernel can be created and CPU evaluation should be performed. </b></b></li>
<li><b><b> <b>MPxGPUDeformer::kDeformerRetryMainThread&lt; / b&gt; if <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> requires access to the d3d / gl context. </b></b></b></li>
<li><b><b><b> <b>MPxGPUDeformer::kDeformerPassThrough</b> if the inputPositionBuffer should be used as the inputPositionBuffer by the next deformer. </b></b></b></li>
</ul>
</dd></dl>
</div>
</div>
<a class="anchor" id="a74a45d2648335936561898c390281a6a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname">void terminate </td>
<td>(</td>
<td class="paramname"></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>This method is called when the GPU deformer is being destroyed. </p>
<p>Any data stored on this object should be released. </p>
<dl class="section"><div class="dynheader closed" id="dynsection-example2" onclick="return toggleVisibility(this)" style="cursor:pointer;"><dt><img alt="+" id="dynsection-example2-trigger" src="cpp_ref/closed.png"/> <b>Examples: </b></dt></div><div class="dyncontent" id="dynsection-example2-content" style="display:none;"><dd><a class="el" href="./identity_node_2identity_node_8cpp-example.html#a20">identityNode/identityNode.cpp</a>, and <a class="el" href="./offset_node_2offset_node_8cpp-example.html#a39">offsetNode/offsetNode.cpp</a>.</dd></div>
</dl>
</div>
</div>
<a class="anchor" id="af684dd523a1adfe5f06de3e513e8146a"></a>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname"><a class="dashAnchor" name="//apple_ref/cpp/Function/createOutputBuffer"></a><a class="el" href="./class_m_g_p_u_deformer_buffer.html">MGPUDeformerBuffer</a> createOutputBuffer </td>
<td>(</td>
<td class="paramtype">const <a class="el" href="./class_m_g_p_u_deformer_buffer.html">MGPUDeformerBuffer</a> &amp; </td>
<td class="paramname"><em>inputBuffer</em></td><td>)</td>
<td></td>
</tr>
</table>
</div><div class="memdoc">
<p>This method creates an output buffer based on inputBuffer. </p>
<p>If inputBuffer is read only then the returned <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> will be backed by a different cl_mem object large enough to hold the data stored in inputBuffer. If inputBuffer is writable then the returned <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> is backed by the same cl_mem as inputBuffer. The <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> returned by <a class="el" href="./class_m_px_g_p_u_deformer.html#af684dd523a1adfe5f06de3e513e8146a" title="This method creates an output buffer based on inputBuffer. ">createOutputBuffer()</a> is never read only.</p>
<p>It is not safe to hold the <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> returned by createOutputBuffer after the end of the <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> call. It is not safe to hold a reference to the cl_mem underlying an <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> after the end of the <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a> call.</p>
<p>createOutputBuffer uses a pool of cl_mem objects to fulfill requests for output buffers. This avoids allocating a new writable cl_mem object each time the deformation chain is evaluated.</p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">inputBuffer</td><td>The input version of the buffer we would like to create an output buffer for.</td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An <a class="el" href="./class_m_g_p_u_deformer_buffer.html" title="Store GPU Representation of a data buffer. ">MGPUDeformerBuffer</a> to be used as an output buffer. </dd></dl>
</div>
</div>
<a class="anchor" id="abb7238dc52214c1b33a9c4000c1f237e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname">bool hasAttributeBeenModified </td>
<td>(</td>
<td class="paramtype">const <a class="el" href="./class_m_evaluation_node.html">MEvaluationNode</a> &amp; </td>
<td class="paramname"><em>evaluationNode</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="./class_m_object.html">MObject</a> &amp; </td>
<td class="paramname"><em>attribute</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>This method returns true if the data for attribute on the overridden deformation node has been modified since the last call to <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">MPxGPUDeformer::evaluate()</a>. </p>
<p>hasAttributeBeenModified returning true may indicate that the attribute is animated or that the attribute has been interactively changed.</p>
<dl class="section note"><dt>Note</dt><dd>hasAttributeBeenModified stores the top-most array/parent of the plug tree in which given attribute exists in exactly the same way <a class="el" href="./class_m_evaluation_node.html#abc632b073f3b3abeb4ca052f20573dd6" title="Returns true if the specified attribute has a dirty plug. ">MEvaluationNode::dirtyPlugExists()</a> does.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">evaluationNode</td><td>The evaluation node of the deformer which is overridden. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">attribute</td><td>The attribute to test. </td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the attribute has changed since the last call to <a class="el" href="./class_m_px_g_p_u_deformer.html#a070259639bc552fd702c9e8e042f0331" title="This method is deprecated and should no longer be used. ">evaluate()</a>. </dd></dl>
<dl class="section"><div class="dynheader closed" id="dynsection-example3" onclick="return toggleVisibility(this)" style="cursor:pointer;"><dt><img alt="+" id="dynsection-example3-trigger" src="cpp_ref/closed.png"/> <b>Examples: </b></dt></div><div class="dyncontent" id="dynsection-example3-content" style="display:none;"><dd><a class="el" href="./offset_node_2offset_node_8cpp-example.html#a76">offsetNode/offsetNode.cpp</a>.</dd></div>
</dl>
</div>
</div>
<a class="anchor" id="a3355163bdc23aa2119a8b321e8e91fe5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname"><a class="dashAnchor" name="//apple_ref/cpp/Function/sPositionsName"></a><a class="el" href="./class_m_unique_string.html">MUniqueString</a> sPositionsName </td>
<td>(</td>
<td class="paramname"></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The name of the position buffer. </dd></dl>
<dl class="section"><div class="dynheader closed" id="dynsection-example4" onclick="return toggleVisibility(this)" style="cursor:pointer;"><dt><img alt="+" id="dynsection-example4-trigger" src="cpp_ref/closed.png"/> <b>Examples: </b></dt></div><div class="dyncontent" id="dynsection-example4-content" style="display:none;"><dd><a class="el" href="./identity_node_2identity_node_8cpp-example.html#a27">identityNode/identityNode.cpp</a>, and <a class="el" href="./offset_node_2offset_node_8cpp-example.html#a63">offsetNode/offsetNode.cpp</a>.</dd></div>
</dl>
</div>
</div>
<a class="anchor" id="a1f51d308fc70e4dd7d5abc9c815c6839"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname"><a class="dashAnchor" name="//apple_ref/cpp/Function/sGeometryMatrixName"></a><a class="el" href="./class_m_unique_string.html">MUniqueString</a> sGeometryMatrixName </td>
<td>(</td>
<td class="paramname"></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The name of the geometry matrix buffer. </dd></dl>
</div>
</div>
<a class="anchor" id="af362a572a46f60792145b204d00b550a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname"><a class="dashAnchor" name="//apple_ref/cpp/Function/sInverseGeometryMatrixName"></a><a class="el" href="./class_m_unique_string.html">MUniqueString</a> sInverseGeometryMatrixName </td>
<td>(</td>
<td class="paramname"></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The name of the inverse geometry matrix buffer. </dd></dl>
</div>
</div>
<a class="anchor" id="ae69d4b45caa48910b0d15b2241844257"></a>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">bool getIndexMapper </td>
<td>(</td>
<td class="paramtype"><a class="el" href="./class_m_index_mapper.html">MIndexMapper</a> &amp; </td>
<td class="paramname"><em>imap</em></td><td>)</td>
<td></td>
</tr>
</table>
</div><div class="memdoc">
<p>This method update if required the IndexMapper information. </p>
<p>To be uses when implementing GPU deformation. It uses information on the deformer and compute the indices that are meant to be deformed. This is meant to be called every evaluation and refresh the GPU buffers only if it return true.</p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">imap</td><td>The IndexMapper to be filled only if out of date</td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if imap has been updated, otherwise false if imap already is up to date. </dd></dl>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>MPxGPUDeformer.h</li>
<li>MPxGPUDeformer.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div class="footer-block"><a class="comments-anchor" href="../html/ac.cmtdialog.htm" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div></div>
</div></body>
</html>
