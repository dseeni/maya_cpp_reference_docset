<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
<head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><script src="../scripts/utils/adsk.redirect.js" type="text/javascript"></script>
<title>MHairSystem Class Reference</title>
<meta content="C++" name="topic-subtype"/></head>
<body height="100%"><div class="body_content" id="body-content"><link href="cpp_ref/navtree.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/doxygen.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/tabs.css" rel="stylesheet" type="text/css"/><link href="style/adsk.cpm.css" rel="stylesheet" type="text/css"/><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('class_m_hair_system.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type="text/javascript">$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script><!-- begin MT -->
<div class="Dark" id="MicrosoftTranslatorWidget" style="float:right;z-index:100;color:white;background-color:#bbbbbb;height:58px;overflow:hidden"></div>
<div>
<div class="head">
<h1>MHairSystem Class Reference</h1>
</div>
<div id="top"><!-- Generated by Doxygen 1.8.10 -->
<div class="tabs" id="navrow1">
<ul class="tablist">
<li><a href="./index.html"><span>Main Page</span></a></li>
<li><a href="./pages.html"><span>Topics</span></a></li>
<li><a href="./modules.html"><span>Modules</span></a></li>
<li><a href="./namespaces.html"><span>Namespaces</span></a></li>
<li class="current"><a href="./annotated.html"><span>Classes</span></a></li>
<li><a href="./files.html"><span>Files</span></a></li>
<li><a href="./examples.html"><span>Examples</span></a></li>
</ul>
</div>
<div class="tabs2" id="navrow2">
<ul class="tablist">
<li><a href="./annotated.html"><span>Class List</span></a></li>
<li><a href="./classes.html"><span>Class Index</span></a></li>
<li><a href="./hierarchy.html"><span>Class Hierarchy</span></a></li>
<li><a href="./functions.html"><span>Class Members</span></a></li>
</ul>
</div>
</div><!-- top -->
<div class="ui-resizable side-nav-resizable" id="side-nav">
<div id="nav-tree">
<div id="nav-tree-contents">
<div class="sync" id="nav-sync"></div>
</div>
</div>
<div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;">
</div>
</div>
<div id="doc-content">
<div class="header">
<div class="headertitle">
<div class="title">MHairSystem Class Reference<div class="ingroups"><a class="el" href="./group___open_maya_f_x.html" translate="no">OpenMayaFX - API module for effects</a></div></div> </div>
<div class="summary">
<a href="class_m_hair_system.html#pub-static-methods">Static Public Member Functions</a> </div></div><!--header-->
<div class="contents">
<p><code>#include &lt;MHairSystem.h&gt;</code></p>
<a id="details" name="details"></a><h2 class="groupheader">Class Description</h2>
<div class="textblock"><p>Interface with Maya's Dynamic Hair System. </p>
<p><a class="el" href="./class_m_hair_system.html" title="Interface with Maya's Dynamic Hair System. " translate="no">MHairSystem</a> provides an interface with Maya's Dynamic Hair System.</p>
<p>At present, this interface only supports the ability to override the geometry collision component of hair. There is currently no support for overriding the other hair collision components (i.e. implicit object collision and hair self collision).</p>
<p>The rationale for providing a hair collision API is to allow the user to override Maya's internal algorithm which is a high-performance simulation. There is an example plug-in provided in the Developer's Toolkit called hairCollisionSolver.cpp. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a2428d36bd0a47deeb8c43d2138ace7da"><td align="right" class="memItemLeft" translate="no" valign="top">static <a class="el" href="./class_m_status.html" translate="no">MStatus</a> </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#a2428d36bd0a47deeb8c43d2138ace7da" translate="no">registerCollisionSolverCollide</a> (MHairSystemCollisionSolverCollideFnPtr)</td></tr>
<tr class="memdesc:a2428d36bd0a47deeb8c43d2138ace7da"><td class="mdescLeft"> </td><td class="mdescRight">Register the user-supplied collision solver `fnPtr' with Maya.  <a href="class_m_hair_system.html#a2428d36bd0a47deeb8c43d2138ace7da">More...</a><br/></td></tr>
<tr class="separator:a2428d36bd0a47deeb8c43d2138ace7da"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a78aa477cff5ec54b1810d5a3f13b6e1a"><td align="right" class="memItemLeft" translate="no" valign="top">static <a class="el" href="./class_m_status.html" translate="no">MStatus</a> </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#a78aa477cff5ec54b1810d5a3f13b6e1a" translate="no">registerCollisionSolverPreFrame</a> (MHairSystemCollisionSolverPreFrameFnPtr)</td></tr>
<tr class="memdesc:a78aa477cff5ec54b1810d5a3f13b6e1a"><td class="mdescLeft"> </td><td class="mdescRight">Register the user-supplied pre-frame method `fnPtr' with Maya.  <a href="class_m_hair_system.html#a78aa477cff5ec54b1810d5a3f13b6e1a">More...</a><br/></td></tr>
<tr class="separator:a78aa477cff5ec54b1810d5a3f13b6e1a"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:aed270f78aa2c10fe69fef015be60921a"><td align="right" class="memItemLeft" translate="no" valign="top"><a class="anchor" id="aed270f78aa2c10fe69fef015be60921a"></a>
static <a class="el" href="./class_m_status.html" translate="no">MStatus</a> </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#aed270f78aa2c10fe69fef015be60921a" translate="no">unregisterCollisionSolverCollide</a> ()</td></tr>
<tr class="memdesc:aed270f78aa2c10fe69fef015be60921a"><td class="mdescLeft"> </td><td class="mdescRight">De-register any user-defined collision solver that might have been registered via <a class="el" href="./class_m_hair_system.html#a2428d36bd0a47deeb8c43d2138ace7da" title="Register the user-supplied collision solver `fnPtr' with Maya. " translate="no">registerCollisionSolverCollide()</a>. <br/></td></tr>
<tr class="separator:aed270f78aa2c10fe69fef015be60921a"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a01eeb1c0cf1fd6abe5b9a609157e3fca"><td align="right" class="memItemLeft" translate="no" valign="top"><a class="anchor" id="a01eeb1c0cf1fd6abe5b9a609157e3fca"></a>
static <a class="el" href="./class_m_status.html" translate="no">MStatus</a> </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#a01eeb1c0cf1fd6abe5b9a609157e3fca" translate="no">unregisterCollisionSolverPreFrame</a> ()</td></tr>
<tr class="memdesc:a01eeb1c0cf1fd6abe5b9a609157e3fca"><td class="mdescLeft"> </td><td class="mdescRight">De-register any user-defined pre-frame callback that might have been registered via <a class="el" href="./class_m_hair_system.html#a78aa477cff5ec54b1810d5a3f13b6e1a" title="Register the user-supplied pre-frame method `fnPtr' with Maya. " translate="no">MHairSystem::registerCollisionSolverPreFrame</a>. <br/></td></tr>
<tr class="separator:a01eeb1c0cf1fd6abe5b9a609157e3fca"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a0aed534fe1495976805ff9848853b3b4"><td align="right" class="memItemLeft" translate="no" valign="top">static <a class="el" href="./class_m_object.html" translate="no">MObject</a> </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#a0aed534fe1495976805ff9848853b3b4" translate="no">getCollisionObject</a> (const <a class="el" href="./class_m_object.html" translate="no">MObject</a> hairSystem, const int index, <a class="el" href="./class_m_status.html" translate="no">MStatus</a> *status)</td></tr>
<tr class="memdesc:a0aed534fe1495976805ff9848853b3b4"><td class="mdescLeft"> </td><td class="mdescRight">Returns the requested collision object from the hair system.  <a href="class_m_hair_system.html#a0aed534fe1495976805ff9848853b3b4">More...</a><br/></td></tr>
<tr class="separator:a0aed534fe1495976805ff9848853b3b4"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a522f02c20a25e5c1bb865ca1a7d4ce2b"><td align="right" class="memItemLeft" translate="no" valign="top">static <a class="el" href="./class_m_status.html" translate="no">MStatus</a> </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#a522f02c20a25e5c1bb865ca1a7d4ce2b" translate="no">getCollisionObject</a> (const <a class="el" href="./class_m_object.html" translate="no">MObject</a> hairSystem, <a class="el" href="./class_m_object_array.html" translate="no">MObjectArray</a> &amp;objects, <a class="el" href="./class_m_int_array.html" translate="no">MIntArray</a> &amp;logicalIndices)</td></tr>
<tr class="memdesc:a522f02c20a25e5c1bb865ca1a7d4ce2b"><td class="mdescLeft"> </td><td class="mdescRight">Returns all collision objects for the hair system.  <a href="class_m_hair_system.html#a522f02c20a25e5c1bb865ca1a7d4ce2b">More...</a><br/></td></tr>
<tr class="separator:a522f02c20a25e5c1bb865ca1a7d4ce2b"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:adcb5f2dfbd455f2c5b75b6cb5d28df26"><td align="right" class="memItemLeft" translate="no" valign="top">static <a class="el" href="./class_m_object.html" translate="no">MObject</a> </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#adcb5f2dfbd455f2c5b75b6cb5d28df26" translate="no">getFollicle</a> (const <a class="el" href="./class_m_object.html" translate="no">MObject</a> hairSystem, const int index, <a class="el" href="./class_m_status.html" translate="no">MStatus</a> *status)</td></tr>
<tr class="memdesc:adcb5f2dfbd455f2c5b75b6cb5d28df26"><td class="mdescLeft"> </td><td class="mdescRight">Returns the requested follicle from the hair system.  <a href="class_m_hair_system.html#adcb5f2dfbd455f2c5b75b6cb5d28df26">More...</a><br/></td></tr>
<tr class="separator:adcb5f2dfbd455f2c5b75b6cb5d28df26"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a9d442f4a70dc1c40966d5ee858cfba58"><td align="right" class="memItemLeft" translate="no" valign="top">static <a class="el" href="./class_m_status.html" translate="no">MStatus</a> </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#a9d442f4a70dc1c40966d5ee858cfba58" translate="no">getFollicle</a> (const <a class="el" href="./class_m_object.html" translate="no">MObject</a> hairSystem, <a class="el" href="./class_m_object_array.html" translate="no">MObjectArray</a> &amp;follicles, <a class="el" href="./class_m_int_array.html" translate="no">MIntArray</a> &amp;logicalIndices)</td></tr>
<tr class="memdesc:a9d442f4a70dc1c40966d5ee858cfba58"><td class="mdescLeft"> </td><td class="mdescRight">Returns all follicles for the hair system.  <a href="class_m_hair_system.html#a9d442f4a70dc1c40966d5ee858cfba58">More...</a><br/></td></tr>
<tr class="separator:a9d442f4a70dc1c40966d5ee858cfba58"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a239948837628131c722f10f190abc253"><td align="right" class="memItemLeft" translate="no" valign="top"><a class="anchor" id="a239948837628131c722f10f190abc253"></a>
static void </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#a239948837628131c722f10f190abc253" translate="no">setRegisteringCallableScript</a> ()</td></tr>
<tr class="memdesc:a239948837628131c722f10f190abc253"><td class="mdescLeft"> </td><td class="mdescRight">Mark this <a class="el" href="./class_m_hair_system.html" title="Interface with Maya's Dynamic Hair System. " translate="no">MHairSystem</a> object as one that will be passed callbacks defined in script. <br/></td></tr>
<tr class="separator:a239948837628131c722f10f190abc253"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a5f586337760f98939702403c29950aff"><td align="right" class="memItemLeft" translate="no" valign="top"><a class="anchor" id="a5f586337760f98939702403c29950aff"></a>
static bool </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#a5f586337760f98939702403c29950aff" translate="no">registeringCallableScript</a> ()</td></tr>
<tr class="memdesc:a5f586337760f98939702403c29950aff"><td class="mdescLeft"> </td><td class="mdescRight">Return true if this <a class="el" href="./class_m_hair_system.html" title="Interface with Maya's Dynamic Hair System. " translate="no">MHairSystem</a> object has its callbacks defined in script. <br/></td></tr>
<tr class="separator:a5f586337760f98939702403c29950aff"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a774cd5d8fbebe8e7ed82a5aa587d1f04"><td align="right" class="memItemLeft" translate="no" valign="top">static const char * </td><td class="memItemRight" translate="no" valign="bottom"><a class="el" href="./class_m_hair_system.html#a774cd5d8fbebe8e7ed82a5aa587d1f04" translate="no">className</a> ()</td></tr>
<tr class="memdesc:a774cd5d8fbebe8e7ed82a5aa587d1f04"><td class="mdescLeft"> </td><td class="mdescRight">Returns the name of this class.  <a href="class_m_hair_system.html#a774cd5d8fbebe8e7ed82a5aa587d1f04">More...</a><br/></td></tr>
<tr class="separator:a774cd5d8fbebe8e7ed82a5aa587d1f04"><td class="memSeparator" colspan="2"> </td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2428d36bd0a47deeb8c43d2138ace7da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname" translate="no"><a class="dashAnchor" name="//apple_ref/cpp/Function/registerCollisionSolverCollide"></a><a class="el" href="./class_m_status.html" translate="no">MStatus</a> registerCollisionSolverCollide </td>
<td>(</td>
<td class="paramtype">MHairSystemCollisionSolverCollideFnPtr </td>
<td class="paramname"><em>fnPtr</em></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Register the user-supplied collision solver `fnPtr' with Maya. </p>
<p>This method will be invoked per-hair times the number of iterations specified by the hairSystem node and the method can be used to perfrom several functions:</p>
<ol>
<li>
Implement a user-defined collision detection on all collision objects associated with the hairSystem node. </li>
<li>
Adjust the hair position to react to any detected collision. </li>
<li>
Perform global hair processing functions, such as freeze, smoothing, etc. These functions can be performed independently of whether or not a collision occurred. </li>
</ol>
<p>The effect of registering a collision solver is to override Maya's internal solver, thus ALL hair to object collision detection will now route into your callback. To revert to Maya's internal solver, de-register the solver using <a class="el" href="./class_m_hair_system.html#aed270f78aa2c10fe69fef015be60921a" title="De-register any user-defined collision solver that might have been registered via registerCollisionSo..." translate="no">unregisterCollisionSolverCollide()</a>. Also note that exatly one collision solver can be registered. If a second solver is registered, it overrides the previous definition.</p>
<p>The hair that gets passed into your collision solver is defined by three parameters: the desired position where Maya's hair system wants the hair to be at the current time, the previous position (where the hair was at the last frame), and the width of the hair. These three parameters are represented as arrays. The first element in each array corresponds to the root of the hair, and the remaining elements are the points along the hair with the tip as the last element. Maya has the ability for the user to lock the root and or tip so that they cannot be moved. This locking is specified by the `startIndex' and `endIndex' parameters. A pair of hair points forms what is termed a "hair segment", and each segment is thus a moving cylinder in which each end can have a different width.</p>
<p>The goal of your collision solver is to detect any collisions between the hair as it moves linearly from previous towards its desired position and any collision objects. As the hair is moving and the collision objects are moving, the collision calculation is a complex time-based equation. If you take into consideration that the hair has variable width, things are even more complicated.</p>
<p>Since you have full access to computing and reacting to the collision, you can make assumptions (such has collision objects can't move) then you can get speed improvements over Maya's built-in solver. You can also go the other way: implementing very accurate continuous-time collision detection.</p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">fnPtr</td><td>Pointer to a function which implements the user's collision solver algorithm.</td></tr>
</table>
</dd>
</dl>
<p>The MHairSystemCollisionSolverCollideFnPtr type is defined as follows.</p>
<ul>
<li><b>const <a class="el" href="./class_m_object.html" title="Generic Class for Accessing Internal Maya Objects. " translate="no">MObject</a> hairSystem</b> The hair system shape node. </li>
<li><b>const int follicleIndex</b> The follicle we are processing. The value can be passed into <a class="el" href="./class_m_hair_system.html#adcb5f2dfbd455f2c5b75b6cb5d28df26" title="Returns the requested follicle from the hair system. " translate="no">getFollicle()</a> to obtain the follicle node. </li>
<li><b><a class="el" href="./class_m_vector_array.html" title="Array of MVectors data type. " translate="no">MVectorArray</a> &amp;hairPositions</b> An array of desired positons where the hair system would like the hair to be for the current frame. The entries are ordered such that the first entry corresponds to the root of the hair and the last entry to the tip. If you detect a collision between the hair and a collision object, update the hairPositions values appropriately. </li>
<li><b><a class="el" href="./class_m_vector_array.html" title="Array of MVectors data type. " translate="no">MVectorArray</a> &amp;hairPositionsLast</b> An array of positions at the previous time. Use hairPositions[i] minus hairPositionsLast[i] to determine the velocity to use. If a desire to change the velocity is needed, alter positionsLast to place the hair to enact the new desired velocity. Note that the hair solver likes damped collisions: attempting to simulate rebound effects may not work effectively. </li>
<li><b>const <a class="el" href="./class_m_double_array.html" title="Array of doubles data type. " translate="no">MDoubleArray</a> &amp;hairWidths</b> The width along the hair. The entries correspond one-to-one with the entries in the hairPositions and hairPositionsLast array. In effect, each hair segment is a cylinder with a potentially different width at each end. </li>
<li><b>const int startIndex</b> The first element in the hair arrays we are allowed to alter. This will be 0 unless the root is locked. </li>
<li><b>const int endIndex</b> The last element in the hair arrays we are allowed to alter. This will be hairPositions.length()-1 unless the tip is locked. </li>
<li><b>const double curTime</b> The current time in seconds. </li>
<li><b>const void *privateData</b> If you set up a pre-frame callback via <a class="el" href="./class_m_hair_system.html#a78aa477cff5ec54b1810d5a3f13b6e1a" title="Register the user-supplied pre-frame method `fnPtr' with Maya. " translate="no">MHairSystem::registerCollisionSolverPreFrame</a> then this is the private data you would have returned from your callback. Passing back private data is optional: the only advantage is to save the user the cost of retrieving the private data through other methods.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>MS::kSuccess</b> Successfully registered the callback. </li>
<li><b>MS::kFailure</b> A callback was already registered. Use MHairSystem::unregisterCollisionCollide() first to de-register the current callback before registering a new one. </li>
</ul>
</dd></dl>
<dl class="section"><div class="dynheader closed" id="dynsection-example0" onclick="return toggleVisibility(this)" style="cursor:pointer;"><dt><img alt="+" id="dynsection-example0-trigger" src="cpp_ref/closed.png"/> <b>Examples: </b></dt></div><div class="dyncontent" id="dynsection-example0-content" style="display:none;"><dd><a class="el" href="./hair_collision_solver_2hair_collision_solver_8cpp-example.html#a22" translate="no">hairCollisionSolver/hairCollisionSolver.cpp</a>.</dd></div>
</dl>
</div>
</div>
<a class="anchor" id="a78aa477cff5ec54b1810d5a3f13b6e1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname" translate="no"><a class="dashAnchor" name="//apple_ref/cpp/Function/registerCollisionSolverPreFrame"></a><a class="el" href="./class_m_status.html" translate="no">MStatus</a> registerCollisionSolverPreFrame </td>
<td>(</td>
<td class="paramtype">MHairSystemCollisionSolverPreFrameFnPtr </td>
<td class="paramname"><em>fnPtr</em></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Register the user-supplied pre-frame method `fnPtr' with Maya. </p>
<p>This method will be invoked at the start of each frame.</p>
<p>Note that this method is optional. You only need to define this method if you want to perform pre-frame initialisation. One strategy is to perform expensive pre-preprocessing once per frame so that it can be utilised during your collide() callback. If there is more than one collision geometry associated with the hair system, be sure to store the pre-processed data so that it can be referenced in the order the objects are returned via the <a class="el" href="./class_m_hair_system.html#a0aed534fe1495976805ff9848853b3b4" title="Returns the requested collision object from the hair system. " translate="no">getCollisionObject()</a> call.</p>
<p>Note: if you decide to define private data, you will need to manage it somehow. You will need to be able to find the data again to reuse at the next frame and delete it when the collision object is removed from the hairSystem's collision list. The best way to do this is to implement a listener method which watches for changes to the hair system's collision object list attribute and clean up your private data as appropriate.</p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">fnPtr</td><td>Pointer to a function which implements the user's pre-frame algorithm.</td></tr>
</table>
</dd>
</dl>
<p>The MHairSystemCollisionSolverPreFrameFnPtr type is defined as follows.</p>
<ul>
<li><b>const <a class="el" href="./class_m_object.html" title="Generic Class for Accessing Internal Maya Objects. " translate="no">MObject</a> hairSystem</b> The hair system shape node. </li>
<li><b>const double curTime</b> The current time in seconds. </li>
<li><b>void **privateData</b> Allows the user to return a private data pointer to be passed directly into their collision solver callback. The intent is to provide an efficient way to pass your private data into the collision solver (for example, if you store your private data on a typed attribute on the hairSystem node, using the privateData pointer allows you to avoid looking up the plug value in your high-traffic collision solver).</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>MS::kSuccess</b> Successfully registered the callback. </li>
<li><b>MS::kFailure</b> A callback was already registered. Use <a class="el" href="./class_m_hair_system.html#a01eeb1c0cf1fd6abe5b9a609157e3fca" title="De-register any user-defined pre-frame callback that might have been registered via MHairSystem::regi..." translate="no">MHairSystem::unregisterCollisionSolverPreFrame()</a> first to de-register the current callback before registering a new one. </li>
</ul>
</dd></dl>
<dl class="section"><div class="dynheader closed" id="dynsection-example1" onclick="return toggleVisibility(this)" style="cursor:pointer;"><dt><img alt="+" id="dynsection-example1-trigger" src="cpp_ref/closed.png"/> <b>Examples: </b></dt></div><div class="dyncontent" id="dynsection-example1-content" style="display:none;"><dd><a class="el" href="./hair_collision_solver_2hair_collision_solver_8cpp-example.html#a23" translate="no">hairCollisionSolver/hairCollisionSolver.cpp</a>.</dd></div>
</dl>
</div>
</div>
<a class="anchor" id="a0aed534fe1495976805ff9848853b3b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname" translate="no"><a class="dashAnchor" name="//apple_ref/cpp/Function/getCollisionObject"></a><a class="el" href="./class_m_object.html" translate="no">MObject</a> getCollisionObject </td>
<td>(</td>
<td class="paramtype">const <a class="el" href="./class_m_object.html" translate="no">MObject</a> </td>
<td class="paramname"><em>hairSystem</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const int </td>
<td class="paramname"><em>index</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="./class_m_status.html" translate="no">MStatus</a> * </td>
<td class="paramname"><em>ReturnStatus</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Returns the requested collision object from the hair system. </p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">hairSystem</td><td>The hair system. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Which collision object to retrieve. The objectIndex parameter passed into your pre-frame callback or collision solver callback can be specified here. </td></tr>
<tr><td class="paramdir">[out]</td><td class="paramname">ReturnStatus</td><td>Status code.</td></tr>
</table>
</dd>
</dl>
<p><b>Status codes</b></p>
<ul>
<li><b>MS::kSuccess</b> Successfully retrieved the collision object. </li>
<li><b>MS::kFailure</b> An error occurred.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>The requested collision object, or the NULL object if not found. </dd></dl>
<dl class="section"><div class="dynheader closed" id="dynsection-example2" onclick="return toggleVisibility(this)" style="cursor:pointer;"><dt><img alt="+" id="dynsection-example2-trigger" src="cpp_ref/closed.png"/> <b>Examples: </b></dt></div><div class="dyncontent" id="dynsection-example2-content" style="display:none;"><dd><a class="el" href="./hair_collision_solver_2hair_collision_solver_8cpp-example.html#a6" translate="no">hairCollisionSolver/hairCollisionSolver.cpp</a>.</dd></div>
</dl>
</div>
</div>
<a class="anchor" id="a522f02c20a25e5c1bb865ca1a7d4ce2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname" translate="no"><a class="dashAnchor" name="//apple_ref/cpp/Function/getCollisionObject"></a><a class="el" href="./class_m_status.html" translate="no">MStatus</a> getCollisionObject </td>
<td>(</td>
<td class="paramtype">const <a class="el" href="./class_m_object.html" translate="no">MObject</a> </td>
<td class="paramname"><em>hairSystem</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="./class_m_object_array.html" translate="no">MObjectArray</a> &amp; </td>
<td class="paramname"><em>objects</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="./class_m_int_array.html" translate="no">MIntArray</a> &amp; </td>
<td class="paramname"><em>logicalIndices</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Returns all collision objects for the hair system. </p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">hairSystem</td><td>The hair system. </td></tr>
<tr><td class="paramdir">[out]</td><td class="paramname">objects</td><td>Returns the collision objects in the same order that index-based <a class="el" href="./class_m_hair_system.html#a0aed534fe1495976805ff9848853b3b4" title="Returns the requested collision object from the hair system. " translate="no">getCollisionObject()</a> returns them. </td></tr>
<tr><td class="paramdir">[out]</td><td class="paramname">logicalIndices</td><td>Logical indices of each collision object returned.</td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>MS::kSuccess</b> Successfully retrieved the collision objects. </li>
<li><b>MS::kFailure</b> An error occurred. </li>
</ul>
</dd></dl>
</div>
</div>
<a class="anchor" id="adcb5f2dfbd455f2c5b75b6cb5d28df26"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname" translate="no"><a class="dashAnchor" name="//apple_ref/cpp/Function/getFollicle"></a><a class="el" href="./class_m_object.html" translate="no">MObject</a> getFollicle </td>
<td>(</td>
<td class="paramtype">const <a class="el" href="./class_m_object.html" translate="no">MObject</a> </td>
<td class="paramname"><em>hairSystem</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const int </td>
<td class="paramname"><em>index</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="./class_m_status.html" translate="no">MStatus</a> * </td>
<td class="paramname"><em>ReturnStatus</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Returns the requested follicle from the hair system. </p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">hairSystem</td><td>The hair system. </td></tr>
<tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Which follicle to retrieve. The follicleIndex parameter passed into your collision solver callback can be specified here. </td></tr>
<tr><td class="paramdir">[out]</td><td class="paramname">ReturnStatus</td><td>Status code.</td></tr>
</table>
</dd>
</dl>
<p><b>Status codes</b></p>
<ul>
<li><b>MS::kSuccess</b> Successfully retrieved the follicle. </li>
<li><b>MS::kFailure</b> An error occurred.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>The requested follicle, or the NULL object if not found. </dd></dl>
</div>
</div>
<a class="anchor" id="a9d442f4a70dc1c40966d5ee858cfba58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname" translate="no"><a class="dashAnchor" name="//apple_ref/cpp/Function/getFollicle"></a><a class="el" href="./class_m_status.html" translate="no">MStatus</a> getFollicle </td>
<td>(</td>
<td class="paramtype">const <a class="el" href="./class_m_object.html" translate="no">MObject</a> </td>
<td class="paramname"><em>hairSystem</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="./class_m_object_array.html" translate="no">MObjectArray</a> &amp; </td>
<td class="paramname"><em>follicles</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="./class_m_int_array.html" translate="no">MIntArray</a> &amp; </td>
<td class="paramname"><em>logicalIndices</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Returns all follicles for the hair system. </p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramdir">[in]</td><td class="paramname">hairSystem</td><td>The hair system. </td></tr>
<tr><td class="paramdir">[out]</td><td class="paramname">follicles</td><td>Returns the array of follicles in the same order that the index-based <a class="el" href="./class_m_hair_system.html#adcb5f2dfbd455f2c5b75b6cb5d28df26" title="Returns the requested follicle from the hair system. " translate="no">getFollicle()</a> returns them. </td></tr>
<tr><td class="paramdir">[out]</td><td class="paramname">logicalIndices</td><td>Logical indices of each follicle returned.</td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>MS::kSuccess</b> Successfully retrieved the follicles. </li>
<li><b>MS::kFailure</b> An error occurred. </li>
</ul>
</dd></dl>
</div>
</div>
<a class="anchor" id="a774cd5d8fbebe8e7ed82a5aa587d1f04"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname" translate="no">const char * className </td>
<td>(</td>
<td class="paramname"></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Returns the name of this class. </p>
<dl class="section return"><dt>Returns</dt><dd>The name of this class. </dd></dl>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>MHairSystem.h</li>
<li>MHairSystem.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="footer-block"><a class="comments-anchor" href="../html/ac.cmtdialog.htm" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div></div>
</div></body>
</html>
