<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="product" content="MAYAUL"><meta name="release" content="2016"><meta name="book" content="Developer"><meta name="created" content="2015-10-14"><meta name="topicid" content="GUID-02DEF634-1E7B-48C6-8ACD-2C934CA97887"><meta name="topic-type" content="concept">
      <title>quadricShape/quadricShape.cpp</title>
   

<meta name="topic-subtype" content="C++"></head>
   <body height="100%"><div class="body_content" id="body-content"><link rel="stylesheet" type="text/css" href="cpp_ref/navtree.css"><link rel="stylesheet" type="text/css" href="cpp_ref/doxygen.css"><link rel="stylesheet" type="text/css" href="cpp_ref/tabs.css"><link rel="stylesheet" type="text/css" href="style/adsk.cpm.css"><script language="javascript">var index = 'index.html';</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/ac_common.js"); });</script><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('quadric_shape_2quadric_shape_8cpp-example.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type='text/javascript'>$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=y5CYlxTRD0znCzRLDwX0Wy7-g1EdC1XA4dSC-Y1LtaeScyli8_Ps5jPKqTr4xKxMI0OOUfkDplvX3uxN0JnPclebSYW8_J1HBzf4VLQEzQ8M4PsYXF_cMyp1Oumaetky&category=5297189e-446b-459e-ae1d-9d0360400781_tech&ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script><!-- begin MT -->
            
            <div id='MicrosoftTranslatorWidget' class='Dark' style='position:absolute;right:20px;top:5px;z-index:100;color:white;background-color:#555555;height:58px;overflow:hidden'></div>
      <div>
         <div class="head">
            <h1>quadricShape/quadricShape.cpp</h1>
         </div>

    <div id="top"><!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="#!/url=./cpp_ref/index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="#!/url=./cpp_ref/pages.html"><span>Topics</span></a></li>
      <li><a href="#!/url=./cpp_ref/modules.html"><span>Modules</span></a></li>
      <li><a href="#!/url=./cpp_ref/namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="#!/url=./cpp_ref/annotated.html"><span>Classes</span></a></li>
      <li><a href="#!/url=./cpp_ref/examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" class="ui-resizable-handle">
  </div>
</div>

<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">quadricShape/quadricShape.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">//-</span></div>
<div class="line"><span class="comment">// ==========================================================================</span></div>
<div class="line"><span class="comment">// Copyright 1995,2006,2008 Autodesk, Inc. All rights reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Use of this software is subject to the terms of the Autodesk</span></div>
<div class="line"><span class="comment">// license agreement provided at the time of installation or download,</span></div>
<div class="line"><span class="comment">// or which otherwise accompanies this software in either electronic</span></div>
<div class="line"><span class="comment">// or hard copy form.</span></div>
<div class="line"><span class="comment">// ==========================================================================</span></div>
<div class="line"><span class="comment">//+</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// quadricShape.cpp</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Description:</span></div>
<div class="line"><span class="comment">//    Registers a new type of shape with maya called &quot;quadricShape&quot;.</span></div>
<div class="line"><span class="comment">//    This shape will display spheres, cylinders, disks, and partial disks</span></div>
<div class="line"><span class="comment">//    using the OpenGL gluQuadric functions.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//    There are no output attributes for this shape.</span></div>
<div class="line"><span class="comment">//    The following input attributes define the type of shape to draw.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//       shapeType  : 0=cylinder, 1=disk, 2=partialDisk, 3=sphere</span></div>
<div class="line"><span class="comment">//       radius1    : cylinder base radius, disk inner radius, sphere radius</span></div>
<div class="line"><span class="comment">//       radius2    : cylinder top radius, disk outer radius</span></div>
<div class="line"><span class="comment">//       height     : cylinder height</span></div>
<div class="line"><span class="comment">//       startAngle : partial disk start angle</span></div>
<div class="line"><span class="comment">//       sweepAngle : partial disk sweep angle</span></div>
<div class="line"><span class="comment">//       slices     : cylinder, disk, sphere slices</span></div>
<div class="line"><span class="comment">//       loops      : disk loops</span></div>
<div class="line"><span class="comment">//       stacks     : cylinder, sphere stacks</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MIOStream.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPxSurfaceShape.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPxSurfaceShapeUI.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnPlugin.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnNumericAttribute.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnEnumAttribute.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPoint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPlug.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MDrawData.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MDrawRequest.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MSelectionMask.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MSelectionList.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MDagPath.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MMaterial.h&gt;</span></div>
<div class="line"><span class="preprocessor">#if defined(OSMac_MachO_)</span></div>
<div class="line"><span class="preprocessor">#include &lt;OpenGL/glu.h&gt;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#include &lt;GL/glu.h&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define MCHECKERROR(STAT,MSG)       \</span></div>
<div class="line"><span class="preprocessor">    if ( MS::kSuccess != STAT ) {   \</span></div>
<div class="line"><span class="preprocessor">        cerr &lt;&lt; MSG &lt;&lt; endl;        \</span></div>
<div class="line"><span class="preprocessor">        return MS::kFailure;        \</span></div>
<div class="line"><span class="preprocessor">    }</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define MAKE_NUMERIC_ATTR( NAME, SHORTNAME, TYPE, DEFAULT, KEYABLE ) \</span></div>
<div class="line"><span class="preprocessor">    MStatus NAME##_stat;                                             \</span></div>
<div class="line"><span class="preprocessor">    MFnNumericAttribute NAME##_fn;                                   \</span></div>
<div class="line"><span class="preprocessor">    NAME = NAME##_fn.create( #NAME, SHORTNAME, TYPE, DEFAULT );      \</span></div>
<div class="line"><span class="preprocessor">    MCHECKERROR(NAME##_stat, &quot;numeric attr create error&quot;);           \</span></div>
<div class="line"><span class="preprocessor">    NAME##_fn.setHidden( !KEYABLE );                                 \</span></div>
<div class="line"><span class="preprocessor">    NAME##_fn.setKeyable( KEYABLE );                                 \</span></div>
<div class="line"><span class="preprocessor">    NAME##_fn.setInternal( true );                                   \</span></div>
<div class="line"><span class="preprocessor">    NAME##_stat = addAttribute( NAME );                              \</span></div>
<div class="line"><span class="preprocessor">    MCHECKERROR(NAME##_stat, &quot;addAttribute error&quot;);</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define LEAD_COLOR              18  // green</span></div>
<div class="line"><span class="preprocessor">#define ACTIVE_COLOR            15  // white</span></div>
<div class="line"><span class="preprocessor">#define ACTIVE_AFFECTED_COLOR   8   // purple</span></div>
<div class="line"><span class="preprocessor">#define DORMANT_COLOR           4   // blue</span></div>
<div class="line"><span class="preprocessor">#define HILITE_COLOR            17  // pale blue</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Geometry class</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">class </span>quadricGeom </div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">double</span> radius1;</div>
<div class="line">    <span class="keywordtype">double</span> radius2;</div>
<div class="line">    <span class="keywordtype">double</span> height;</div>
<div class="line">    <span class="keywordtype">double</span> startAngle;</div>
<div class="line">    <span class="keywordtype">double</span> sweepAngle;</div>
<div class="line">    <span class="keywordtype">short</span> slices;</div>
<div class="line">    <span class="keywordtype">short</span> loops;</div>
<div class="line">    <span class="keywordtype">short</span> stacks;</div>
<div class="line">    <span class="keywordtype">short</span> shapeType;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Shape class - defines the non-UI part of a shape node</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">class </span>quadricShape : <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_surface_shape.html">MPxSurfaceShape</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    quadricShape();</div>
<div class="line">    <span class="keyword">virtual</span> ~quadricShape(); </div>
<div class="line"></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span>            <a name="a1"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_node.html#a5c13a6c88a839b5356861d1d09e820d9">postConstructor</a>();</div>
<div class="line">    <span class="keyword">virtual</span> <a name="_a2"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a>         <a name="a3"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_node.html#a5cb7edfa1f67c75588bec1c38b7bf5f8">compute</a>( <span class="keyword">const</span> <a name="_a4"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a>&amp;, <a name="_a5"></a><a class="code" href="#!/url=./cpp_ref/class_m_data_block.html">MDataBlock</a>&amp; );</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span>            <a name="a6"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_node.html#a4d71aa2b223bea98e4997d86992933a7">getInternalValue</a>( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a>&amp;,</div>
<div class="line">                                              <a name="_a7"></a><a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html">MDataHandle</a>&amp; );</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span>            <a name="a8"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_node.html#a1274aa85381b268a398ae8929b8f4ad1">setInternalValue</a>( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a>&amp;,</div>
<div class="line">                                              <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html">MDataHandle</a>&amp; );</div>
<div class="line">                      </div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span>            <a name="a9"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_surface_shape.html#a4254418493ef1ab6847b9e5f395fa3de">isBounded</a>() <span class="keyword">const</span>;</div>
<div class="line">    <span class="keyword">virtual</span> <a name="_a10"></a><a class="code" href="#!/url=./cpp_ref/class_m_bounding_box.html">MBoundingBox</a>    <a name="a11"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_surface_shape.html#a762dab569a9d88aa731f3c7229803e1e">boundingBox</a>() <span class="keyword">const</span>; </div>
<div class="line"></div>
<div class="line">    <span class="keyword">static</span>  <span class="keywordtype">void</span> *      creator();</div>
<div class="line">    <span class="keyword">static</span>  <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a>     initialize();</div>
<div class="line">    quadricGeom*        geometry();</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    quadricGeom*        fGeometry;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Attributes</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keyword">static</span>  <a name="_a12"></a><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a>     shapeType;</div>
<div class="line">    <span class="keyword">static</span>  <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a>     radius1;</div>
<div class="line">    <span class="keyword">static</span>  <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a>     radius2;</div>
<div class="line">    <span class="keyword">static</span>  <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a>     height;</div>
<div class="line">    <span class="keyword">static</span>  <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a>     startAngle;</div>
<div class="line">    <span class="keyword">static</span>  <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a>     sweepAngle;</div>
<div class="line">    <span class="keyword">static</span>  <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a>     slices;</div>
<div class="line">    <span class="keyword">static</span>  <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a>     loops;</div>
<div class="line">    <span class="keyword">static</span>  <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a>     stacks;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// Shape type id</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keyword">static</span>  <a name="_a13"></a><a class="code" href="#!/url=./cpp_ref/class_m_type_id.html">MTypeId</a>     id;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// UI class - defines the UI part of a shape node</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">class </span>quadricShapeUI : <span class="keyword">public</span> <a name="_a14"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_surface_shape_u_i.html">MPxSurfaceShapeUI</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    quadricShapeUI();</div>
<div class="line">    <span class="keyword">virtual</span> ~quadricShapeUI(); </div>
<div class="line"></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a name="a15"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_surface_shape_u_i.html#a27dc15d8c360596ae16b5f3fbd236625">getDrawRequests</a>( <span class="keyword">const</span> <a name="_a16"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html">MDrawInfo</a> &amp; info,</div>
<div class="line">                                     <span class="keywordtype">bool</span> objectAndActiveOnly,</div>
<div class="line">                                     <a name="_a17"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request_queue.html">MDrawRequestQueue</a> &amp; requests );</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a name="a18"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_surface_shape_u_i.html#adb2bed7a0e37f8760ff6e48bce677443">draw</a>( <span class="keyword">const</span> <a name="_a19"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html">MDrawRequest</a> &amp; request,</div>
<div class="line">                          <a name="_a20"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html">M3dView</a> &amp; view ) <span class="keyword">const</span>;</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span>    <a name="a21"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_surface_shape_u_i.html#ad847ba49d36027fa9ae1184695b248b6">select</a>( <a name="_a22"></a><a class="code" href="#!/url=./cpp_ref/class_m_select_info.html">MSelectInfo</a> &amp;selectInfo,</div>
<div class="line">                            <a name="_a23"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> &amp;selectionList,</div>
<div class="line">                            <a name="_a24"></a><a class="code" href="#!/url=./cpp_ref/class_m_point_array.html">MPointArray</a> &amp;worldSpaceSelectPts ) <span class="keyword">const</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span>            getDrawRequestsWireframe( <a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html">MDrawRequest</a>&amp;,</div>
<div class="line">                                              <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html">MDrawInfo</a>&amp; );</div>
<div class="line">    <span class="keywordtype">void</span>            getDrawRequestsShaded(    <a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html">MDrawRequest</a>&amp;,</div>
<div class="line">                                              <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html">MDrawInfo</a>&amp;,</div>
<div class="line">                                              <a class="code" href="#!/url=./cpp_ref/class_m_draw_request_queue.html">MDrawRequestQueue</a>&amp;,</div>
<div class="line">                                              <a name="_a25"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_data.html">MDrawData</a>&amp; data );</div>
<div class="line"></div>
<div class="line">    <span class="keyword">static</span>  <span class="keywordtype">void</span> *  creator();</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keyword">enum</span> {</div>
<div class="line">        kDrawCylinder,</div>
<div class="line">        kDrawDisk,</div>
<div class="line">        kDrawPartialDisk,</div>
<div class="line">        kDrawSphere</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Draw Tokens</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keyword">enum</span> {</div>
<div class="line">        kDrawWireframe,</div>
<div class="line">        kDrawWireframeOnShaded,</div>
<div class="line">        kDrawSmoothShaded,</div>
<div class="line">        kDrawFlatShaded,</div>
<div class="line">        kLastToken</div>
<div class="line">    };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// SHAPE NODE IMPLEMENTATION</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> quadricShape::shapeType;</div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> quadricShape::radius1;</div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> quadricShape::radius2;</div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> quadricShape::height;</div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> quadricShape::startAngle;</div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> quadricShape::sweepAngle;</div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> quadricShape::slices;</div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> quadricShape::loops;</div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> quadricShape::stacks;</div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_type_id.html">MTypeId</a> quadricShape::id( 0x80111 );</div>
<div class="line"></div>
<div class="line">quadricShape::quadricShape()</div>
<div class="line">{</div>
<div class="line">    fGeometry = <span class="keyword">new</span> quadricGeom;</div>
<div class="line">    fGeometry-&gt;radius1      = 1.0;</div>
<div class="line">    fGeometry-&gt;radius2      = 1.0;</div>
<div class="line">    fGeometry-&gt;height       = 2.0;</div>
<div class="line">    fGeometry-&gt;startAngle   = 0.0;</div>
<div class="line">    fGeometry-&gt;sweepAngle   = 90.0;</div>
<div class="line">    fGeometry-&gt;slices       = 8;</div>
<div class="line">    fGeometry-&gt;loops        = 6;</div>
<div class="line">    fGeometry-&gt;stacks       = 4;</div>
<div class="line">    fGeometry-&gt;shapeType    = 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">quadricShape::~quadricShape()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">delete</span> fGeometry;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* override */</span></div>
<div class="line"><span class="keywordtype">void</span> quadricShape::postConstructor()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Description</span></div>
<div class="line"><span class="comment">// </span></div>
<div class="line"><span class="comment">//    When instances of this node are created internally, the MObject associated</span></div>
<div class="line"><span class="comment">//    with the instance is not created until after the constructor of this class</span></div>
<div class="line"><span class="comment">//    is called. This means that no member functions of MPxSurfaceShape can</span></div>
<div class="line"><span class="comment">//    be called in the constructor.</span></div>
<div class="line"><span class="comment">//    The postConstructor solves this problem. Maya will call this function</span></div>
<div class="line"><span class="comment">//    after the internal object has been created.</span></div>
<div class="line"><span class="comment">//    As a general rule do all of your initialization in the postConstructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{ </div>
<div class="line">    <span class="comment">// This call allows the shape to have shading groups assigned</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    setRenderable( <span class="keyword">true</span> );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* override */</span></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> quadricShape::compute( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a>&amp; <span class="comment">/*plug*/</span>, <a class="code" href="#!/url=./cpp_ref/class_m_data_block.html">MDataBlock</a>&amp; <span class="comment">/*datablock*/</span> )</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Since there are no output attributes this is not necessary but</span></div>
<div class="line"><span class="comment">// if we wanted to compute an output mesh for rendering it would</span></div>
<div class="line"><span class="comment">// be done here base on the inputs.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{ </div>
<div class="line">    <span class="keywordflow">return</span> <a name="a26"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a7f858db05022c8bc860d685e13bab6ae">MS::kUnknownParameter</a>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* override */</span></div>
<div class="line"><span class="keywordtype">bool</span> quadricShape::getInternalValue( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a>&amp; plug,</div>
<div class="line">                                     <a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html">MDataHandle</a>&amp; datahandle )</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Handle internal attributes.</span></div>
<div class="line"><span class="comment">// In order to impose limits on our attribute values we</span></div>
<div class="line"><span class="comment">// mark them internal and use the values in fGeometry intead.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> isOk = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( plug == radius1 ) {</div>
<div class="line">        datahandle.<a name="a27"></a><a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#a2a75482f517f405a641c0eee0bd995ac">set</a>( fGeometry-&gt;radius1 );</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == radius2 ) {</div>
<div class="line">        datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#a2a75482f517f405a641c0eee0bd995ac">set</a>( fGeometry-&gt;radius2 );</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == height ) {</div>
<div class="line">        datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#a2a75482f517f405a641c0eee0bd995ac">set</a>( fGeometry-&gt;height );</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == startAngle ) {</div>
<div class="line">        datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#a2a75482f517f405a641c0eee0bd995ac">set</a>( fGeometry-&gt;startAngle );</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == sweepAngle ) {</div>
<div class="line">        datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#a2a75482f517f405a641c0eee0bd995ac">set</a>( fGeometry-&gt;sweepAngle );</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == slices ) {</div>
<div class="line">        datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#a2a75482f517f405a641c0eee0bd995ac">set</a>( fGeometry-&gt;slices );</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == loops ) {</div>
<div class="line">        datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#a2a75482f517f405a641c0eee0bd995ac">set</a>( fGeometry-&gt;loops );</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == stacks ) {</div>
<div class="line">        datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#a2a75482f517f405a641c0eee0bd995ac">set</a>( fGeometry-&gt;stacks );</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        isOk = <a class="code" href="#!/url=./cpp_ref/class_m_px_node.html#a4d71aa2b223bea98e4997d86992933a7">MPxSurfaceShape::getInternalValue</a>( plug, datahandle );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> isOk;</div>
<div class="line">}</div>
<div class="line"><span class="comment">/* override */</span></div>
<div class="line"><span class="keywordtype">bool</span> quadricShape::setInternalValue( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a>&amp; plug,</div>
<div class="line">                                     <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html">MDataHandle</a>&amp; datahandle )</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Handle internal attributes.</span></div>
<div class="line"><span class="comment">// In order to impose limits on our attribute values we</span></div>
<div class="line"><span class="comment">// mark them internal and use the values in fGeometry intead.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> isOk = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// In the case of a disk or partial disk the inner radius must</span></div>
<div class="line">    <span class="comment">// never exceed the outer radius and the minimum radius is 0</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> ( plug == radius1 ) {</div>
<div class="line">        <span class="keywordtype">double</span> innerRadius = datahandle.<a name="a28"></a><a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#ac1983b7d41a8dae60dc5b1eb9f44a53c">asDouble</a>();</div>
<div class="line">        <span class="keywordtype">double</span> outerRadius = fGeometry-&gt;radius2;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( innerRadius &gt; outerRadius ) {</div>
<div class="line">            outerRadius = innerRadius;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( innerRadius &lt; 0 ) {</div>
<div class="line">            innerRadius = 0;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        fGeometry-&gt;radius1 = innerRadius;</div>
<div class="line">        fGeometry-&gt;radius2 = outerRadius;</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == radius2 ) {</div>
<div class="line">        <span class="keywordtype">double</span> outerRadius = datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#ac1983b7d41a8dae60dc5b1eb9f44a53c">asDouble</a>();</div>
<div class="line">        <span class="keywordtype">double</span> innerRadius = fGeometry-&gt;radius1;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( outerRadius &lt;= 0 ) {</div>
<div class="line">            outerRadius = 0.1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( innerRadius &gt; outerRadius ) {</div>
<div class="line">            innerRadius = outerRadius;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( innerRadius &lt; 0 ) {</div>
<div class="line">            innerRadius = 0;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        fGeometry-&gt;radius1 = innerRadius;</div>
<div class="line">        fGeometry-&gt;radius2 = outerRadius;</div>
<div class="line">        isOk = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == height ) {</div>
<div class="line">        <span class="keywordtype">double</span> val = datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#ac1983b7d41a8dae60dc5b1eb9f44a53c">asDouble</a>();</div>
<div class="line">        <span class="keywordflow">if</span> ( val &lt;= 0 ) {</div>
<div class="line">            val = 0.1;</div>
<div class="line">        }</div>
<div class="line">        fGeometry-&gt;height = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == startAngle ) {</div>
<div class="line">        <span class="keywordtype">double</span> val = datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#ac1983b7d41a8dae60dc5b1eb9f44a53c">asDouble</a>();</div>
<div class="line">        fGeometry-&gt;startAngle = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == sweepAngle ) {</div>
<div class="line">        <span class="keywordtype">double</span> val = datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#ac1983b7d41a8dae60dc5b1eb9f44a53c">asDouble</a>();</div>
<div class="line">        fGeometry-&gt;sweepAngle = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == slices ) {</div>
<div class="line">        <span class="keywordtype">short</span> val = datahandle.<a name="a29"></a><a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#ab4cfc0fe402e4a52cf87b8acc6a29861">asShort</a>();</div>
<div class="line">        <span class="keywordflow">if</span> ( val &lt; 3 ) {</div>
<div class="line">            val = 3;</div>
<div class="line">        }</div>
<div class="line">        fGeometry-&gt;slices = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == loops ) {</div>
<div class="line">        <span class="keywordtype">short</span> val = datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#ab4cfc0fe402e4a52cf87b8acc6a29861">asShort</a>();</div>
<div class="line">        <span class="keywordflow">if</span> ( val &lt; 3 ) {</div>
<div class="line">            val = 3;</div>
<div class="line">        }</div>
<div class="line">        fGeometry-&gt;loops = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( plug == stacks ) {</div>
<div class="line">        <span class="keywordtype">short</span> val = datahandle.<a class="code" href="#!/url=./cpp_ref/class_m_data_handle.html#ab4cfc0fe402e4a52cf87b8acc6a29861">asShort</a>();</div>
<div class="line">        <span class="keywordflow">if</span> ( val &lt; 2 ) {</div>
<div class="line">            val = 2;</div>
<div class="line">        }</div>
<div class="line">        fGeometry-&gt;stacks = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        isOk = <a class="code" href="#!/url=./cpp_ref/class_m_px_node.html#a1274aa85381b268a398ae8929b8f4ad1">MPxSurfaceShape::setInternalValue</a>( plug, datahandle );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> isOk;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* override */</span></div>
<div class="line"><span class="keywordtype">bool</span> quadricShape::isBounded()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* override */</span></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_bounding_box.html">MBoundingBox</a> quadricShape::boundingBox() const</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Returns the bounding box for the shape.</span></div>
<div class="line"><span class="comment">// In this case just use the radius and height attributes</span></div>
<div class="line"><span class="comment">// to determine the bounding box.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_bounding_box.html">MBoundingBox</a> result;    </div>
<div class="line">    quadricShape* nonConstThis = const_cast &lt;quadricShape*&gt; (<span class="keyword">this</span>);</div>
<div class="line">    quadricGeom* geom = nonConstThis-&gt;geometry();</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">double</span> r = geom-&gt;radius1;</div>
<div class="line">    result.<a name="a30"></a><a class="code" href="#!/url=./cpp_ref/class_m_bounding_box.html#aee704d46278fb5925a7bd814a5773ccd">expand</a>( <a name="_a31"></a><a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(r,r,r) ); result.<a class="code" href="#!/url=./cpp_ref/class_m_bounding_box.html#aee704d46278fb5925a7bd814a5773ccd">expand</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(-r,-r,-r) );</div>
<div class="line">    r = geom-&gt;radius2;</div>
<div class="line">    result.<a class="code" href="#!/url=./cpp_ref/class_m_bounding_box.html#aee704d46278fb5925a7bd814a5773ccd">expand</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(r,r,r) ); result.<a class="code" href="#!/url=./cpp_ref/class_m_bounding_box.html#aee704d46278fb5925a7bd814a5773ccd">expand</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(-r,-r,-r) );</div>
<div class="line">    r = geom-&gt;height;</div>
<div class="line">    result.<a class="code" href="#!/url=./cpp_ref/class_m_bounding_box.html#aee704d46278fb5925a7bd814a5773ccd">expand</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(r,r,r) ); result.<a class="code" href="#!/url=./cpp_ref/class_m_bounding_box.html#aee704d46278fb5925a7bd814a5773ccd">expand</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(-r,-r,-r) );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>* quadricShape::creator()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> quadricShape();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> quadricShape::initialize()</div>
<div class="line">{ </div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a>             stat;</div>
<div class="line">    <a name="_a32"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> numericAttr;</div>
<div class="line">    <a name="_a33"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_enum_attribute.html">MFnEnumAttribute</a>    enumAttr;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// QUADRIC type enumerated attribute</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    shapeType = enumAttr.<a name="a34"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_enum_attribute.html#a6bbfd35f997fda13f9a5824bc1fc6af7">create</a>( <span class="stringliteral">&quot;shapeType&quot;</span>, <span class="stringliteral">&quot;st&quot;</span>, 0, &amp;stat );</div>
<div class="line">    MCHECKERROR( stat, <span class="stringliteral">&quot;create shapeType attribute&quot;</span> );</div>
<div class="line">        enumAttr.<a name="a35"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_enum_attribute.html#a8f286e4714934d59d15bc79ba923e8f1">addField</a>( <span class="stringliteral">&quot;cylinder&quot;</span>, 0 );</div>
<div class="line">        enumAttr.<a class="code" href="#!/url=./cpp_ref/class_m_fn_enum_attribute.html#a8f286e4714934d59d15bc79ba923e8f1">addField</a>( <span class="stringliteral">&quot;disk&quot;</span>, 1 );</div>
<div class="line">        enumAttr.<a class="code" href="#!/url=./cpp_ref/class_m_fn_enum_attribute.html#a8f286e4714934d59d15bc79ba923e8f1">addField</a>( <span class="stringliteral">&quot;partialDisk&quot;</span>, 2 );</div>
<div class="line">        enumAttr.<a class="code" href="#!/url=./cpp_ref/class_m_fn_enum_attribute.html#a8f286e4714934d59d15bc79ba923e8f1">addField</a>( <span class="stringliteral">&quot;sphere&quot;</span>, 3 );</div>
<div class="line">    enumAttr.<a name="a36"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_attribute.html#ab8e48be1f1009a30d0e40dfcaf9e649d">setHidden</a>( <span class="keyword">false</span> );</div>
<div class="line">    enumAttr.<a name="a37"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_attribute.html#a9e68a8b4af016b37f6567cfa6d68e551">setKeyable</a>( <span class="keyword">true</span> );</div>
<div class="line">    stat = addAttribute( shapeType );</div>
<div class="line">    MCHECKERROR( stat, <span class="stringliteral">&quot;Error adding shapeType attribute.&quot;</span> );</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// QUADRIC ATTRIBUTES</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    MAKE_NUMERIC_ATTR( radius1, <span class="stringliteral">&quot;r1&quot;</span>, <a name="a38"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7acd70f5d2b5e8c1bb8e83b0482a33e518">MFnNumericData::kDouble</a>, 1.0, <span class="keyword">true</span> );</div>
<div class="line">    MAKE_NUMERIC_ATTR( radius2, <span class="stringliteral">&quot;r2&quot;</span>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7acd70f5d2b5e8c1bb8e83b0482a33e518">MFnNumericData::kDouble</a>, 1.0, <span class="keyword">true</span> );</div>
<div class="line">    MAKE_NUMERIC_ATTR( height, <span class="stringliteral">&quot;ht&quot;</span>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7acd70f5d2b5e8c1bb8e83b0482a33e518">MFnNumericData::kDouble</a>, 2.0, <span class="keyword">true</span> );</div>
<div class="line">    MAKE_NUMERIC_ATTR( startAngle, <span class="stringliteral">&quot;sta&quot;</span>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7acd70f5d2b5e8c1bb8e83b0482a33e518">MFnNumericData::kDouble</a>, 0.0, <span class="keyword">true</span> );</div>
<div class="line">    MAKE_NUMERIC_ATTR( sweepAngle, <span class="stringliteral">&quot;swa&quot;</span>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7acd70f5d2b5e8c1bb8e83b0482a33e518">MFnNumericData::kDouble</a>, 90.0, <span class="keyword">true</span> );</div>
<div class="line">    MAKE_NUMERIC_ATTR( slices, <span class="stringliteral">&quot;sl&quot;</span>, <a name="a39"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a868c593a83291c3c805f13f49e46bd44">MFnNumericData::kShort</a>, 8, <span class="keyword">true</span> );</div>
<div class="line">    MAKE_NUMERIC_ATTR( loops, <span class="stringliteral">&quot;lp&quot;</span>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a868c593a83291c3c805f13f49e46bd44">MFnNumericData::kShort</a>, 6, <span class="keyword">true</span> );</div>
<div class="line">    MAKE_NUMERIC_ATTR( stacks, <span class="stringliteral">&quot;sk&quot;</span>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a868c593a83291c3c805f13f49e46bd44">MFnNumericData::kShort</a>, 4, <span class="keyword">true</span> );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> stat;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">quadricGeom* quadricShape::geometry()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This function gets the values of all the attributes and</span></div>
<div class="line"><span class="comment">// assigns them to the fGeometry. Calling MPlug::getValue</span></div>
<div class="line"><span class="comment">// will ensure that the values are up-to-date.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> this_object = thisMObject();</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> plug( this_object, radius1 ); plug.<a name="a40"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>( fGeometry-&gt;radius1 );</div>
<div class="line">    plug.<a name="a41"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#af4744020dd39ea9da836c7ec24219084">setAttribute</a>( radius2 );       plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>( fGeometry-&gt;radius2 );</div>
<div class="line">    plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#af4744020dd39ea9da836c7ec24219084">setAttribute</a>( height );        plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>( fGeometry-&gt;height );</div>
<div class="line">    plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#af4744020dd39ea9da836c7ec24219084">setAttribute</a>( startAngle );    plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>( fGeometry-&gt;startAngle );</div>
<div class="line">    plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#af4744020dd39ea9da836c7ec24219084">setAttribute</a>( sweepAngle );    plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>( fGeometry-&gt;sweepAngle );</div>
<div class="line">    plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#af4744020dd39ea9da836c7ec24219084">setAttribute</a>( slices );        plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>( fGeometry-&gt;slices );</div>
<div class="line">    plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#af4744020dd39ea9da836c7ec24219084">setAttribute</a>( loops );         plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>( fGeometry-&gt;loops );</div>
<div class="line">    plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#af4744020dd39ea9da836c7ec24219084">setAttribute</a>( stacks );        plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>( fGeometry-&gt;stacks );</div>
<div class="line">    plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#af4744020dd39ea9da836c7ec24219084">setAttribute</a>( shapeType );     plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>( fGeometry-&gt;shapeType );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> fGeometry;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// UI IMPLEMENTATION</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line">quadricShapeUI::quadricShapeUI() {}</div>
<div class="line">quadricShapeUI::~quadricShapeUI() {}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>* quadricShapeUI::creator()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> quadricShapeUI();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* override */</span></div>
<div class="line"><span class="keywordtype">void</span> quadricShapeUI::getDrawRequests( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html">MDrawInfo</a> &amp; info,</div>
<div class="line">                             <span class="keywordtype">bool</span> <span class="comment">/*objectAndActiveOnly*/</span>,</div>
<div class="line">                             <a class="code" href="#!/url=./cpp_ref/class_m_draw_request_queue.html">MDrawRequestQueue</a> &amp; queue )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// The draw data is used to pass geometry through the </span></div>
<div class="line">    <span class="comment">// draw queue. The data should hold all the information</span></div>
<div class="line">    <span class="comment">// needed to draw the shape.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_draw_data.html">MDrawData</a> data;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html">MDrawRequest</a> request = info.<a name="a42"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html#a7056c15c87746a72e32634d684694bc0">getPrototype</a>( *<span class="keyword">this</span> );</div>
<div class="line">    quadricShape* shapeNode = (quadricShape*)surfaceShape();</div>
<div class="line">    quadricGeom* geom = shapeNode-&gt;geometry();</div>
<div class="line">    getDrawData( geom, data );</div>
<div class="line">    request.<a name="a43"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#a5d3e9bc6ae679a823b6c3fcace09d796">setDrawData</a>( data );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Are we displaying meshes?</span></div>
<div class="line">    <span class="keywordflow">if</span> ( ! info.<a name="a44"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html#af74dc36d6f4dce353fcaaadef4d55a42">objectDisplayStatus</a>( <a name="a45"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a169efed3046f92a7f5159d4e67207c31a3b0cb6bd56061b8965de34bb4dc7473e">M3dView::kDisplayMeshes</a> ) )</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Use display status to determine what color to draw the object</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">switch</span> ( info.<a name="a46"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html#a16a1754d1de4e7ad544766e128fdfd2a">displayStyle</a>() )</div>
<div class="line">    {        </div>
<div class="line">        <span class="keywordflow">case</span> <a name="a47"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a1b68f8823b8e275a4b548fdd27263e8aa53c5241bb4e72f6c9547de918125d068">M3dView::kWireFrame</a> :</div>
<div class="line">            getDrawRequestsWireframe( request, info );</div>
<div class="line">            queue.<a name="a48"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request_queue.html#a94a649d06791f74a76864a980e41ed63">add</a>( request );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">case</span> <a name="a49"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a1b68f8823b8e275a4b548fdd27263e8aa620925ec70781a5f5de890d906660d24">M3dView::kGouraudShaded</a> :</div>
<div class="line">            request.<a name="a50"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#abe62a517ec22e2000ec81e0ec774831b">setToken</a>( kDrawSmoothShaded );</div>
<div class="line">            getDrawRequestsShaded( request, info, queue, data );</div>
<div class="line">            queue.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request_queue.html#a94a649d06791f74a76864a980e41ed63">add</a>( request );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">case</span> <a name="a51"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a1b68f8823b8e275a4b548fdd27263e8aa7914d385424ca72fdf84654b735a5a50">M3dView::kFlatShaded</a> :</div>
<div class="line">            request.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#abe62a517ec22e2000ec81e0ec774831b">setToken</a>( kDrawFlatShaded );</div>
<div class="line">            getDrawRequestsShaded( request, info, queue, data );</div>
<div class="line">            queue.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request_queue.html#a94a649d06791f74a76864a980e41ed63">add</a>( request );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:    </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* override */</span></div>
<div class="line"><span class="keywordtype">void</span> quadricShapeUI::draw( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html">MDrawRequest</a> &amp; request, <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html">M3dView</a> &amp; view ) <span class="keyword">const</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// From the given draw request, get the draw data and determine</span></div>
<div class="line"><span class="comment">// which quadric to draw and with what values.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{   </div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_draw_data.html">MDrawData</a> data = request.<a name="a52"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#a82892340b7bdce4fae2bd8d2a0feacaf">drawData</a>();</div>
<div class="line">    quadricGeom * geom = (quadricGeom*)data.<a name="a53"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_data.html#acd307d60fb424f4dd221ebca86d525f0">geometry</a>();</div>
<div class="line">    <span class="keywordtype">int</span> token = request.<a name="a54"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#aa1fffc9ae537c640417f539883dc973e">token</a>();</div>
<div class="line">    <span class="keywordtype">bool</span> drawTexture = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    view.beginGL(); </div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( (token == kDrawSmoothShaded) || (token == kDrawFlatShaded) )</div>
<div class="line">    {</div>
<div class="line"><span class="preprocessor">#if     defined(SGI) || defined(MESA)</span></div>
<div class="line">        glEnable( GL_POLYGON_OFFSET_EXT );</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">        glEnable( GL_POLYGON_OFFSET_FILL );</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">        <span class="comment">// Set up the material</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="_a55"></a><a class="code" href="#!/url=./cpp_ref/class_m_material.html">MMaterial</a> material = request.<a name="a56"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#ad8d3426de607892e954c7698c52a8373">material</a>();</div>
<div class="line">        material.<a name="a57"></a><a class="code" href="#!/url=./cpp_ref/class_m_material.html#a5dd0244ce46c3c8593aa06e390f1cd19">setMaterial</a>( request.<a name="a58"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#a29c5fd43c9e42c958ae3455eba8e3e8e">multiPath</a>(), request.<a name="a59"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#a9af8d1d3490a3fa7779927df11c7c039">isTransparent</a>() );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Enable texturing</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        drawTexture = material.<a name="a60"></a><a class="code" href="#!/url=./cpp_ref/class_m_material.html#ab17b0e81e07f6b1683650ed86b2d634c">materialIsTextured</a>();</div>
<div class="line">        <span class="keywordflow">if</span> ( drawTexture ) glEnable(GL_TEXTURE_2D);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Apply the texture to the current view</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> ( drawTexture ) {</div>
<div class="line">            material.<a name="a61"></a><a class="code" href="#!/url=./cpp_ref/class_m_material.html#ae046db7d059bb8c89d9f97e6771814e3">applyTexture</a>( view, data );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    GLUquadricObj* qobj = gluNewQuadric();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span>( token )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> kDrawWireframe :</div>
<div class="line">        <span class="keywordflow">case</span> kDrawWireframeOnShaded :</div>
<div class="line">            gluQuadricDrawStyle( qobj, GLU_LINE );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> kDrawSmoothShaded :</div>
<div class="line">            gluQuadricNormals( qobj, GLU_SMOOTH );</div>
<div class="line">            gluQuadricTexture( qobj, <span class="keyword">true</span> );</div>
<div class="line">            gluQuadricDrawStyle( qobj, GLU_FILL );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> kDrawFlatShaded :</div>
<div class="line">            gluQuadricNormals( qobj, GLU_FLAT );</div>
<div class="line">            gluQuadricTexture( qobj, <span class="keyword">true</span> );</div>
<div class="line">            gluQuadricDrawStyle( qobj, GLU_FILL );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span> ( geom-&gt;shapeType )</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> kDrawCylinder :</div>
<div class="line">        gluCylinder( qobj, geom-&gt;radius1, geom-&gt;radius2, geom-&gt;height,</div>
<div class="line">                     geom-&gt;slices, geom-&gt;stacks );</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> kDrawDisk :</div>
<div class="line">        gluDisk( qobj, geom-&gt;radius1, geom-&gt;radius2, geom-&gt;slices, geom-&gt;loops );</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> kDrawPartialDisk :</div>
<div class="line">        gluPartialDisk( qobj, geom-&gt;radius1, geom-&gt;radius2, geom-&gt;slices,</div>
<div class="line">                        geom-&gt;loops, geom-&gt;startAngle, geom-&gt;sweepAngle );</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> kDrawSphere : </div>
<div class="line">    <span class="keywordflow">default</span> :</div>
<div class="line">        gluSphere( qobj, geom-&gt;radius1, geom-&gt;slices, geom-&gt;stacks );</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Turn off texture mode</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> ( drawTexture ) glDisable(GL_TEXTURE_2D);</div>
<div class="line"></div>
<div class="line">    view.endGL(); </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* override */</span></div>
<div class="line"><span class="keywordtype">bool</span> quadricShapeUI::select( <a class="code" href="#!/url=./cpp_ref/class_m_select_info.html">MSelectInfo</a> &amp;selectInfo,</div>
<div class="line">                             <a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> &amp;selectionList,</div>
<div class="line">                             <a class="code" href="#!/url=./cpp_ref/class_m_point_array.html">MPointArray</a> &amp;worldSpaceSelectPts ) <span class="keyword">const</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Select function. Gets called when the bbox for the object is selected.</span></div>
<div class="line"><span class="comment">// This function just selects the object without doing any intersection tests.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <a name="_a62"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_mask.html">MSelectionMask</a> priorityMask( <a name="a63"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_mask.html#acffca3b33fddce63d3220bc7487e879da134c7010db2f002a49e1107590c8e33a">MSelectionMask::kSelectObjectsMask</a> );</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> item;</div>
<div class="line">    item.<a name="a64"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a23929aeafb29672f2652128eac9c4dec">add</a>( selectInfo.selectPath() );</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a> xformedPt;</div>
<div class="line">    selectInfo.addSelection( item, xformedPt, selectionList,</div>
<div class="line">                             worldSpaceSelectPts, priorityMask, <span class="keyword">false</span> );</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> quadricShapeUI::getDrawRequestsWireframe( <a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html">MDrawRequest</a>&amp; request,</div>
<div class="line">                                               <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html">MDrawInfo</a>&amp; info )</div>
<div class="line">{</div>
<div class="line">    request.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#abe62a517ec22e2000ec81e0ec774831b">setToken</a>( kDrawWireframe );</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bca">M3dView::DisplayStatus</a> displayStatus = info.<a name="a65"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html#aea5775805aed7f93884084d4cf6607b7">displayStatus</a>();</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a9b24d632cd80af03d971c58ce0b8df6a">M3dView::ColorTable</a> activeColorTable = <a name="a66"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a9b24d632cd80af03d971c58ce0b8df6aa18362fb06caee77a9bae15aa90e06d1c">M3dView::kActiveColors</a>;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a9b24d632cd80af03d971c58ce0b8df6a">M3dView::ColorTable</a> dormantColorTable = <a name="a67"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a9b24d632cd80af03d971c58ce0b8df6aa466739773561fe25487724d1b7a16234">M3dView::kDormantColors</a>;</div>
<div class="line">    <span class="keywordflow">switch</span> ( displayStatus )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a68"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bcaa1606a62e097fcfa55af6251a83b44243">M3dView::kLead</a> :</div>
<div class="line">            request.<a name="a69"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#ac3ee612a0b7ad10c46bb22294660620c">setColor</a>( LEAD_COLOR, activeColorTable );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a70"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bcaab6a8784b4cf96692e0d71d19c44ce732">M3dView::kActive</a> :</div>
<div class="line">            request.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#ac3ee612a0b7ad10c46bb22294660620c">setColor</a>( ACTIVE_COLOR, activeColorTable );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a71"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bcaa49cf0d80f04f7d6476e6852c1349050f">M3dView::kActiveAffected</a> :</div>
<div class="line">            request.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#ac3ee612a0b7ad10c46bb22294660620c">setColor</a>( ACTIVE_AFFECTED_COLOR, activeColorTable );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a72"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bcaa658348c4d7bc7605d9359a41fd393c86">M3dView::kDormant</a> :</div>
<div class="line">            request.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#ac3ee612a0b7ad10c46bb22294660620c">setColor</a>( DORMANT_COLOR, dormantColorTable );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a73"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bcaa88694d85749c9c85738c56c4912c385a">M3dView::kHilite</a> :</div>
<div class="line">            request.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#ac3ee612a0b7ad10c46bb22294660620c">setColor</a>( HILITE_COLOR, activeColorTable );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:    </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> quadricShapeUI::getDrawRequestsShaded( <a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html">MDrawRequest</a>&amp; request,</div>
<div class="line">                                            <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html">MDrawInfo</a>&amp; info,</div>
<div class="line">                                            <a class="code" href="#!/url=./cpp_ref/class_m_draw_request_queue.html">MDrawRequestQueue</a>&amp; queue,</div>
<div class="line">                                            <a class="code" href="#!/url=./cpp_ref/class_m_draw_data.html">MDrawData</a>&amp; data )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Need to get the material info</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a name="_a74"></a><a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html">MDagPath</a> path = info.<a name="a75"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html#a29c5fd43c9e42c958ae3455eba8e3e8e">multiPath</a>();   <span class="comment">// path to your dag object </span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html">M3dView</a> view = info.<a name="a76"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html#aa9f517a1406259b47e15937aa3166678">view</a>();;        <span class="comment">// view to draw to</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_material.html">MMaterial</a> material = <a name="a77"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_surface_shape_u_i.html#a94d753f8b614df1c5408e36219c06577">MPxSurfaceShapeUI::material</a>( path );</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bca">M3dView::DisplayStatus</a> displayStatus = info.<a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html#aea5775805aed7f93884084d4cf6607b7">displayStatus</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Evaluate the material and if necessary, the texture.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> ( ! material.<a name="a78"></a><a class="code" href="#!/url=./cpp_ref/class_m_material.html#a6d63e4963e97825dc4aff1990173ac62">evaluateMaterial</a>( view, path ) ) {</div>
<div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;Couldnt evaluate\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> drawTexture = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordflow">if</span> ( drawTexture &amp;&amp; material.<a class="code" href="#!/url=./cpp_ref/class_m_material.html#ab17b0e81e07f6b1683650ed86b2d634c">materialIsTextured</a>() ) {</div>
<div class="line">        material.<a name="a79"></a><a class="code" href="#!/url=./cpp_ref/class_m_material.html#a9b9efaa70622be5ce870074f9c1d669c">evaluateTexture</a>( data );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    request.<a name="a80"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#a161ccc1e96ef0fce46f6e300a620c232">setMaterial</a>( material );</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> materialTransparent = <span class="keyword">false</span>;</div>
<div class="line">    material.<a name="a81"></a><a class="code" href="#!/url=./cpp_ref/class_m_material.html#aeffb187d35cd75bf7e28d7da40ea3b46">getHasTransparency</a>( materialTransparent );</div>
<div class="line">    <span class="keywordflow">if</span> ( materialTransparent ) {</div>
<div class="line">        request.<a name="a82"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#ac3e4724dadceededf8e8a9ebf8ad7049">setIsTransparent</a>( <span class="keyword">true</span> );</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// create a draw request for wireframe on shaded if</span></div>
<div class="line">    <span class="comment">// necessary.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> ( (displayStatus == <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bcaab6a8784b4cf96692e0d71d19c44ce732">M3dView::kActive</a>) ||</div>
<div class="line">         (displayStatus == <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bcaa1606a62e097fcfa55af6251a83b44243">M3dView::kLead</a>) ||</div>
<div class="line">         (displayStatus == <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#ad9c34c5373567566950642c16a7c4bcaa88694d85749c9c85738c56c4912c385a">M3dView::kHilite</a>) )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html">MDrawRequest</a> wireRequest = info.<a class="code" href="#!/url=./cpp_ref/class_m_draw_info.html#a7056c15c87746a72e32634d684694bc0">getPrototype</a>( *<span class="keyword">this</span> );</div>
<div class="line">        wireRequest.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#a5d3e9bc6ae679a823b6c3fcace09d796">setDrawData</a>( data );</div>
<div class="line">        getDrawRequestsWireframe( wireRequest, info );</div>
<div class="line">        wireRequest.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#abe62a517ec22e2000ec81e0ec774831b">setToken</a>( kDrawWireframeOnShaded );</div>
<div class="line">        wireRequest.<a name="a83"></a><a class="code" href="#!/url=./cpp_ref/class_m_draw_request.html#a6021f26912668f091b824b68803d20c0">setDisplayStyle</a>( <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a1b68f8823b8e275a4b548fdd27263e8aa53c5241bb4e72f6c9547de918125d068">M3dView::kWireFrame</a> );</div>
<div class="line">        queue.<a class="code" href="#!/url=./cpp_ref/class_m_draw_request_queue.html#a94a649d06791f74a76864a980e41ed63">add</a>( wireRequest );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> initializePlugin( <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> obj )</div>
<div class="line">{ </div>
<div class="line">    <a name="_a84"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_plugin.html">MFnPlugin</a> plugin( obj, PLUGIN_COMPANY, <span class="stringliteral">&quot;3.0&quot;</span>, <span class="stringliteral">&quot;Any&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> plugin.registerShape( <span class="stringliteral">&quot;quadricShape&quot;</span>, quadricShape::id,</div>
<div class="line">                                   &amp;quadricShape::creator,</div>
<div class="line">                                   &amp;quadricShape::initialize,</div>
<div class="line">                                   &amp;quadricShapeUI::creator  );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> uninitializePlugin( <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> obj)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_fn_plugin.html">MFnPlugin</a> plugin( obj );</div>
<div class="line">    <span class="keywordflow">return</span> plugin.deregisterNode( quadricShape::id );</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
          <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br></div>
   </div></body>
</html>
