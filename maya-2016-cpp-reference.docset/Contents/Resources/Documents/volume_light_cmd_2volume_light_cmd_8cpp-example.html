<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
<head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><meta content="MAYAUL" name="product"><meta content="2016" name="release"><meta content="Developer" name="book"><meta content="2015-10-14" name="created"><meta content="GUID-02DEF634-1E7B-48C6-8ACD-2C934CA97887" name="topicid"><meta content="concept" name="topic-type">
<title>volumeLightCmd/volumeLightCmd.cpp</title>
<meta content="C++" name="topic-subtype"/></meta></meta></meta></meta></meta></meta></meta></head>
<body height="100%"><div class="body_content" id="body-content"><link href="cpp_ref/navtree.css" rel="stylesheet" type="text/css"><link href="cpp_ref/doxygen.css" rel="stylesheet" type="text/css"><link href="cpp_ref/tabs.css" rel="stylesheet" type="text/css"><link href="style/adsk.cpm.css" rel="stylesheet" type="text/css"><script language="javascript">var index = 'index.html';</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/ac_common.js"); });</script><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('volume_light_cmd_2volume_light_cmd_8cpp-example.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type="text/javascript">$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=y5CYlxTRD0znCzRLDwX0Wy7-g1EdC1XA4dSC-Y1LtaeScyli8_Ps5jPKqTr4xKxMI0OOUfkDplvX3uxN0JnPclebSYW8_J1HBzf4VLQEzQ8M4PsYXF_cMyp1Oumaetky&category=5297189e-446b-459e-ae1d-9d0360400781_tech&ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script><!-- begin MT -->
<div class="Dark" id="MicrosoftTranslatorWidget" style="position:absolute;right:20px;top:5px;z-index:100;color:white;background-color:#555555;height:58px;overflow:hidden"></div>
<div>
<div class="head">
<h1>volumeLightCmd/volumeLightCmd.cpp</h1>
</div>
<div id="top"><!-- Generated by Doxygen 1.8.10 -->
<div class="tabs" id="navrow1">
<ul class="tablist">
<li><a href="./index.html"><span>MainÂ Page</span></a></li>
<li><a href="./pages.html"><span>Topics</span></a></li>
<li><a href="./modules.html"><span>Modules</span></a></li>
<li><a href="./namespaces.html"><span>Namespaces</span></a></li>
<li><a href="./annotated.html"><span>Classes</span></a></li>
<li><a href="./examples.html"><span>Examples</span></a></li>
</ul>
</div>
</div><!-- top -->
<div class="ui-resizable side-nav-resizable" id="side-nav">
<div id="nav-tree">
<div id="nav-tree-contents">
<div class="sync" id="nav-sync"></div>
</div>
</div>
<div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;">
</div>
</div>
<div id="doc-content">
<div class="header">
<div class="headertitle">
<div class="title">volumeLightCmd/volumeLightCmd.cpp</div> </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">//-</span></div>
<div class="line"><span class="comment">// ==========================================================================</span></div>
<div class="line"><span class="comment">// Copyright 1995,2006,2008 Autodesk, Inc. All rights reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Use of this software is subject to the terms of the Autodesk</span></div>
<div class="line"><span class="comment">// license agreement provided at the time of installation or download,</span></div>
<div class="line"><span class="comment">// or which otherwise accompanies this software in either electronic</span></div>
<div class="line"><span class="comment">// or hard copy form.</span></div>
<div class="line"><span class="comment">// ==========================================================================</span></div>
<div class="line"><span class="comment">//+</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MIOStream.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MSimple.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnNurbsCurve.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPointArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MDoubleArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPoint.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MRampAttribute.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnVolumeLight.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFloatArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MIntArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MColorArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MColor.h&gt;</span></div>
<div class="line"></div>
<div class="line"><a name="a0"></a><a class="code" href="./group___macros.html#gaf3b44fe07495c3792b926494fca7b517">DeclareSimpleCommand</a>( volumeLight, PLUGIN_COMPANY, <span class="stringliteral">"5.0"</span>);</div>
<div class="line"><span class="preprocessor">#define EQUAL(a,b) ( (((a-b) &gt; -0.00001) &amp;&amp; ((a-b) &lt; 0.00001)) ? 1 : 0 )</span></div>
<div class="line"></div>
<div class="line"><a name="_a1"></a><a class="code" href="./class_m_status.html">MStatus</a> volumeLight::doIt( <span class="keyword">const</span> <a name="_a2"></a><a class="code" href="./class_m_arg_list.html">MArgList</a>&amp; args )</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> arc = 180.0f;</div>
<div class="line"> <span class="keywordtype">double</span> coneEndRadius = 0.0f;</div>
<div class="line"> <a class="code" href="./class_m_fn_volume_light.html#ae32b0f427eddd72309b9ee0e1b4f7b65">MFnVolumeLight::MLightDirection</a> volumeLightDirection = <a name="a3"></a><a class="code" href="./class_m_fn_volume_light.html#ae32b0f427eddd72309b9ee0e1b4f7b65af613fe61d894615879847002b39a2985">MFnVolumeLight::kOutward</a>;</div>
<div class="line"> <a class="code" href="./class_m_fn_volume_light.html#add3777de7fdc6ebd147c5d8e22de4843">MFnVolumeLight::MLightShape</a> lightShape = <a name="a4"></a><a class="code" href="./class_m_fn_volume_light.html#add3777de7fdc6ebd147c5d8e22de4843aa87808fd406ed50378599656bb2b0eaf">MFnVolumeLight::kConeVolume</a>;</div>
<div class="line"> <span class="keywordtype">bool</span> emitAmbient = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span>    i;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Parse the arguments.</span></div>
<div class="line"> <span class="keywordflow">for</span> ( i = 0; i &lt; args.<a name="a5"></a><a class="code" href="./class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>(); i++ )</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">if</span> ( <a name="_a6"></a><a class="code" href="./class_m_string.html">MString</a>( <span class="stringliteral">"-a"</span> ) == args.<a name="a7"></a><a class="code" href="./class_m_arg_list.html#ad24ff3826e4df513b55e1a0ecb0a665b">asString</a>( i, &amp;stat )</div>
<div class="line">                &amp;&amp; <a name="a8"></a><a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> == stat)</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordtype">double</span> tmp = args.<a name="a9"></a><a class="code" href="./class_m_arg_list.html#a15a33f5705d13873ab7f003bb64f0741">asDouble</a>( ++i, &amp;stat );</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> == stat )</div>
<div class="line">                arc = tmp;</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_string.html">MString</a>( <span class="stringliteral">"-c"</span> ) == args.<a class="code" href="./class_m_arg_list.html#ad24ff3826e4df513b55e1a0ecb0a665b">asString</a>( i, &amp;stat )</div>
<div class="line">                &amp;&amp; <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> == stat)</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordtype">double</span> tmp = args.<a class="code" href="./class_m_arg_list.html#a15a33f5705d13873ab7f003bb64f0741">asDouble</a>( ++i, &amp;stat );</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> == stat )</div>
<div class="line">                coneEndRadius = tmp;</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_string.html">MString</a>( <span class="stringliteral">"-e"</span> ) == args.<a class="code" href="./class_m_arg_list.html#ad24ff3826e4df513b55e1a0ecb0a665b">asString</a>( i, &amp;stat )</div>
<div class="line">                &amp;&amp; <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> == stat)</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordtype">bool</span> tmp = args.<a name="a10"></a><a class="code" href="./class_m_arg_list.html#ae784f8b1dc47107155eec3e8e6af0722">asBool</a>( ++i, &amp;stat );</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> == stat )</div>
<div class="line">                emitAmbient = tmp;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a name="_a11"></a><a class="code" href="./class_m_fn_volume_light.html">MFnVolumeLight</a> light;</div>
<div class="line"></div>
<div class="line">    light.<a name="a12"></a><a class="code" href="./class_m_fn_volume_light.html#a407ee76c6cb600206505fe034e637e34">create</a>( <span class="keyword">true</span>, &amp;stat);</div>
<div class="line"></div>
<div class="line">    cout&lt;&lt;<span class="stringliteral">"What's up?"</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error creating light."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    stat = light.<a name="a13"></a><a class="code" href="./class_m_fn_volume_light.html#a4f97998b997d087253aa489705e268ac">setArc</a> ((<span class="keywordtype">float</span>)arc);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error setting \"arc\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    stat = light.<a name="a14"></a><a class="code" href="./class_m_fn_volume_light.html#abd5af56fedcc43f98e32a44edbfc6449">setVolumeLightDirection</a> (volumeLightDirection);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error setting \"volumeLightDirection\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    stat = light.<a name="a15"></a><a class="code" href="./class_m_fn_volume_light.html#a95b9278a0298f4ae7c9851069d50a884">setConeEndRadius</a> ((<span class="keywordtype">float</span>)coneEndRadius);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error setting \"coneEndRadius\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    stat = light.<a name="a16"></a><a class="code" href="./class_m_fn_volume_light.html#a371899622c4b1dc4c36cd2bd70e454d3">setEmitAmbient</a> (emitAmbient);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error setting \"emitAmbient\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    stat = light.<a name="a17"></a><a class="code" href="./class_m_fn_volume_light.html#a43609e28691d10a7708829b92380590c">setLightShape</a> (lightShape);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error setting \"lightShape\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> arcGet = light.<a name="a18"></a><a class="code" href="./class_m_fn_volume_light.html#a14108257030b05243daba67d6c5bb3d7">arc</a> (&amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat || arcGet != arc)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting \"arc\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_fn_volume_light.html#ae32b0f427eddd72309b9ee0e1b4f7b65">MFnVolumeLight::MLightDirection</a> volumeLightDirectionGet = light.<a name="a19"></a><a class="code" href="./class_m_fn_volume_light.html#a992e292f4b8a33c5440f8b090b6c47e2">volumeLightDirection</a> (&amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat || volumeLightDirectionGet != volumeLightDirection)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting \"volumeLightDirection\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> coneEndRadiusGet = light.<a name="a20"></a><a class="code" href="./class_m_fn_volume_light.html#aaf0c991a15df02b117d469b72abbf8ce">coneEndRadius</a> (&amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat || coneEndRadiusGet != coneEndRadius)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting \"coneEndRadius\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">bool</span> emitAmbientGet = light.<a name="a21"></a><a class="code" href="./class_m_fn_volume_light.html#ac848783721fd1f7c9991a2e3aeb54d69">emitAmbient</a> (&amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat || emitAmbientGet != emitAmbient)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting \"emitAmbient\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_fn_volume_light.html#add3777de7fdc6ebd147c5d8e22de4843">MFnVolumeLight::MLightShape</a> lightShapeGet = light.<a name="a22"></a><a class="code" href="./class_m_fn_volume_light.html#affa7d785c88a8d812704d924f9e1a378">lightShape</a> (&amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat || lightShapeGet != lightShape)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting \"lightShape\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Get reference to the penumbra ramp.</span></div>
<div class="line"> <a name="_a23"></a><a class="code" href="./class_m_ramp_attribute.html">MRampAttribute</a> ramp = light.<a name="a24"></a><a class="code" href="./class_m_fn_volume_light.html#a2b603dae76de15413c34b185247405f6">penumbraRamp</a> (&amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a name="_a25"></a><a class="code" href="./class_m_float_array.html">MFloatArray</a> a, b;</div>
<div class="line"> <a name="_a26"></a><a class="code" href="./class_m_int_array.html">MIntArray</a> c,d;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Get the entries in the ramp</span></div>
<div class="line">    ramp.<a name="a27"></a><a class="code" href="./class_m_ramp_attribute.html#a16578e3d542dc49b8cb065a36bc6a5fa">getEntries</a> (d, a, b, c, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting entries from \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// There should be 2 entries by default.</span></div>
<div class="line"> <span class="keywordflow">if</span> (d.<a name="a28"></a><a class="code" href="./class_m_int_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != 2)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Invalid number of entries in \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_float_array.html">MFloatArray</a> a1, b1;</div>
<div class="line"> <a class="code" href="./class_m_int_array.html">MIntArray</a> c1;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Prepare an array of entries to add.</span></div>
<div class="line"> <span class="comment">// In this case we are just adding 1 more entry</span></div>
<div class="line"> <span class="comment">// at position 0.5 with a curve value of 0.25 and a linear interpolation.</span></div>
<div class="line">    a1.<a name="a29"></a><a class="code" href="./class_m_float_array.html#a6d61a0ea5cd7a087db5ee81a990d4307">append</a> (0.5f);</div>
<div class="line">    b1.<a class="code" href="./class_m_float_array.html#a6d61a0ea5cd7a087db5ee81a990d4307">append</a> (0.25f);</div>
<div class="line">    c1.<a name="a30"></a><a class="code" href="./class_m_int_array.html#a11568087ac2ca16f4106cee62f65afd7">append</a> (<a name="a31"></a><a class="code" href="./class_m_ramp_attribute.html#a8962af5f4bd1f62f61a0474d75c30720ac188c019178783e5be55110601309d7d">MRampAttribute::kLinear</a>);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Add it to the curve ramp</span></div>
<div class="line">    ramp.<a name="a32"></a><a class="code" href="./class_m_ramp_attribute.html#a8decfce763d5b9c989a6ab06a99a1262">addEntries</a> (a1, b1, c1, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error adding entries to \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"> <span class="comment">// Get the entries to make sure that the above add actually worked.</span></div>
<div class="line"> <a class="code" href="./class_m_float_array.html">MFloatArray</a> a2, b2;</div>
<div class="line"> <a class="code" href="./class_m_int_array.html">MIntArray</a> c2,d2;</div>
<div class="line">    ramp.<a class="code" href="./class_m_ramp_attribute.html#a16578e3d542dc49b8cb065a36bc6a5fa">getEntries</a> (d2, a2, b2, c2, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting entries from \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> ( a.<a name="a33"></a><a class="code" href="./class_m_float_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() + a1.<a class="code" href="./class_m_float_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != a2.<a class="code" href="./class_m_float_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>())</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Invalid number of entries in \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Now try to interpolate the value at a point</span></div>
<div class="line"> <span class="keywordtype">float</span> newVal = -1;</div>
<div class="line">    ramp.<a name="a34"></a><a class="code" href="./class_m_ramp_attribute.html#a3399046b5fa52a26efbddcb88341b838">getValueAtPosition</a>(.3f, newVal, &amp;stat);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error interpolating value from \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> ( !EQUAL(newVal, .15f))</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Invalid interpolation in  \"penumbraRamp\" expected .15 got "</span>&lt;&lt;newVal</div>
<div class="line">            &lt;&lt;<span class="stringliteral">" ."</span>&lt;&lt;endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Try to delete an entry in an incorrect manner. </span></div>
<div class="line"> <span class="comment">// This delete will work because there is an entry at 0, </span></div>
<div class="line"> <span class="comment">// However we should never do it this way, because the entries</span></div>
<div class="line"> <span class="comment">// array can become sparse, so trying to delete an entry without </span></div>
<div class="line"> <span class="comment">// checking whether an entry exists at that index can cause a failure.</span></div>
<div class="line"> <a class="code" href="./class_m_int_array.html">MIntArray</a> entriesToDelete;</div>
<div class="line">    entriesToDelete.<a class="code" href="./class_m_int_array.html#a11568087ac2ca16f4106cee62f65afd7">append</a> (0);</div>
<div class="line">    ramp.<a name="a35"></a><a class="code" href="./class_m_ramp_attribute.html#a6509c8b16c1cb820a980c8ca9c35eb18">deleteEntries</a> (entriesToDelete, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error deleting entries from \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Check to see whether the above delete worked.</span></div>
<div class="line"> <span class="comment">// As mentioned earlier it did work, but we shouldn't do it this way.</span></div>
<div class="line"> <span class="comment">// To illustrate why we shouldn't do it this way, we'll try to delete</span></div>
<div class="line"> <span class="comment">// entry at index 0 ( this no longer exists)</span></div>
<div class="line">    ramp.<a class="code" href="./class_m_ramp_attribute.html#a16578e3d542dc49b8cb065a36bc6a5fa">getEntries</a> (d2, a2, b2, c2, &amp;stat);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( a2.<a class="code" href="./class_m_float_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != 2)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Invalid number of entries in \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"> <span class="comment">// Trying to delete entry at 0.</span></div>
<div class="line">    entriesToDelete.<a name="a36"></a><a class="code" href="./class_m_int_array.html#ad5522f028dde0080b753279426415a4a">clear</a>();</div>
<div class="line">    entriesToDelete.<a class="code" href="./class_m_int_array.html#a11568087ac2ca16f4106cee62f65afd7">append</a> (0);</div>
<div class="line">    ramp.<a class="code" href="./class_m_ramp_attribute.html#a6509c8b16c1cb820a980c8ca9c35eb18">deleteEntries</a> (entriesToDelete, &amp;stat);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// It will fail because no entry exists.</span></div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> == stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error deleting entries from \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> ( a2.<a class="code" href="./class_m_float_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != 2)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Invalid number of entries in \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// The proper way to delete is to retrieve the index by calling "getEntries"</span></div>
<div class="line">    ramp.<a class="code" href="./class_m_ramp_attribute.html#a16578e3d542dc49b8cb065a36bc6a5fa">getEntries</a> (d2, a2, b2, c2, &amp;stat);</div>
<div class="line">    entriesToDelete.<a class="code" href="./class_m_int_array.html#ad5522f028dde0080b753279426415a4a">clear</a>();</div>
<div class="line">    entriesToDelete.<a class="code" href="./class_m_int_array.html#a11568087ac2ca16f4106cee62f65afd7">append</a> (d2[0]);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Delete the first logical entry in the entry array.</span></div>
<div class="line">    ramp.<a class="code" href="./class_m_ramp_attribute.html#a6509c8b16c1cb820a980c8ca9c35eb18">deleteEntries</a> (entriesToDelete, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error deleting entries from \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// There should be only 1 entry left.</span></div>
<div class="line">    ramp.<a class="code" href="./class_m_ramp_attribute.html#a16578e3d542dc49b8cb065a36bc6a5fa">getEntries</a> (d2, a2, b2, c2, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting entries from \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line">    entriesToDelete.<a class="code" href="./class_m_int_array.html#ad5522f028dde0080b753279426415a4a">clear</a>();</div>
<div class="line">    entriesToDelete.<a class="code" href="./class_m_int_array.html#a11568087ac2ca16f4106cee62f65afd7">append</a> (d2[0]);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Can't delete the last entry, should return failure.</span></div>
<div class="line">    ramp.<a class="code" href="./class_m_ramp_attribute.html#a6509c8b16c1cb820a980c8ca9c35eb18">deleteEntries</a> (entriesToDelete, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> == stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error deleting entries from \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ramp.<a name="a37"></a><a class="code" href="./class_m_ramp_attribute.html#a39802af9639376d84daf19d71b4b7a9b">setPositionAtIndex</a> (0.0f, d2[0], &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">"Error setting position at index: %d, of \"penumbraRamp\" attribute.\n"</span>, d2[0]);</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ramp.<a name="a38"></a><a class="code" href="./class_m_ramp_attribute.html#a6b775aec98344c4710216f53d1e1efaf">setValueAtIndex</a> (1.0f, d2[0], &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">"Error setting value at index: %d, of \"penumbraRamp\" attribute.\n"</span>, d2[0]);</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ramp.<a name="a39"></a><a class="code" href="./class_m_ramp_attribute.html#a6ad50dcfaf48ec2b3c48671495a7f552">setInterpolationAtIndex</a> (<a name="a40"></a><a class="code" href="./class_m_ramp_attribute.html#a8962af5f4bd1f62f61a0474d75c30720a634ee767a8e90ff4d56e140459cca31f">MRampAttribute::kNone</a>, d2[0], &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">"Error setting interpolation at index: %d, of \"penumbraRamp\" attribute.\n"</span>, d2[0]);</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_ramp_attribute.html">MRampAttribute</a> ramp2 = light.<a name="a41"></a><a class="code" href="./class_m_fn_volume_light.html#a8c8ad99bf3a32a58659cfd564bf41251">colorRamp</a> (&amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting  \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }   </div>
<div class="line"> <a class="code" href="./class_m_float_array.html">MFloatArray</a> a3;</div>
<div class="line"> <a name="_a42"></a><a class="code" href="./class_m_color_array.html">MColorArray</a> b3;</div>
<div class="line"> <a class="code" href="./class_m_int_array.html">MIntArray</a> c3,d3;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Get the entries in the ramp</span></div>
<div class="line">    ramp2.<a class="code" href="./class_m_ramp_attribute.html#a16578e3d542dc49b8cb065a36bc6a5fa">getEntries</a> (d3, a3, b3, c3, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting entries from \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"> <span class="comment">// There should be 2 entries by default.</span></div>
<div class="line"> <span class="keywordflow">if</span> ( d3.<a class="code" href="./class_m_int_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != 2)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Invalid number of entries in \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_float_array.html">MFloatArray</a> a4;</div>
<div class="line"> <a class="code" href="./class_m_color_array.html">MColorArray</a> b4;</div>
<div class="line"> <a class="code" href="./class_m_int_array.html">MIntArray</a> c4;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Prepare an array of entries to add.</span></div>
<div class="line"> <span class="comment">// In this case we are just adding 1 more entry</span></div>
<div class="line"> <span class="comment">// at position 0.5 withe curve value of 0.5 and a linear interpolation.</span></div>
<div class="line">    a4.<a class="code" href="./class_m_float_array.html#a6d61a0ea5cd7a087db5ee81a990d4307">append</a> (0.5f);</div>
<div class="line">    b4.<a name="a43"></a><a class="code" href="./class_m_color_array.html#a9740f98aca5891832ee7b8bfc5839106">append</a> (<a name="_a44"></a><a class="code" href="./class_m_color.html">MColor</a> (0.0f, 0.0f, 0.75f));</div>
<div class="line">    c4.<a class="code" href="./class_m_int_array.html#a11568087ac2ca16f4106cee62f65afd7">append</a> (<a class="code" href="./class_m_ramp_attribute.html#a8962af5f4bd1f62f61a0474d75c30720ac188c019178783e5be55110601309d7d">MRampAttribute::kLinear</a>);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Add it to the curve ramp</span></div>
<div class="line">    ramp2.<a class="code" href="./class_m_ramp_attribute.html#a8decfce763d5b9c989a6ab06a99a1262">addEntries</a> (a4, b4, c4, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error adding entries to \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"> <span class="comment">// Get the entries to make sure that the above add actually worked.</span></div>
<div class="line"> <a class="code" href="./class_m_float_array.html">MFloatArray</a> a5;</div>
<div class="line"> <a class="code" href="./class_m_color_array.html">MColorArray</a> b5;</div>
<div class="line"> <a class="code" href="./class_m_int_array.html">MIntArray</a> c5,d5;</div>
<div class="line">    ramp2.<a class="code" href="./class_m_ramp_attribute.html#a16578e3d542dc49b8cb065a36bc6a5fa">getEntries</a> (d5, a5, b5, c5, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting entries from \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> (  a3.<a class="code" href="./class_m_float_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() + a4.<a class="code" href="./class_m_float_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != a5.<a class="code" href="./class_m_float_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>())</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Invalid number of entries in \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Now try to interpolate the color at a point</span></div>
<div class="line"> <a class="code" href="./class_m_color.html">MColor</a> newCol(0.0, 0.0, 0.0);</div>
<div class="line">    ramp2.<a name="a45"></a><a class="code" href="./class_m_ramp_attribute.html#a17e50880d65a3e3d8de05869bcc8271e">getColorAtPosition</a>(.3f, newCol, &amp;stat);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat )</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error interpolating color from \"penumbraRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">if</span> ( !EQUAL(newCol[2], .45))</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Invalid color interpolation in  \"colorRamp\" expected .45 got "</span>&lt;&lt;newCol[2]&lt;&lt;endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_color.html">MColor</a> clr (0.5, 0.5, 0.0);</div>
<div class="line">    ramp2.<a name="a46"></a><a class="code" href="./class_m_ramp_attribute.html#aebe94c933af49b1ee69a933b00056915">setColorAtIndex</a> (clr, d5[0], &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error setting color at index: "</span>&lt;&lt;d5[0]</div>
<div class="line">            &lt;&lt;<span class="stringliteral">", of \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ramp2.<a class="code" href="./class_m_ramp_attribute.html#a6ad50dcfaf48ec2b3c48671495a7f552">setInterpolationAtIndex</a> (<a name="a47"></a><a class="code" href="./class_m_ramp_attribute.html#a8962af5f4bd1f62f61a0474d75c30720a29d6ccf6cf507f6e66c72b1d3c2aed00">MRampAttribute::kSpline</a>, d5[1], &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error setting interpolation at index: "</span>&lt;&lt;d5[1]</div>
<div class="line">            &lt;&lt;<span class="stringliteral">", of \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// The following demonstrates some of the new methods of the MRampAttribute API</span></div>
<div class="line"> <a class="code" href="./class_m_int_array.html">MIntArray</a> indices;</div>
<div class="line"> <a class="code" href="./class_m_float_array.html">MFloatArray</a> pos;</div>
<div class="line"> <a class="code" href="./class_m_color_array.html">MColorArray</a> colors;</div>
<div class="line"> <a class="code" href="./class_m_int_array.html">MIntArray</a> interps;</div>
<div class="line">    ramp2.<a class="code" href="./class_m_ramp_attribute.html#a16578e3d542dc49b8cb065a36bc6a5fa">getEntries</a>( indices, pos, colors, interps, &amp;stat);</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error getting entries from \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;colors.<a name="a48"></a><a class="code" href="./class_m_color_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">    {</div>
<div class="line">        colors[i] = colors[i]*2;</div>
<div class="line">        interps[i] = <a class="code" href="./class_m_ramp_attribute.html#a8962af5f4bd1f62f61a0474d75c30720a29d6ccf6cf507f6e66c72b1d3c2aed00">MRampAttribute::kSpline</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// set color ramp with new values</span></div>
<div class="line">    stat = ramp2.<a name="a49"></a><a class="code" href="./class_m_ramp_attribute.html#aa58634ab9423b54b441333a30ec7a1f1">setRamp</a>( colors, pos, interps );</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error setting values on \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// sort entries by position, this will regenerate the indices back from 0</span></div>
<div class="line">    stat = ramp2.<a name="a50"></a><a class="code" href="./class_m_ramp_attribute.html#a4da23488afc771635de2b18abd51503d">sort</a>( <span class="keyword">true</span> );</div>
<div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != stat)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">"Error sorting entries from \"colorRamp\" attribute."</span>&lt;&lt;endl;</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Check for valid indices before setting interpolation types</span></div>
<div class="line"> <span class="keywordflow">if</span> ( ramp2.<a name="a51"></a><a class="code" href="./class_m_ramp_attribute.html#a0d0e7910e9fa55e0bedd210e7e2764b8">hasIndex</a>( 0 ) )</div>
<div class="line">    {</div>
<div class="line">        ramp2.<a class="code" href="./class_m_ramp_attribute.html#a6ad50dcfaf48ec2b3c48671495a7f552">setInterpolationAtIndex</a> (<a class="code" href="./class_m_ramp_attribute.html#a8962af5f4bd1f62f61a0474d75c30720a29d6ccf6cf507f6e66c72b1d3c2aed00">MRampAttribute::kSpline</a>, 0 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( ramp2.<a class="code" href="./class_m_ramp_attribute.html#a0d0e7910e9fa55e0bedd210e7e2764b8">hasIndex</a>( 56 ) )</div>
<div class="line">    {</div>
<div class="line">        ramp2.<a class="code" href="./class_m_ramp_attribute.html#a6ad50dcfaf48ec2b3c48671495a7f552">setInterpolationAtIndex</a>( <a class="code" href="./class_m_ramp_attribute.html#a8962af5f4bd1f62f61a0474d75c30720a29d6ccf6cf507f6e66c72b1d3c2aed00">MRampAttribute::kSpline</a>, 56 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div class="footer-block"><a class="comments-anchor" href="../html/ac.cmtdialog.htm" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br/></div>
</link></link></link></link></div></body>
</html>
